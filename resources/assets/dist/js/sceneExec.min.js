/* All right reserved by Neusoft Co. Ltd. 2016-10-14 10:10:16 */
!function(a){function b(){a("#chooseScenehead").data("searchKeyWord",null),a("#chooseScenehead").data("searchKey",null),a("#sceneTable").data("userStore",null)}function c(){return a("#chooseScenehead").data("searchKey")}function d(b){a("#sceneTable").data("sceneStore",b)}function e(b){a("#execResultTable").data("execResultStore",b)}a.ude.page.execute.parameter={initParameters:b,getSearchKey:c,setSceneStore:d,setExecResultStore:e}}(jQuery),function(a){a.execute={testConn:function(a,b){var c=new DataCenter;c.addParameter("url",b);var d={};d.url=appPath+"/utf/execute/testConnection.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)},ifExistReport:function(a,b){var c=new DataCenter;c.addParameter("projectId",a),c.addParameter("projectName",b);var d={};d.url=appPath+"/utf/execute/ifExistReport.action",d.sync=!0,$.maf.action.requestData(d,c,!1)},initExecResult:function(a,b,c){var d=new DataCenter;d.addParameter("projectId",b),d.addParameter("projectName",c);var e={};e.url=appPath+"/utf/execute/getExecResult.action",e.sync=!1,e.load=a,$.maf.action.requestData(e,d,!1)},getSceneByProject:function(a,b){var c=new DataCenter;c.addParameter("projectId",b);var d={};d.url=appPath+"/utf/execute/getScene.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)},getSceneByProjectNoSceneCase:function(a,b){var c=new DataCenter;c.addParameter("projectId",b);var d={};d.url=appPath+"/utf/execute/getSceneByProjectNoSceneCase.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)},getMoreConfig:function(a,b){var c=new DataCenter;c.addParameter("projectId",b);var d={};d.url=appPath+"/utf/execute/getMore.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)},execScene:function(a,b,c,d,e){a.addParameter("mark",d),a.addParameter("projectName",b),a.addParameter("recordId",c),a.addParameter("executeTime",e);var f={};f.url=appPath+"/utf/execute/execScene.action",f.sync=!1,$.maf.action.requestData(f,a)},saveExecConfig:function(a,b){var c={};c.url=appPath+"/utf/execute/saveExecConfig.action",c.sync=!1,c.load=a,$.maf.action.requestData(c,b)},createXML:function(a,b,c,d){var e={};b.addParameter("projectName",c),b.addParameter("flag",d),e.url=appPath+"/utf/execute/createXML.action",e.sync=!1,e.load=a,$.maf.action.requestData(e,b)},createAppAndExe:function(a,b,c,d){var e={};b.addParameter("projectName",c),b.addParameter("executeTime",d),e.url=appPath+"/utf/execute/createAppAndExecuteFile.action",e.sync=!1,e.load=a,$.maf.action.requestData(e,b)},createDataExcel:function(a,b,c,d){var e={};b.addParameter("projectName",c),b.addParameter("executeTime",d),e.url=appPath+"/utf/execute/createDataExcel.action",e.sync=!1,e.load=a,$.maf.action.requestData(e,b)},createPtScript:function(a,b,c,d,e,f){var g=new DataCenter;g.addParameter("webroot",b),g.addParameter("ifV4Flag",c),g.addParameter("projectName",d),g.addParameter("projectId",e),g.addParameter("flag",f);var h={};h.url=appPath+"/utf/execute/createPtScript.action",h.sync=!1,h.load=a,$.maf.action.requestData(h,g)},getIfV4:function(a){var b=new DataCenter,c={};c.url=appPath+"/utf/execute/getIfV4.action",c.sync=!1,c.load=a,$.maf.action.requestData(c,b)},packageDownload:function(a,b,c,d){var e=new DataCenter;e.addParameter("projectId",b),e.addParameter("projectName",c),e.addParameter("executeTime",d);var f={};f.url=appPath+"/utf/execute/packageDownload.action",f.sync=!1,f.load=a,$.maf.action.requestData(f,e)},lookReportOnLine:function(a,b,c,d){var e=new DataCenter;e.addParameter("fileName",b),e.addParameter("startTime",c),e.addParameter("projectName",d);var f={};f.url=appPath+"/utf/execute/lookReportOnLine.action",f.sync=!1,f.load=a,$.maf.action.requestData(f,e)},downLoadReport:function(a,b,c){var d=new DataCenter;d.addParameter("startTime",b),d.addParameter("projectName",c);var e={};e.url=appPath+"/utf/execute/downLoadReport.action",e.sync=!1,e.load=a,$.maf.action.requestData(e,d)},deleteRecord:function(a,b){var c=new DataCenter;c.addParameter("id",b);var d={};d.url=appPath+"/utf/execute/deleteRecord.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)},getCurrentProject:function(a){var b=new DataCenter,c={};c.url=appPath+"/utf/execute/getCurrentProject.action",c.sync=!1,c.load=a,$.maf.action.requestData(c,b)},getSingleResult:function(a,b,c){var d=new DataCenter;d.addParameter("projectId",b),d.addParameter("recordId",c);var e={};e.url=appPath+"/utf/execute/getSingleResult.action",e.sync=!1,e.load=a,$.maf.action.requestData(e,d)},getExecuteProgress:function(a,b,c){var d=new DataCenter;d.addParameter("projectId",b),d.addParameter("recordId",c);var e={};e.url=appPath+"/utf/execute/getExecuteProgress.action",e.sync=!1,e.load=a,$.maf.action.requestData(e,d)},updateEndTime:function(a){var b=new DataCenter;b.addParameter("id",a);var c={};c.url=appPath+"/utf/execute/updateEndTime.action",c.sync=!0,$.maf.action.requestData(c,b)},getUrl:function(a){var b=new DataCenter,c={};c.url=appPath+"/utf/execute/getUrl.action",c.sync=!0,c.load=a,$.maf.action.requestData(c,b)},initBrowserType:function(a){var b=new DataCenter,c={};c.url=appPath+"/utf/execute/initBrowserType.action",c.sync=!0,c.load=a,$.maf.action.requestData(c,b)},getIpListByBrowserType:function(a,b){var c=new DataCenter;c.addParameter("browserType",a);var d={};d.url=appPath+"/utf/execute/getIpListByBrowserType.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},checkDataIntegrity:function(a,b){var c={};c.url=appPath+"/utf/execute/checkDataIntegrity.action",c.sync=!1,c.load=a,$.maf.action.requestData(c,b)},getParamGroupBySceneId:function(a,b){var c=new DataCenter;c.addParameter("sceneId",a);var d={};d.url=appPath+"/utf/execute/getParamGroupBySceneId.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},addSceneAndMethod:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseMobile/addSceneAndMethod.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},createXMLForAPP:function(a,b,c,d,e){var f={};b.addParameter("projectName",c),b.addParameter("flag",d),b.addParameter("paramGroup",e),f.url=appPath+"/utf/execute/createXMLForAPP.action",f.sync=!1,f.load=a,$.maf.action.requestData(f,b)},saveExecResult:function(a,b){var c={};c.url=appPath+"/utf/execute/saveExecResult.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},saveExecResultBasicInfo:function(a,b){var c={};c.url=appPath+"/utf/execute/saveExecResultBasicInfo.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},updateMobileExecInfo:function(a,b,c){var d=new DataCenter,e={};e.url=appPath+"/utf/execute/updateMobileExecInfo.action",e.sync=!1,e.load=c,d.addParameter("eventResultIds",a),d.addParameter("results",b),$.maf.action.requestData(e,d)}}}($.ude.rpc),function(a){function b(){var b=function(b){if(b){var c=b.getParameter("getURL");a("#url").val(c)}else a("#url").val("http://")};a.ude.rpc.execute.getUrl(b),a("#execContenter").collapse({query:"div span"}),a(".down-middle-content").css("height",a(".common-content").height()-a("#configContent").height()-a("#more").height()-a(".common-right").height()-20),ja.initParameters(),g(),q(),a.ude.rpc.testcaseRpc.getIncludeFrame(d),fa=!0,a("#execIng").click(),c()}function c(){var b=function(b){if(b){var c=b.getParameter("project");ha=c[0],ia=c[1]}a.ude.rpc.execute.getMoreConfig(w,ha)};a.ude.rpc.execute.getCurrentProject(b)}function d(b){if(b){var c=b.getDataStore("utfProjectInfoTResult"),d=c.getRowSet().getRow(0).data;"1"===d.perserve01?a("#defaultFrameTd").hide():a("#defaultFrameTd").show()}}function e(b){if(!b)return void showMessage(a.i18n.prop("ude.page.execute.redrawExecResultSuccess"),null,"error");if(1===b.getCode())return void showMessage(b.getDetail(),null,"");var c=b.getDataStore("execResultStore");ja.setExecResultStore(c);var d=c.getRowSet().getData(),e=d.length;ra="0";for(var f=0;f<e;f++)"1"===d[f].status&&(ra="1"),d[f].progress=d[f].progress.replace(/\&lt;/g,"<").replace(/\&gt;/g,">");"0"===ra&&clearInterval(ba),a("#execResultTable").udeTable().fnRedraw(d)}function f(){var b=function(b){if(b){var c=b.getParameter("project");ha=c[0],ia=c[1],a.ude.rpc.execute.ifExistReport(ha,ia),a.ude.rpc.execute.initExecResult(K,ha,ia)}};a.ude.rpc.execute.getCurrentProject(b)}function g(){var b=function(b){if(b){var c=b.getParameter("browserTypeAll"),d=c.split(","),e=document.location.pathname,f=e.substr(1).indexOf("/"),g=e.substr(0,f+1),j=document.getElementsByName("browserType");if(0==j.length){for(var l=0;l<d.length;l++){var m="";0==l?(m='<input name="browserType" type="radio" id="'+d[l]+'" value="'+d[l]+'" checked="checked"/><label for="'+d[l]+'">'+d[l]+"</label>",k(d[l])):m='<input name="browserType" type="radio" id="'+d[l]+'" value="'+d[l]+'"/><label for="'+d[l]+'">'+d[l]+"</label>";var n='<img id="detail'+d[l]+'" src="'+g+'/utf/themes/default/images/view_detail.png" />';a("#browserTypeAll").append(m,n)}h(),p(),i(d)}}};a.ude.rpc.execute.initBrowserType(b)}function h(){sa="",a("input[name='browserType']").change(function(){var b=a("input[name='browserType']:checked").val();"ie"===b.toLowerCase().substring(0,2)?a("#ipAddressStr").val(""):"firefox"===b.toLowerCase()?a("#ipAddressStr").val(""):"chrome"===b.toLowerCase()&&a("#ipAddressStr").val(""),k(b.toLowerCase())})}function i(b){for(var c=0;c<b.length;c++){var d=b[c],e="#detail"+d;a(e).bind("click",function(b){var c=this.id.substring(6,this.id.length);j(c),a("#"+c).attr("checked","checked"),a("#ipAddressStr").val("")})}a("#saveIpId").bind("click",function(){o()}),a("#cancelIpAddr").bind("click",function(){a("#ipAddressStr").val("")})}function j(b){a.ude.rpc.execute.getIpListByBrowserType(b,m)}function k(b){a.ude.rpc.execute.getIpListByBrowserType(b,l)}function l(b){for(var c=b.getDataStore("ipStoreName"),d=c.getRowSet().getData(),e=0;e<d.length;e++)"idle"===d[e].ipStatus&&localIpAddr===d[e].ipAddress&&a("#ipAddressStr").val(d[e].ipAddress)}function m(b){a("#ipListTable").empty(),ta={};var c=b.getDataStore("ipStoreName"),d=c.getRowSet().getData();if(ta=d,d.length>0)for(var e=a("#ipListTable"),f=(e.find("tbody>tr:first"),0);f<d.length;f++){var g=a("<tr></tr>"),h=a("<td></td>");"idle"===d[f].ipStatus?localIpAddr===d[f].ipAddress?h.append(a("<input type='radio' name='ipAddress' value="+d[f].ipAddress+"><strong><font color='black'>"+d[f].ipAddress+"</font></strong>")):h.append(a("<input type='radio' name='ipAddress' value="+d[f].ipAddress+"><font color='black'>"+d[f].ipAddress+"</font>")):localIpAddr===d[f].ipAddress?h.append(a("<input type='radio' name='ipAddress' value="+d[f].ipAddress+" disabled><strong><font color='black'>"+d[f].ipAddress+"</font></strong>")):h.append(a("<input type='radio' name='ipAddress' value="+d[f].ipAddress+" disabled><font color='black'>"+d[f].ipAddress+"</font>")),g.append(h),e.append(g)}n(),a.ude.dialog.open("ipChooseDialog",{title:a.i18n.prop("ude.page.execute.getIpListByBrowserTypeSuccess"),width:"250px"})}function n(){sa="",a("input[name='ipAddress']").click(function(){sa=a("input[name='ipAddress']:checked").val()})}function o(){""!==sa?(a("#ipAddressStr").val(sa),a.ude.dialog.close()):showMessage(a.i18n.prop("ude.page.execute.selectIpAddress")+"\uff01",null,"error")}function p(b){a("input[name='operate']").change(function(){la="0";var b=a("input[name='operate']:checked").val();"sceneTest"===b?(a("#sceneStr").attr("disabled",!1),a("#chooseSceneBtn").attr("disabled",!1)):(pa="",qa="",a("#sceneStr").attr("disabled",!0),a("#chooseSceneBtn").attr("disabled",!0))})}function q(){a("#testConnBtn").bind("click",function(){y()}),a("#chooseSceneBtn").bind("click",function(){z()}),a("#more").bind("click",function(){t()}),a("#executeBtn").bind("click",function(){J()}),a("#caseDownLoadBtn").bind("click",function(){W()}),a("input[name='browserType']").bind("change",function(){}),a("#saveId").bind("click",function(){A()}),a("#moreConfigSaveId").bind("click",function(){x()}),a("#exportBtn").bind("click",function(){Z()}),a("#exportBtnResult").bind("click",function(){Z()}),a("#deleteBtn").bind("click",function(){$()}),a("#deleteBtnResult").bind("click",function(){$()}),a("#addMethodToSceneBtn").bind("click",function(){r(),a("#sceneMethodsTbody").append("<tr class='tr' align='center'><td class='td'><input type='checkbox' name='' value='methodSeclect'/></td><td class='td'><input style='width:340px;'  type='text' ></input></td></tr>");var b=a("#sceneMethodsTbody").find("td:last-child").find("input").last();b.udeSelect().setData(ua)}),a("#deletMethodToSceneBtn").bind("click",function(){var b=s();for(var c in b)b[c]&&a(b[c]).remove();r("del")}),a("#moveupMethodBtn").bind("click",function(){var b=s();1!==b.length?showMessage(a.i18n.prop("testcase.scenedesign.sceneJs.initBindFunction_moveMethod_showMessage"),a("#sceneChooseDialog"),"error"):a(b[0]).prev()[0]?a(b[0]).insertBefore(a(b[0]).prev()):showMessage(a.i18n.prop("testcase.scenedesign.sceneJs.initBindFunction_moveupMethodBtn"),a("#sceneChooseDialog"),"error")}),a("#movedownMethodBtn").bind("click",function(){var b=s();1!==b.length?showMessage(a.i18n.prop("testcase.scenedesign.sceneJs.initBindFunction_moveMethod_showMessage"),a("#sceneChooseDialog"),"error"):a(b[0]).next()[0]?a(b[0]).insertAfter(a(b[0]).next()):showMessage(a.i18n.prop("testcase.scenedesign.sceneJs.initBindFunction_movedownMethodBtn"),a("#sceneChooseDialog"),"error")}),a("#execIng").bind("click",function(){a("#execIngDiv").css("display",""),a("#execResultDiv").css("display","none"),fa&&(f(),fa=!1)}),a("#execResult").bind("click",function(){a("#execIngDiv").css("display","none"),a("#execResultDiv").css("display",""),M(appPath+"/utf/execute/initParam.action",[])})}function r(b){var c=a("#sceneChooseDialog").parent().offset().top,d=a("#sceneChooseDialog").parent().height(),e=document.body.clientHeight,f=e-d-c,g=a("#Dialog_sceneMethodsDiv")[0].scrollHeight,h=a("#Dialog_sceneMethodsDiv")[0].clientHeight,i=g>h;f<30&&("del"!==b||i)?a("#Dialog_sceneMethodsDiv").css("height",a("#Dialog_sceneMethodsDiv").height()):a("#Dialog_sceneMethodsDiv").css("height","auto")}function s(){var b=a("#sceneMethodsTbody").children(),c=[],d=0,e=0;for(e=0;b[e];e++)a(b[e]).find("input")[0].checked===!0&&(c[d++]=b[e]);return c}function t(){a("#moreConfigsTbody").html(""),a("#Dialog_moreConfigsDiv").css("height","auto"),a.ude.dialog.open("moreConfigs",{title:a.i18n.prop("ude.page.execute.moreConfig"),width:"405px"}),a.ude.rpc.execute.getMoreConfig(v,ha)}function u(){var b=a("#moreConfigContent").parent().offset().top,c=a("#moreConfigContent").parent().height(),d=document.body.clientHeight,e=d-c-b;a("#Dialog_moreConfigsDiv")[0].scrollHeight,a("#Dialog_moreConfigsDiv")[0].clientHeight;e<100?a("#Dialog_moreConfigsDiv").css("height",a("#Dialog_moreConfigsDiv").height()):a("#Dialog_moreConfigsDiv").css("height","auto")}function v(b){ca="";var c=null,d=null;ea&&(c=a("#execResultTable").udeTable().fnGetSelectedRowData(),d=a("#paramTable").udeTable().fnGetSelectedRowData());var e="";if(null==c&&null==d)if(""!=da)for(var f=da.split(";"),g=f.length,h=b.getDataStore("moreConfig"),i=h.getRowSet().getData(),j=i.length,k=0;k<j;k++){var l=!1;ca+=i[k].name+";";for(var m=0;m<g;m++)if(f[m].split(":")[0]==i[k].name){if("string"==i[k].type)e="<tr><td><label style='width:175px;'>"+i[k].label+"</label></td> <td><input style='width:161px;' type='text' id='"+i[k].name+"' value='"+f[m].split(":")[1]+"'/></td></tr>";else if("boolean"==i[k].type){var n="";n="true"==f[m].split(":")[1]?"<option value='true' selected>\u662f</option><option value='false'>\u5426</option>":"<option value='true'>\u662f</option><option value='false' selected>\u5426</option>",e="<tr><td><label style='width:175px;'>"+i[k].label+"</label></td> <td><select style='width:175px;' id='"+i[k].name+"'>"+n+"</select></td></tr>"}l=!0;break}if(l)u(),a("#moreConfigsTbody").append(e);else{if("string"==i[k].type)e="<tr><td><label style='width:175px;'>"+i[k].label+"</label></td> <td><input style='width:161px;' type='text' id='"+i[k].name+"'/></td></tr>";else if("boolean"==i[k].type){var n="";n="true"==i[k].defaultValue?"<option value='true' selected>\u662f</option><option value='false'>\u5426</option>":"<option value='true'>\u662f</option><option value='false' selected>\u5426</option>",e="<tr><td><label style='width:175px;'>"+i[k].label+"</label></td> <td><select style='width:175px;' id='"+i[k].name+"'>"+n+"</select></td></tr>"}u(),a("#moreConfigsTbody").append(e)}}else for(var h=b.getDataStore("moreConfig"),i=h.getRowSet().getData(),j=i.length,k=0;k<j;k++){if(ca+=i[k].name+";","string"==i[k].type)e="<tr><td ><label style='width:175px;'>"+i[k].label+"</label></td>  <td><input style='width:161px;' type='text' id='"+i[k].name+"'/></td></tr>";else if("boolean"==i[k].type){var n="";n="true"==i[k].defaultValue?"<option value='true' selected>\u662f</option><option value='false'>\u5426</option>":"<option value='true'>\u662f</option><option value='false' selected>\u5426</option>",e="<tr ><td ><label style='width:175px;'>"+i[k].label+"</label></td>  <td><select style='width:175px;' id='"+i[k].name+"'>"+n+"</select></td></tr>"}u(),a("#moreConfigsTbody").append(e)}else for(var o=c?c:d,p=o.moreConfig,q=p.split(";"),r=q.length,h=b.getDataStore("moreConfig"),i=h.getRowSet().getData(),j=i.length,k=0;k<j;k++){var l=!1;ca+=i[k].name+";";for(var m=0;m<r;m++)if(q[m].split(":")[0]==i[k].name){if("string"==i[k].type)e="<tr><td><label style='width:175px;'>"+i[k].label+"</label></td> <td><input style='width:161px;' type='text' id='"+i[k].name+"' value='"+q[m].split(":")[1]+"'/></td></tr>";else if("boolean"==i[k].type){var n="";n="true"==q[m].split(":")[1]?"<option value='true' selected>\u662f</option><option value='false'>\u5426</option>":"<option value='true'>\u662f</option><option value='false' selected>\u5426</option>",e="<tr><td><label style='width:175px;'>"+i[k].label+"</label></td> <td><select style='width:175px;' id='"+i[k].name+"'>"+n+"</select></td></tr>"}l=!0;break}if(l)u(),a("#moreConfigsTbody").append(e);else{if("string"==i[k].type)e="<tr><td><label style='width:175px;'>"+i[k].label+"</label></td> <td><input style='width:161px;' type='text' id='"+i[k].name+"'/></td></tr>";else if("boolean"==i[k].type){var n="";n="true"==i[k].defaultValue?"<option value='true' selected>\u662f</option><option value='false'>\u5426</option>":"<option value='true'>\u662f</option><option value='false' selected>\u5426</option>",e="<tr><td><label style='width:175px;'>"+i[k].label+"</label></td> <td><select style='width:175px;' id='"+i[k].name+"'>"+n+"</select></td></tr>"}u(),a("#moreConfigsTbody").append(e)}}""!=ca&&(ca=ca.substring(0,ca.length-1))}function w(a){ca="";for(var b=a.getDataStore("moreConfig"),c=b.getRowSet().getData(),d=c.length,e=0;e<d;e++)ca+=null==c[e].defaultValue?c[e].name+":;":c[e].name+":"+c[e].defaultValue+";";""!=ca&&(ca=ca.substring(0,ca.length-1)),da=ca}function x(){da="";for(var b=ca.split(";"),c=0;c<b.length;c++)da+=b[c]+":"+a("#"+b[c]).val()+";";""!=da&&(da=da.substring(0,da.length-1)),ea=!1,a.ude.dialog.close()}function y(){var b=a.trim(a("#url").val());if("http://"===b||""===b)return showMessage(a.i18n.prop("ude.page.execute.testConnect_showMessage")+"\uff01",null,"error"),void a("#url").focus();var c=function(b){if(b){var c=b.getParameter("testResult");"0"===c?showMessage(a.i18n.prop("ude.page.execute.testConnect_fail")+"\uff01",null,"error"):showMessage(a.i18n.prop("ude.page.execute.testConnect_success")+"\uff01",null,"")}};a.ude.rpc.execute.testConn(c,b)}function z(){a("#sceneMethodsTbody").html(""),a("#Dialog_sceneMethodsDiv").css("height","auto"),la="0",a.ude.dialog.open("sceneChooseDialog",{title:a.i18n.prop("ude.page.execute.chooseScene_title"),width:"490px"}),a.ude.rpc.execute.getSceneByProject(B,ha)}function A(){pa="",qa="";for(var b=document.getElementById("sceneMethodsTbody").innerHTML,c=b.split("select2-chosen"),d=1;d<c.length;d++){var e="",f=c[d].substring(0,1);e='"'==f?c[d].substring(2,c[d].length):c[d].substring(1,c[d].length);var g=e.indexOf("</span>");if(g==-1&&(g=e.indexOf("</SPAN>")),e=e.substring(0,g),""!=e){for(var h=0;h<ua.length;h++)ua[h].name===e&&(pa+=ua[h].id+",");qa+=e+","}}""!=qa&&(qa=qa.substring(0,qa.length-1)),""!=pa&&(pa=pa.substring(0,pa.length-1)),a("#sceneStr").val(qa),a.ude.dialog.close()}function B(a){var b=a.getDataStore("testCase"),c=b.parameters.data;C(c)}function C(b){if(ua=b,""!=pa){for(var c=pa.split(","),d=0;d<c.length;d++)for(var e=0;e<ua.length;e++)if(c[d]==ua[e].id){r(),a("#sceneMethodsTbody").append("<tr class='tr' align='center'><td class='td'><input type='checkbox' name='' value='methodSeclect'/></td><td class='td'><input style='width:340px;'  type='text' ></input></td></tr>");var f=a("#sceneMethodsTbody").find("td:last-child").find("input").last();f.udeSelect().setData(ua),f.udeSelect().setValue(ua[e].id)}}else a("#addMethodToSceneBtn").click()}function D(){var b=a("input[name='operate']:checked").val(),c=a.trim(a("#url").val()),d=a("input[name='browserType']:checked").val(),e=a.trim(a("#sceneStr").val());return c&&""!==c?d&&""!==d?!!("sceneTest"!==b||e&&""!==e)||(showMessage(a.i18n.prop("ude.page.execute.checkAvailability_sceneStr")+"\uff01",null,"error"),!1):(showMessage(a.i18n.prop("ude.page.execute.checkAvailability_browserType")+"\uff01",null,"error"),!1):(showMessage(a.i18n.prop("ude.page.execute.checkAvailability_url")+"\uff01",null,"error"),a("#url").focus(),!1)}function E(){var b=a("input[name='operate']:checked").val(),c=a.trim(a("#sceneStr").val());return!!("sceneTest"!==b||c&&""!==c)||(showMessage(a.i18n.prop("ude.page.execute.checkAvailability_sceneStr")+"\uff01",null,"error"),!1)}function F(){ma.url=a.trim(a("#url").val()),ma.browserType=a("input[name='browserType']:checked").val(),ma.sceneId=G(),ma.testKind="1",ma.projId=ha,ma.assignIpAddr=sa,ma.moreConfig=da,oa.setRowSetName(ka),oa.getRowSet().addRow(ma),na.addDataStore(oa)}function G(){for(var b=a.trim(a("#sceneStr").val()),c=b.split(","),d=pa.split(","),e=qa.split(","),f="",g=!0,h=0;h<c.length;h++){var i=e.indexOf(c[h]);i!=-1&&(g?(f+=d[i],g=!1):f=f+","+d[i])}return f}function H(b){if(b){var c=b.getParameter("checkMessage");""!=c?(c=c.replace(new RegExp(";;","gm"),"<br/>"),a.ude.util.confirm(a.i18n.prop("ude.page.execute.isContinue")+"<br/>"+c,I)):I()}}function I(){a("#execIng").click();var b,c;clearInterval(ba),ba=setInterval(function(){"nav-item active"===a("#execute").attr("class")?(ga=!0,a.ude.rpc.execute.ifExistReport(ha,ia),a.ude.rpc.execute.initExecResult(e,ha,ia)):(ga&&(a.ude.rpc.execute.initExecResult(e,ha,ia),ga=!1),clearInterval(ba))},1e4),la="1";var d=a("input[name='operate']:checked").val();if("sceneTest"===d){var f="",g=function(b){var c=b.getParameter("executeTime");a.ude.rpc.execute.createDataExcel(h,na,ia,c)},h=function(b){var c=b.getParameter("executeTime");a.ude.rpc.execute.execScene(na,ia,f,"0",c)};b=function(b){var d=b.getDataStore("singleResultList");f=d.getRowSet().getRow(0).data.startTime,a.ude.rpc.execute.getSingleResult(c,ha,f)},c=function(b){if(b){var c=b.getDataStore("record"),d=new Array;d.push("<div class='progress progress-striped'>"),d.push("<div  id='progress1' class='bar' role='progressbar'  aria-valuenow='60' aria-valuemin='0' aria-valuemax='100' style='width:0%'>"),d.push("</div>"),d.push("</div>"),c.getRowSet().getRow(0).setItemValue("progress",d.join("")),a("#execResultTable").udeTable().fnAddRowToFirst(c.getRowSet().getRow(0).data),a.ude.rpc.execute.createXML(g,na,ia,"execute")}},a.ude.rpc.execute.saveExecConfig(b,na)}}function J(){D()&&(F(),a.ude.rpc.execute.checkDataIntegrity(H,na))}function K(b){if(!b)return void showMessage(a.i18n.prop("ude.page.execute.redrawExecResultSuccess"),null,"error");if(1===b.getCode())return void showMessage(b.getDetail(),null,"");var c=b.getDataStore("execResultStore");ja.setExecResultStore(c);for(var d=c.getRowSet().getData(),f=d.length,g=0;g<f;g++)"1"===d[g].status&&(ra="1"),d[g].progress=d[g].progress.replace(/\&lt;/g,"<").replace(/\&gt;/g,">");"0"===ra?clearInterval(ba):(clearInterval(ba),ba=setInterval(function(){"nav-item active"===a("#execute").attr("class")&&""==a("#execIngDiv").attr("style")?(a.ude.rpc.execute.ifExistReport(ha,ia),a.ude.rpc.execute.initExecResult(e,ha,ia)):clearInterval(ba)},1e4)),L(d)}function L(b){for(var c=0;c<b.length;c++)b[c].progress=b[c].progress.replace(/\&lt;/g,"<").replace(/\&gt;/g,">");a("#execResultTable").udeTable({data:b,columns:[{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_url"),mData:"url",sWidth:"20%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_browserType"),mData:"browserType",sWidth:"6%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_sceneName"),mData:"sceneName",sWidth:"11%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_startTime"),mData:"startTime",sWidth:"11%",mRender:O},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_endTime"),mData:"endTime",sWidth:"11%",mRender:O},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_progress"),mData:"progress",sWidth:"9%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_totalMethod"),mData:"totalMethod",sWidth:"5%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_successMethod"),mData:"successMethod",sWidth:"5%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_failMethod"),mData:"failMethod",sWidth:"5%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_passRate")+"%",mData:"passRate",sWidth:"5%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_report"),mData:function(b){for(var c=new Array,d=b.endTime,e=!1,f=!1,g=b.moreConfig,h=g.split(";"),i=h.length,j=0;j<i;j++)"browserResourceMonitor"==h[j].split(":")[0]&&(e=h[j].split(":")[1]),"browserTimeMonitor"==h[j].split(":")[0]&&(f=h[j].split(":")[1]);return c.push("<div style='text-align:center;'>"),""!==d&&(c.push("<div title ="+a.i18n.prop("ude.page.execute.initExecResultGrid_lookOnLine")+" class='report-query' onclick='$.ude.page.execute.main.lookOnLine(event)'></div>"),c.push("&nbsp;"),"true"===e&&(c.push("<div title ="+a.i18n.prop("ude.page.execute.initExecResultGrid_resourceMonitor")+" class='report-memory' onclick='$.ude.page.execute.main.resourceMonitor(event)'></div>"),c.push("&nbsp;")),"true"===f&&c.push("<div title ="+a.i18n.prop("ude.page.execute.initExecResultGrid_timeMonitor")+" class='report-time' onclick='$.ude.page.execute.main.timeMonitor(event)'></div>")),c.push("</div>"),c.join("")},sWidth:"7%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_name"),mData:"name",sWidth:"6%"}],dblClick:function(){V()}})}function M(b,c){a("#paramTable").pagingTable({oLanguage:{sEmptyTable:a.i18n.prop("ude.utfpagingtableJs.paging_nodata"),sInfo:a.i18n.prop("ude.utfpagingtableJs.paging_info"),sInfoEmpty:"",sZeroRecords:a.i18n.prop("ude.utfpagingtableJs.paging_nodata"),oPaginate:{sFirst:a.i18n.prop("ude.utfpagingtableJs.paging_first"),sLast:a.i18n.prop("ude.utfpagingtableJs.paging_last"),sNext:a.i18n.prop("ude.utfpagingtableJs.paging_next"),sPrevious:a.i18n.prop("ude.utfpagingtableJs.paging_previous")}},server:b,serverParams:c,serverCallback:N,bSort:!1,columns:[{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_url"),mData:"url",sWidth:"20%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_browserType"),mData:"browserType",sWidth:"6%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_sceneName"),mData:"sceneName",sWidth:"11%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_startTime"),mData:"startTime",sWidth:"11%",mRender:O},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_endTime"),mData:"endTime",sWidth:"11%",mRender:O},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_progress"),mData:"progress",sWidth:"9%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_totalMethod"),mData:"totalMethod",sWidth:"5%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_successMethod"),mData:"successMethod",sWidth:"5%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_failMethod"),mData:"failMethod",sWidth:"5%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_passRate")+"%",mData:"passRate",sWidth:"5%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_report"),mData:function(b){for(var c=new Array,d=b.endTime,e=!1,f=!1,g=b.moreConfig,h=g.split(";"),i=h.length,j=0;j<i;j++)"browserResourceMonitor"==h[j].split(":")[0]&&(e=h[j].split(":")[1]),"browserTimeMonitor"==h[j].split(":")[0]&&(f=h[j].split(":")[1]);return c.push("<div style='text-align:center;'>"),""!==d&&(c.push("<div title ="+a.i18n.prop("ude.page.execute.initExecResultGrid_lookOnLine")+" class='report-query' onclick='$.ude.page.execute.main.lookOnLine(event)'></div>"),c.push("&nbsp;"),"true"===e&&(c.push("<div title ="+a.i18n.prop("ude.page.execute.initExecResultGrid_resourceMonitor")+" class='report-memory' onclick='$.ude.page.execute.main.resourceMonitor(event)'></div>"),c.push("&nbsp;")),"true"===f&&c.push("<div title ="+a.i18n.prop("ude.page.execute.initExecResultGrid_timeMonitor")+" class='report-time' onclick='$.ude.page.execute.main.timeMonitor(event)'></div>")),c.push("</div>"),c.join("")},sWidth:"7%"},{sTitle:a.i18n.prop("ude.page.execute.initExecResultGrid_name"),mData:"name",sWidth:"6%"}],dblClick:function(){V()}})}function N(b){if(!b)return void showMessage(a.i18n.prop("ude.page.execute.redrawExecResultSuccess"),null,"error");if(1===b.getCode())return void showMessage(b.getDetail(),null,"");var c=b.getDataStore("execResultStore");ja.setExecResultStore(c);var d=c.getRowSet().getData(),e=d.length;ra="0";for(var f=0;f<e;f++)"1"===d[f].status&&(ra="1"),d[f].progress=d[f].progress.replace(/\&lt;/g,"<").replace(/\&gt;/g,">");return d}function O(b){var c=a("<div style='text-align: left;'></div>");return c.text(a.ude.util.dateFormat(b,"yyyy-MM-dd hh:mm:ss")),a("<div>").append(c).html()}function P(){var b=null;a("#execIngDiv").is(":hidden")&&(b=a("#paramTable").udeTable().fnGetSelectedRowData()),a("#execResultDiv").is(":hidden")&&(b=a("#execResultTable").udeTable().fnGetSelectedRowData());var c=b.startTime,d="UTF\u6d4b\u8bd5\u62a5\u544a.html",e=function(a){var b=a.getParameter("lookPath");window.open("/utf"+b,"","width=1050,height=565,scrollbars=yes")};a.ude.rpc.execute.lookReportOnLine(e,d,c,ia)}function Q(){var b=null;a("#execIngDiv").is(":hidden")&&(b=a("#paramTable").udeTable().fnGetSelectedRowData()),a("#execResultDiv").is(":hidden")&&(b=a("#execResultTable").udeTable().fnGetSelectedRowData());var c=b.startTime,d="UTF-\u6d4f\u89c8\u5668\u5185\u5b58\u5360\u7528\u76d1\u63a7.html",e=function(a){var b=a.getParameter("lookPath");window.open("/utf"+b,"","width=1050,height=565,scrollbars=yes")};a.ude.rpc.execute.lookReportOnLine(e,d,c,ia)}function R(){var b=null;a("#execIngDiv").is(":hidden")&&(b=a("#paramTable").udeTable().fnGetSelectedRowData()),a("#execResultDiv").is(":hidden")&&(b=a("#execResultTable").udeTable().fnGetSelectedRowData());var c=b.startTime,d="UTF-\u6d4f\u89c8\u5668\u8017\u65f6\u7edf\u8ba1.html",e=function(a){var b=a.getParameter("lookPath");window.open("/utf"+b,"","width=1050,height=565,scrollbars=yes")};a.ude.rpc.execute.lookReportOnLine(e,d,c,ia)}function S(a,b){var c=a.pageX,d=a.pageY;T(c,d,b)}function T(b,c,d){a("#tipsClass").removeClass();var e='<div id="tipsClass">'+d+"</div>";null==document.getElementById("tipsClass")?a("body").append(e):(document.getElementById("tipsClass").innerHTML="",document.getElementById("tipsClass").innerHTML=d),a("#tipsClass").css({top:c+"px",left:b+"px",position:"absolute",padding:"3px 5px",background:"#8FBC8F","font-size":"12px",margin:"0 auto","text-align":"center","z-index":100,width:"auto",color:"#fff",opacity:"0.8"}).show()}function U(){a("#tipsClass").fadeOut()}function V(){var b=null;a("#execIngDiv").is(":hidden")&&(b=a("#paramTable").udeTable().fnGetSelectedRowData()),a("#execResultDiv").is(":hidden")&&(b=a("#execResultTable").udeTable().fnGetSelectedRowData()),a("#url").val(b.url);var c=b.browserType;a("input[name='browserType'][value='"+c+"']").attr("checked","checked");var d=b.sceneName;qa=d,a("#sceneStr").val(d);var e=b.sceneId;pa=e;var f;""===d||null===d?(f="pageTraver",a("#sceneStr").attr("disabled",!0),a("#chooseSceneBtn").attr("disabled",!0)):(f="sceneTest",a("#sceneStr").attr("disabled",!1),a("#chooseSceneBtn").attr("disabled",!1)),
a("input[name='operate'][value='"+f+"']").attr("checked","checked"),ea=!0}function W(){E()&&(F(),a.ude.rpc.execute.checkDataIntegrity(X,na))}function X(b){if(b){var c=b.getParameter("checkMessage");""!=c?(c=c.replace(new RegExp(";;","gm"),"<br/>"),a.ude.util.confirm(a.i18n.prop("ude.page.execute.isContinue")+"<br/>"+c,Y)):Y()}}function Y(b){var c,d=a("input[name='operate']:checked").val();if("sceneTest"===d){var e=function(b){var c=b.getParameter("executeTime");a.ude.rpc.execute.createDataExcel(f,na,ia,c)},f=function(b){var c=b.getParameter("executeTime");a.ude.rpc.execute.createAppAndExe(g,na,ia,c)},g=function(b){var d=b.getParameter("executeTime");a.ude.rpc.execute.packageDownload(c,ha,ia,d)};c=function(a){window.location.href="/utf"+a.getParameter("filePath")},a.ude.rpc.execute.createXML(e,na,ia,"downLoad")}}function Z(){var b=null;if(a("#execIngDiv").is(":hidden")&&(b=a("#paramTable").udeTable().fnGetSelectedRowData()),a("#execResultDiv").is(":hidden")&&(b=a("#execResultTable").udeTable().fnGetSelectedRowData()),!b)return void showMessage(a.i18n.prop("ude.page.execute.chooserecord")+"\uff01",null,"error");var c=b.startTime,d=function(a){var b=a.getParameter("downLoadPath");window.location.href="/utf"+b};a.ude.rpc.execute.downLoadReport(d,c,ia)}function $(){var b=null;return a("#execIngDiv").is(":hidden")&&(b=a("#paramTable").udeTable().fnGetSelectedRowData()),a("#execResultDiv").is(":hidden")&&(b=a("#execResultTable").udeTable().fnGetSelectedRowData()),b?void a.ude.util.confirm(a.i18n.prop("ude.page.execute.deleteRecord_confirm")+"\uff1f",_):void showMessage(a.i18n.prop("ude.page.execute.chooserecord")+"\uff01",null,"error")}function _(){var b=null;a("#execIngDiv").is(":hidden")&&(b=a("#paramTable").udeTable().fnGetSelectedRowData()),a("#execResultDiv").is(":hidden")&&(b=a("#execResultTable").udeTable().fnGetSelectedRowData());var c=b.id;a.ude.rpc.execute.deleteRecord(aa,c)}function aa(b){if(b&&"0"===b.getCode())""==a("#execIngDiv").attr("style")?a("#execResultTable").udeTable().fnDeleteRow():M(appPath+"/utf/execute/initParam.action",[]);else{var c=b.getDetail();showMessage(c,null,"error")}}a.ude.page.execute.main={init:b,lookOnLine:P,progressMouseMove:S,progressMouseOut:U,resourceMonitor:Q,timeMonitor:R};var ba,ca="",da="",ea=!0,fa=!0,ga=!0,ha="",ia="",ja=a.ude.page.execute.parameter,ka="com.neusoft.utf.portal.execute.entity.UtfTestExecutionT",la="0",ma={},na=new DataCenter,oa=new DataStore(ka),pa="",qa="",ra="0",sa="",ta={},ua=null}(jQuery),function(a){a.testcaseRpc={initResources:function(a,b,c){var d=new DataCenter;d.addParameter("parentCaseId",b),d.addParameter("pageType",c);var e={};e.url=appPath+"/utf/testcase/caseDesign/caseGrid/initUserPage.action",e.sync=!1,e.load=a,$.maf.action.requestData(e,d)},addUser:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseGrid/addUser.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},editUser:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseGrid/editUser.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},deleteUser:function(a,b){var c=new DataCenter;c.addParameter("id",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseGrid/deleteUser.action",d.load=b,$.maf.action.requestData(d,c)},testCaseRepeat:function(a,b){var c=new DataCenter;c.addParameter("id",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseGrid/testCaseRepeat.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},getIncludeFrame:function(a){var b=new DataCenter,c={};c.url=appPath+"/utf/testcase/caseDesign/caseGrid/getIncludeFrame.action",c.sync=!1,c.load=a,$.maf.action.requestData(c,b)},getAppiumSession:function(a){var b=new DataCenter,c={};c.url=appPath+"/utf/testcase/caseDesign/caseGrid/getAppiumSession.action",c.sync=!1,c.load=a,$.maf.action.requestData(c,b)},refreshImage:function(a,b){var c=new DataCenter;c.addParameter("appiumSessionId",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseGrid/refreshImage.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},installApp:function(a,b){var c=new DataCenter;c.addParameter("host",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseGrid/installApp.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},saveObject:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseGrid/saveObject.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},saveImage:function(a,b,c,d){var e=new DataCenter;e.addParameter("menuId",a),e.addParameter("appImageHidden",b),e.addParameter("appDomXmlHidden",c);var f={};f.url=appPath+"/utf/testcase/caseDesign/caseGrid/saveImage.action",f.sync=!1,f.load=d,$.maf.action.requestData(f,e)},getSavedImage:function(a,b){var c=new DataCenter;c.addParameter("menuId",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseGrid/getSavedImage.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},execScript:function(a,b,c,d,e,f){var g=new DataCenter;g.addParameter("appiumSessionId",a),g.addParameter("selector",b),g.addParameter("action",c),g.addParameter("waitTime",e),g.addParameter("scriptValue",d);var h={};h.url=appPath+"/utf/testcase/caseDesign/caseGrid/execScript.action",h.sync=!1,h.load=f,$.maf.action.requestData(h,g)}}}($.ude.rpc);