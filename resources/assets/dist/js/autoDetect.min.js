/* All right reserved by Neusoft Co. Ltd. 2016-10-14 10:10:18 */
!function(a){function b(){a("#auto-detect-main-contenter").collapse({query:"div span"}),a("#auto-detect-layout-container").jScrollPane({contentWidth:"0px"}),c(),g(),j(),d(),a.ude.page.config.projectStructure.main.getIfCheckFlag(!0),a.ude.page.config.projectStructure.main.init()}function c(){var b=a(document.body).width(),c=b-350-190,d=b-190,e=c-40;a(".project-center-container").css({width:c+"px"}),a("#analyse_sql").css({width:e+"px"}),a(".menu-left-container").css({width:d+"px"}),a(".auto-detect-content-menu input[type='text']").css({width:d-130+"px"}),a(".auto-detect-content-menu input[type='password']").css({width:d-130+"px"})}function d(){a.ude.rpc.autoDetect.getInitData(null,e)}function e(a){T=a,W=a,Z=a,U=a.getDataStore(V),X=a.getDataStore(Y),$=a.getDataStore(_),aa=a.getDataStore(ba),h(),f()}function f(){var b="%27"+window.location.protocol+"//"+window.location.host+"%27",c="%27"+a("#packaging_class").val()+"%27",d="javascript:(function(){var ip="+b+",fd="+c+",a=ip+%27/utf/utf/pages/debug/js/%27,d=document,h=d.getElementsByTagName(%27head%27)[0],t=%27text/javascript%27;var frms=d.getElementsByTagName(%27frameset%27);if(frms.length>0){var frm=frms[0];function g(f,pdd){var dd=pdd;if(f.tagName.toUpperCase()==%27FRAME%27){dd=f.contentWindow.document;var df=dd.getElementsByTagName(%27frameset%27);if(df.length==0){return [dd,f];}else{f=df[0];}}var r;var childArr=f.children||f.childNodes;if(f.rows!=%27%27&&f.rows != %27*%27){r=f.rows.split(%27,%27);}else{r=f.cols.split(%27,%27);}for(var i=0;i<r.length;i++){if(r[i].indexOf(%27*%27)!=-1){return g(childArr[i],dd);}}}d=g(frm,d)[0];}if(d.getElementById(%27debugbox%27)==undefined){c=function(){initFrame(d,ip,fd);var box=writeHtml();d.body.appendChild(box);top.getAll();top.startBoxDrag();}}if(typeof jQuery==%27undefined%27){var s0=d.createElement(%27script%27);s0.type=t;s0.src=a+%27jquery.min.js%27;h.appendChild(s0);}if(typeof wgxpath==%27undefined%27){var s1=d.createElement(%27script%27);s1.type=t;s1.src=a+%27wgxpath.install.js%27;h.appendChild(s1);}if(typeof mainFrameDoc==%27undefined%27){var s=d.createElement(%27script%27);s.type=t;s.src=a+%27utf.debug.js%27;s.onload=s.onreadystatechange=function(){if(!this.readyState||this.readyState==%27loaded%27||this.readyState==%27complete%27){c();c=function(){};}};h.appendChild(s);}else{c();c=function(){};}})();";a("#utfdebug").attr("href",d)}function g(){C()}function h(){U&&(a("#db_type").val(U.getRowSet().getRow(0).data.dbType),a("#host").val(U.getRowSet().getRow(0).data.host),a("#port").val(U.getRowSet().getRow(0).data.port),a("#service_name").val(U.getRowSet().getRow(0).data.serviceName),a("#user_name").val(U.getRowSet().getRow(0).data.userName),a("#pass_word").val(U.getRowSet().getRow(0).data.password),a("#analyse_sql").val(U.getRowSet().getRow(0).data.analyseSql)),X&&(a("#packaging_class").val(X.getRowSet().getRow(0).data.packagingClass),a("#url").val(X.getRowSet().getRow(0).data.url),a("#extent_authentication").val(X.getRowSet().getRow(0).data.extentAuthentication)),$&&(a("#traverse_menuhandlerclass").val($.getRowSet().getRow(0).data.menuHandlerClass),a("#traverse_elementfinderclass").val($.getRowSet().getRow(0).data.elementFinderClass),a("#traverse_pageInitWaitTime").val($.getRowSet().getRow(0).data.initWaittime)),aa&&(a("#target_xpath").val(aa.getRowSet().getRow(0).data.xpath),a("#exclude_xpath").val(aa.getRowSet().getRow(0).data.excludeXpath))}function j(){a("#lock").click(function(){C()}),a("#unlock").click(function(){D()}),a("#test_db_connect").click(function(){R()}),a("#save_db_connect").click(function(){P()}),a("#project_detect").click(function(){J()}),a("#test_project_menu").click(function(){I()}),a("#query_detect_result").click(function(){H()}),a("#close_result_dialog").click(function(){G()}),a("#check_class_method").click(function(){w()}),a("#test_url_conn").click(function(){y()}),a("#save_project_config").click(function(){A()}),a("#detect_page_elements").click(function(){u()}),a("#close_page_detect_dialog").click(function(){G()}),a("#pageDetect").click(function(){r()}),a("#query_pagedetect_result").click(function(){q()}),a("#query_pageredetect_result").click(function(){p()}),a("#close_pagedetect_result").click(function(){a.ude.dialog.close()}),a("#sql_way").click(function(){k()}),a("#traverse_way").click(function(){l()}),a("#save_project_traverse_config").click(function(){m()}),a("#check_traverse_class").click(function(){n()})}function k(){a(".project-detect-container").show(),a(".project-traverse-container").hide(),a("#span_for_orject").show(),a(".auto-detect-content-menu").show()}function l(){a(".project-detect-container").hide(),a(".project-traverse-container").show(),a(".auto-detect-content-menu").hide(),a("#span_for_orject").hide()}function m(){if(!o())return void alert("\u8bf7\u8f93\u5165MenuHandler\u548cElementFinder\u5b9e\u73b0\u7c7b\u7684\u7c7b\u540d\uff01");var b=a("#traverse_menuhandlerclass").val(),c=a("#traverse_elementfinderclass").val(),d=a("#traverse_pageInitWaitTime").val();d||(d=1);var e=1,f=1,g=1,h={};h.menuHandlerClass=b,h.elementFinderClass=c,h.initWaittime=d,h.updateProjectStructure=e,h.updatePageObject=f,h.triggerTargetObject=g;var i=new DataCenter,j=new DataStore(_);j.setRowSetName(_),j.getRowSet().addRow(h),i.addDataStore(j),Z=i;var k=a("#target_xpath").val(),l=a("#exclude_xpath").val();if(k){var m={};m.xpath=k,m.excludeXpath=l;var n=new DataStore(ba);n.setRowSetName(ba),n.getRowSet().addRow(m),i.addDataStore(n)}a.ude.rpc.autoDetect.saveTraverseConfig(Z,function(a){var b=a.getParameter("result");b?alert("\u4fdd\u5b58\u6210\u529f"):alert("\u4fdd\u5b58\u5931\u8d25")})}function n(){if(!o())return void alert("\u8bf7\u8f93\u5165MenuHandler\u548cElementFinder\u5b9e\u73b0\u7c7b\u7684\u7c7b\u540d\uff01");var b=a("#traverse_menuhandlerclass").val(),c=a("#traverse_elementfinderclass").val(),d=new DataCenter;d.addParameter("menuHandlerClass",b),d.addParameter("elementFinderClass",c),a.ude.rpc.autoDetect.checkTraverseConfig(d,function(a){var b=a.getParameter("result");b?alert("\u6240\u914d\u7f6e\u7684\u7c7b\u5408\u6cd5"):alert("\u6240\u914d\u7f6e\u4e0d\u5408\u6cd5\uff0c\u8bf7\u68c0\u67e5")})}function o(){var b=a("#traverse_menuhandlerclass").val(),c=a("#traverse_elementfinderclass").val();return!(!b||!c)}function p(){a.ude.dialog.close();var b="/utf/config/pageredetect/menu/initPage.action",c=a("#Statistic");da.clickMenu(c);var d=function(){a(".menuItem-selected").removeClass("menuItem-selected"),a("#pageredetect").addClass("menuItem-selected"),a.ude.util.loadPage(null,appPath+b,a("#m-content")[0])};setTimeout(d,1e3)}function q(){var b="/utf/config/pageobject/initPage.action",c=a("#pageobject");a(".menuItem-selected").removeClass("menuItem-selected"),c.addClass("menuItem-selected"),a.ude.dialog.close(),a.ude.util.loadPage(null,appPath+b,a("#m-content")[0])}function r(){var b=a.ude.page.config.projectStructure.main.treeCheckNodeAttribution(),c=a("#url").val(),d=a("#extent_authentication").val();a.ude.rpc.autoDetect.detectPageElements(b,c,d,s)}function s(b){var c=b.getParameter("flag");b.getParameter("checkLog");if(ca=b.getParameter("log"),c===!0){var d=a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.detectPagesComplete_total")+ca.length+a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.detectPagesComplete_info")+"\uff1a\r";for(i=0;i<ca.length;i++){var e=ca[i],f=e.length;d=d+e.substr(0,f-1)+"\r"}a("#pageDetectResult").val(d),a.ude.dialog.close(),a("#query_pageredetect_result").attr("disabled",!0),a.ude.dialog.open("page_detect_result_dialog",{title:a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.detectPagesComplete_title"),width:"425px"})}else a.ude.util.confirm(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.detectPagesComplete_confirm")+"\uff1f",t)}function t(){a("#page_detect_result_dialog").prop("redetect",!0);var b=a.ude.page.config.projectStructure.main.treeCheckNodeAttribution(),c=a("#url").val(),d=a("#extent_authentication").val(),e=function(b){var c=b.getParameter("desc"),d=b.getParameter("new"),e=b.getParameter("all"),f=c+"\r";d.length>0&&(f=f+d+"\r"),e.length>0&&(f=f+e+"\r"),a("#pageDetectResult").val(f),a.ude.dialog.close(),a("#query_pageredetect_result").attr("disabled",!1),a.ude.dialog.open("page_detect_result_dialog",{title:a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.pageReDetectConfirm_title"),width:"425px"})};a.ude.rpc.autoDetect.pageReDetect(b,c,d,e)}function u(){a("#notMenuId").trigger("click"),a("#menuId").trigger("click"),a.ude.dialog.open("menuChooseDialog",{title:a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.detectPageElements_title"),width:"425px"})}function v(){var b=a("#packaging_class").val(),c=a("#url").val(),d=a("#extent_authentication").val(),e={};if(e.extentAuthentication=d,e.url=c,e.packagingClass=b,null===W.getDataStore(Y)||"undefined"==typeof W.getDataStore(Y)){var f=new DataStore(Y);f.setRowSetName(Y),f.getRowSet().addRow(e),W.addDataStore(f)}else{var g=W.getDataStore(Y).getRowSet().getRow(0);g.setItemValue("packagingClass",b),g.setItemValue("url",c),g.setItemValue("extentAuthentication",d)}}function w(){var b=F();if(b){if(null==W.getDataStore(Y))v();else{var c=a("#packaging_class").val(),d=a("#url").val(),e=a("#extent_authentication").val(),f=W.getDataStore(Y).getRowSet().getRow(0);f.setItemValue("packagingClass",c),f.setItemValue("url",d),f.setItemValue("extentAuthentication",e)}a.ude.rpc.autoDetect.checkClassMethod(W,x)}}function x(b){if(!b)return void showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkClassMethodComplete_fail"),null,"error");if("0"===b.getCode()){W=b;var c=b.getParameter("flag"),d=b.getParameter("elementFinderFlag"),e=b.getParameter("elementExtractFlag"),f=b.getParameter("elementOperationDefineFlag");c===!0?showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkClassMethodComplete_success"),null,"info"):(d===!1&&showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkClassMethodComplete_elementFinderFlag"),null,"error"),e===!1&&showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkClassMethodComplete_elementExtractFlag"),null,"error"),f===!1&&showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkClassMethodComplete_elementOperationDefineFlag"),null,"error"))}else W=b,showMessage(b.getDetail(),null,"error")}function y(){var b=F();if(b){if(null===W.getDataStore(Y))v();else{var c=a("#packaging_class").val(),d=a("#url").val(),e=a("#extent_authentication").val(),f=W.getDataStore(Y).getRowSet().getRow(0);f.setItemValue("packagingClass",c),f.setItemValue("url",d),f.setItemValue("extentAuthentication",e)}a.ude.rpc.autoDetect.testUrlConn(W,z)}}function z(b){if(!b)return void showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.testUrlConnComplete_fail"),null,"error");if("0"===b.getCode()){W=b;var c=b.getParameter("flag");c===!0?showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.testUrlConnComplete_success"),null,"info"):showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.testUrlConnComplete_fail"),null,"error")}else W=b,showMessage(b.getDetail(),null,"error")}function A(){v(),a.ude.rpc.autoDetect.saveProjectConfig(W,B)}function B(b){showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.saveProjectConfigComplete"),null,"info"),W=b,f()}function C(){a("#sql_way").attr("disabled",!0),a("#db_type").attr("disabled",!0),a("#host").attr("disabled",!0),a("#port").attr("disabled",!0),a("#service_name").attr("disabled",!0),a("#user_name").attr("disabled",!0),a("#pass_word").attr("disabled",!0),a("#analyse_sql").attr("disabled",!0),a("#test_db_connect").attr("disabled",!0),a("#save_db_connect").attr("disabled",!0),a("#project_detect").attr("disabled",!0),a("#packaging_class").attr("disabled",!0),a("#url").attr("disabled",!0),a("#extent_authentication").attr("disabled",!0),a("#check_class_method").attr("disabled",!0),a("#test_url_conn").attr("disabled",!0),a("#save_project_config").attr("disabled",!0),a("#detect_page_elements").attr("disabled",!0),a("#traverse_way").attr("disabled",!0),a("#traverse_menuhandlerclass").attr("disabled",!0),a("#traverse_elementfinderclass").attr("disabled",!0),a("#traverse_pageInitWaitTime").attr("disabled",!0),a("#target_xpath").attr("disabled",!0),a("#exclude_xpath").attr("disabled",!0),a("#save_project_traverse_config").attr("disabled",!0),a("#check_traverse_class").attr("disabled",!0),a("#lock").hide(),a("#unlock").show()}function D(){a("#sql_way").attr("disabled",!1),a("#db_type").attr("disabled",!1),a("#host").attr("disabled",!1),a("#port").attr("disabled",!1),a("#service_name").attr("disabled",!1),a("#user_name").attr("disabled",!1),a("#pass_word").attr("disabled",!1),a("#analyse_sql").attr("disabled",!1),a("#test_db_connect").attr("disabled",!1),a("#save_db_connect").attr("disabled",!1),a("#project_detect").attr("disabled",!1),a("#save_project_config").attr("disabled",!1),a("#packaging_class").attr("disabled",!1),a("#url").attr("disabled",!1),a("#extent_authentication").attr("disabled",!1),a("#check_class_method").attr("disabled",!1),a("#test_url_conn").attr("disabled",!1),a("#detect_page_elements").attr("disabled",!1),a("#traverse_way").attr("disabled",!1),a("#traverse_menuhandlerclass").attr("disabled",!1),a("#traverse_elementfinderclass").attr("disabled",!1),a("#traverse_pageInitWaitTime").attr("disabled",!1),a("#target_xpath").attr("disabled",!1),a("#exclude_xpath").attr("disabled",!1),a("#save_project_traverse_config").attr("disabled",!1),a("#check_traverse_class").attr("disabled",!1),a("#lock").show(),a("#unlock").hide()}function E(){var b=a("#db_type").val(),c=a.trim(a("#host").val()),d=a.trim(a("#port").val()),e=a.trim(a("#service_name").val()),f=a.trim(a("#user_name").val()),g=a.trim(a("#pass_word").val()),h=a.trim(a("#analyse_sql").val());return b&&""!==b?c&&""!==c?d&&""!==d?e&&""!==e?f&&""!==f?g&&""!==g?h&&""!==h?h.indexOf("menu_id")>=0&&h.indexOf("menu_name")>=0&&h.indexOf("parent_menu_id")>=0&&h.indexOf("url")>=0||(showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkAvailability_analyseSqlinfo")+"\uff01",null,"error"),a("#analyse_sql").focus(),!1):(showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkAvailability_analyseSql")+"\uff01",null,"error"),a("#analyse_sql").focus(),!1):(showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkAvailability_password")+"\uff01",null,"error"),a("#pass_word").focus(),!1):(showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkAvailability_userName")+"\uff01",null,"error"),a("#user_name").focus(),!1):(showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkAvailability_serviceName")+"\uff01",null,"error"),a("#service_name").focus(),!1):(showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkAvailability_port")+"\uff01",null,"error"),a("#port").focus(),!1):(showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkAvailability_host")+"\uff01",null,"error"),a("#host").focus(),!1):(showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkAvailability_db_type")+"\uff01",null,"error"),a("#db_type").focus(),!1)}function F(){var b=a.trim(a("#packaging_class").val()),c=a.trim(a("#url").val()),d=a.trim(a("#extent_authentication").val());return b&&""!==b?c&&""!==c?!(!d||""===d)||(showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkOtherAvailability_extentAuthentication")+"\uff01",null,"error"),a("#extent_authentication").focus(),!1):(showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkOtherAvailability_url")+"\uff01",null,"error"),a("#url").focus(),!1):(showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkOtherAvailability_packagingClass")+"\uff01",null,"error"),a("#packaging_class").focus(),!1)}function G(){a.ude.dialog.close()}function H(){if(a("#project_detect_result_dialog").prop("redetect")){a.ude.dialog.close();var b="/utf/config/projectredetect/menu/initPage.action",c=a("#Statistic");da.clickMenu(c);var d=function(){a(".menuItem-selected").removeClass("menuItem-selected"),a("#projectredetect").addClass("menuItem-selected"),a.ude.util.loadPage(null,appPath+b,a("#m-content")[0])};setTimeout(d,1e3)}else{var b="/utf/config/projectstructure/menu/projectstructure.action",e=a("#projectstructure");a(".menuItem-selected").removeClass("menuItem-selected"),e.addClass("menuItem-selected"),a.ude.dialog.close(),a.ude.util.loadPage(null,appPath+b,a("#m-content")[0])}}function I(){var b=null,c=a("#packaging_class").val();if("checked"===a("#isPageDetectAndObject").attr("checked")){if(b=!0,""===c||null===c)return void showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.testProjectMenu_showMessage")+"\uff01",null,"error")}else b=!1;var d="/utf/execute/menu/sceneExec.action",e=a("#sceneexecute");a(".menuItem-selected").removeClass("menuItem-selected"),e.addClass("menuItem-selected"),a.ude.dialog.close(),a.ude.util.loadPage(b,appPath+d+"?pageDetectFlag="+b,a("#m-content")[0])}function J(){var b=a("#db_type").val(),c=a.trim(a("#host").val()),d=a.trim(a("#port").val()),e=a.trim(a("#service_name").val()),f=a.trim(a("#user_name").val()),g=a.trim(a("#pass_word").val()),h=a.trim(a("#analyse_sql").val()),i={};if(i.dbType=b,i.host=c,i.port=d,i.serviceName=e,i.userName=f,i.password=g,i.analyseSql=h,"undefined"==typeof T.getDataStore(V)||null===T.getDataStore(V)){var j=new DataCenter;ds=new DataStore(V),ds.setRowSetName(V),ds.getRowSet().addRow(i),j.addDataStore(ds),T=j}else{var k=T.getDataStore(V).getRowSet().getRow(0);k.setItemValue("dbType",b),k.setItemValue("host",c),k.setItemValue("port",d),k.setItemValue("serviceName",e),k.setItemValue("userName",f),k.setItemValue("password",g),k.setItemValue("analyseSql",h)}a.ude.rpc.autoDetect.getProjectAnalyseFlag(T,L)}function K(){a.ude.rpc.autoDetect.projectDetect(T,N)}function L(b){var c=b.getParameter("flag");c===!0?a.ude.util.confirm(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.beginProjectDetect")+"\uff1f",K):a.ude.util.confirm(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.getProjectAnalyseFlagComplete")+"\uff1f",M)}function M(){var b=function(b){if(!b)return void showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.projectReDetect_showMessage"),null,"error");if("0"===b.getCode()){var c=b.getParameter("reDetectResult");a("#projectDetectResult").val(c),a("#projectDetectResult").attr("disabled",!0),a("#test_project_menu").attr("disabled",!0),a("#isPageDetectAndObject").attr("disabled",!0),a("#project_detect_result_dialog").prop("redetect",!0),a.ude.dialog.open("project_detect_result_dialog",{title:a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.projectReDetect_title"),width:"425px"})}else showMessage(b.getDetail(),null,"error")};a.ude.rpc.autoDetect.projectReDetect(T,b)}function N(b){if(!b)return void showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.projectDetectComplete_showMessage"),null,"error");if("0"==b.getCode()){a.ude.rpc.autoDetect.projectMenuCount(O);var c=b.getParameter("structCount"),d=b.getParameter("pageCount"),e=c-d,f=a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.projectDetectComplete_messagebefore")+c+a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.projectDetectComplete_messagelist")+e+a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.projectDetectComplete_messagepage")+d+a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.projectDetectComplete_messageafter");a("#projectDetectResult").val(f),a("#projectDetectResult").attr("disabled",!0),a("#project_detect_result_dialog").prop("redetect",!1),a.ude.dialog.open("project_detect_result_dialog",{title:a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.projectDetectComplete_title"),width:"425px"})}else showMessage(b.getDetail(),null,"error")}function O(){}function P(){var b=a("#db_type").val(),c=a.trim(a("#host").val()),d=a.trim(a("#port").val()),e=a.trim(a("#service_name").val()),f=a.trim(a("#user_name").val()),g=a.trim(a("#pass_word").val()),h=a.trim(a("#analyse_sql").val()),i={};if(i.dbType=b,i.host=c,i.port=d,i.serviceName=e,i.userName=f,i.password=g,i.analyseSql=h,"undefined"==typeof T.getDataStore(V)||null===T.getDataStore(V)){var j=new DataCenter;ds=new DataStore(V),ds.setRowSetName(V),ds.getRowSet().addRow(i),j.addDataStore(ds),T=j}else{var k=T.getDataStore(V).getRowSet().getRow(0);k.setItemValue("dbType",b),k.setItemValue("host",c),k.setItemValue("port",d),k.setItemValue("serviceName",e),k.setItemValue("userName",f),k.setItemValue("password",g),k.setItemValue("analyseSql",h)}a.ude.rpc.autoDetect.saveDbConnect(T,Q)}function Q(b){return b?void("0"===b.getCode()?(showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.saveDbConnectComplete_success"),null,"info"),T=b):showMessage(b.getDetail(),null,"error")):void showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.saveDbConnectComplete_fail"),null,"error")}function R(){var b=E();if(b){var c=a("#db_type").val(),d=a.trim(a("#host").val()),e=a.trim(a("#port").val()),f=a.trim(a("#service_name").val()),g=a.trim(a("#user_name").val()),h=a.trim(a("#pass_word").val()),i=a.trim(a("#analyse_sql").val()),j={};if(j.dbType=c,j.host=d,j.port=e,j.serviceName=f,j.userName=g,j.password=h,j.analyseSql=i,"undefined"==typeof T.getDataStore(V)||null===T.getDataStore(V)){var k=new DataCenter;ds=new DataStore(V),ds.setRowSetName(V),ds.getRowSet().addRow(j),k.addDataStore(ds),T=k}else{var l=T.getDataStore(V).getRowSet().getRow(0);l.setItemValue("dbType",c),l.setItemValue("host",d),l.setItemValue("port",e),l.setItemValue("serviceName",f),l.setItemValue("userName",g),l.setItemValue("password",h),l.setItemValue("analyseSql",i)}a.ude.rpc.autoDetect.checkDataSourceConnection(T,S)}}function S(b){return b?void("0"===b.getCode()?showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkConnectionComplete_success"),null,"info"):showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkConnectionComplete_fail"),null,"error")):void showMessage(a.i18n.prop("ude.page.config.autoDetect.autoDetectJs.checkConnectionComplete_fail"),null,"error")}var T=new DataCenter,U=new DataStore,V="com.neusoft.utf.portal.config.autodetect.entity.UtfProjectAnalyseConfig",W=new DataCenter,X=new DataStore,Y="com.neusoft.utf.portal.config.autodetect.entity.UtfProjectFoundation",Z=new DataCenter,$=new DataStore,_="com.neusoft.utf.portal.config.autodetect.entity.UtfProjectTraverseConfigT",aa=new DataStore,ba="com.neusoft.utf.portal.config.autodetect.entity.UtfProjectTraverseTargetT",ca=new Array,da=a.ude.page.main;a.ude.page.config.autoDetect.main={init:b}}(jQuery),function(a){a.autoDetect={getInitData:function(a,b){var c={};c.url=appPath+"/utf/config/autoDetect/getInitData.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},checkDataSourceConnection:function(a,b){var c={};c.url=appPath+"/utf/config/autoDetect/checkDataSourceConnection.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},saveDbConnect:function(a,b){var c={};c.url=appPath+"/utf/config/autoDetect/saveDbConnect.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},saveProjectConfig:function(a,b){var c={};c.url=appPath+"/utf/config/autoDetect/saveProjectConfig.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},getProjectAnalyseFlag:function(a,b){var c={};c.url=appPath+"/utf/config/autoDetect/getProjectAnalyseFlag.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},projectDetect:function(a,b){var c={};c.url=appPath+"/utf/config/autoDetect/projectDetect.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},projectReDetect:function(a,b){var c={};c.url=appPath+"/utf/config/autoDetect/projectReDetect.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},testUrlConn:function(a,b){var c={};c.url=appPath+"/utf/config/autoDetect/testUrlConn.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},checkClassMethod:function(a,b){var c={};c.url=appPath+"/utf/config/autoDetect/checkClassMethod.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},getProjectStruct:function(a,b){var c={};c.url=appPath+"/utf/config/autoDetect/getProjectStruct.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},detectPageElements:function(a,b,c,d){var e={};a.addParameter("url",b),a.addParameter("authentication",c),e.url=appPath+"/utf/config/autoDetect/detectPageElements.action",e.sync=!1,e.load=d,$.maf.action.requestData(e,a)},pageReDetect:function(a,b,c,d){var e={};a.addParameter("url",b),a.addParameter("authentication",c),e.url=appPath+"/utf/config/autoDetect/pageReDetect.action",e.sync=!1,e.load=d,$.maf.action.requestData(e,a)},getPageAnalyseFlag:function(a,b){var c={};c.url=appPath+"/utf/config/autoDetect/getPageAnalyseFlag.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},projectMenuCount:function(a){var b={};b.url=appPath+"/utf/config/autoDetect/projectMenuCount.action",b.sync=!1,b.load=a,$.maf.action.requestData(b)},saveTraverseConfig:function(a,b){var c={};c.url=appPath+"/utf/config/autoDetect/saveTraverseConfig.action",c.sync=!0,c.load=b,$.maf.action.requestData(c,a)},checkTraverseConfig:function(a,b){var c={};c.url=appPath+"/utf/config/autoDetect/checkTraverseConfig.action",c.sync=!0,c.load=b,$.maf.action.requestData(c,a)}}}($.ude.rpc),function(a){function b(){a("#addMenuTreeBtn").click(H),a("#delMenuTreeBtn").click(J),a("#editMenuTreeBtn").click(L),a("#notMenuId").click(u),a("#menuId").click(v),a("#menuTreeSearchButton").click(i),a("#notMenuTreeSearchButton").click(j),a("#menuTreeSearch").click(g),a("#notMenuTreeSearch").click(h),a("#menuTreeSearch").bind("keyup",function(b){13===b.keyCode&&(a("#menuTreeSearchButton").click(),a("#menuTreeSearch").focus())}),a("#notMenuTreeSearch").bind("keyup",function(b){13===b.keyCode&&(a("#notMenuTreeSearchButton").click(),a("#notMenuTreeSearch").focus())}),B(),A(),T="menu",Y=null,Z=null,$=null,R="",a(".common-buttons-item").unbind("setDisableT"),a(".common-buttons-item").unbind("setDisableF"),a(".common-buttons-item").bind("setDisableT",function(b){var c=b.currentTarget.className;b.currentTarget.className=c.indexOf("-unavailable")<0?c+"-unavailable":c,a(b.currentTarget).attr("disabled","disabled")}),a(".common-buttons-item").bind("setDisableF",function(b){var c=b.currentTarget.className;b.currentTarget.className=c.replace("-unavailable",""),a(b.currentTarget).removeAttr("disabled")}),a("#addMenuTreeBtn").trigger("setDisableT"),a("#delMenuTreeBtn").trigger("setDisableT"),a("#editMenuTreeBtn").attr("disabled",!0)}function c(b){aa=b,"auto"===aa?(a("#menuTreeDiv").css({height:"250px"}),a("#notMenuTreeDiv").css({height:"250px"}),a("#notMenuTreeSearch").css({width:"86%"})):"case"===aa?(a("#menuTreeDiv").css({height:"86%"}),a("#notMenuTreeDiv").css({height:"86%"}),a("#notMenuTreeSearch").css({width:"78%"})):"page"===aa&&(a("#menuTreeDiv").css({height:"95%"}),a("#notMenuTreeDiv").css({height:"95%"}),a("#notMenuTreeSearch").css({width:"78%"})),a("#menuTreeSearch").css("width",a("#menuTreeSearch").parent().width()-40),a("#notMenuTreeSearch").css("width",a("#notMenuTreeSearch").parent().width()-40)}function d(a){_=a}function e(b){a.ude.rpc.projectStructure.getTreeNodeDataByMenuId(f,b),fa=b}function f(b){if(b&&b.getDataStore("UtfProjectAnalyseResult")){var c=b.getDataStore("UtfProjectAnalyseResult");if(c.getRowSet().getRowCount()>0){var d=c.getRowSet().getRow(0).data;T="1"===d.ismenu?"menu":"notMenu"}}"menu"===T?a("#menuId").click():a("#notMenuId").click()}function g(){ba=0,a("#menuTree").udeTree().searchTreeNodeByNameCss(R,!1),a("#menuTreeSearch").focus(),a("#menuTreeSearch").val("")}function h(){ba=0,a("#notMenuTree").udeTree().searchTreeNodeByNameCss(R,!1),a("#notMenuTreeSearch").focus(),a("#notMenuTreeSearch").val("")}function i(){R=a.trim(a("#menuTreeSearch").val()),""===R||null===R?showMessage(a.i18n.prop("ude.page.config.projectStructure.projectStructureJs.searchMenuTreeNode_showMessage")+"\uff01",null,"info"):(a("#menuTree").udeTree().expandAll(),a("#menuTree").udeTree().searchTreeNodeByNameCss(R,!0),a("#menuTree").udeTree().searchTreeNodeByName(R,!0,ba),ba++)}function j(){R=a.trim(a("#notMenuTreeSearch").val()),""===R||null===R?showMessage(a.i18n.prop("ude.page.config.projectStructure.projectStructureJs.searchNotMenuTreeNode_showMessage")+"\uff01",null,"info"):(a("#notMenuTree").udeTree().expandAll(),a("#notMenuTree").udeTree().searchTreeNodeByNameCss(R,!0),a("#notMenuTree").udeTree().searchTreeNodeByName(R,!0,ba),ba++)}function k(b){"editFlag"==a("#editFlag").html()?a("#menuTree").udeTree({data:b,key:{idKey:"menuId",parentIdKey:"parentMenuId"},edit:{enable:!0,showRemoveBtn:!1,showRenameBtn:!1},callback:{onClick:E,onCheck:p,beforeDrag:l,beforeDrop:o},check:_}):a("#menuTree").udeTree({data:b,key:{idKey:"menuId",parentIdKey:"parentMenuId"},callback:{onClick:E,onCheck:p},check:_}),a("#menuTree").udeTree().selectNode("-1"),fa&&(a("#menuTree").udeTree().selectNode(fa),S=a("#menuTree").udeTree().getSelectedNode(),E(S.tId,S),fa=null)}function l(a,b){for(var c=0,d=b.length;c<d;c++)if(b[c].drag===!1)return!1;return!0}function m(){"notMenu"==T&&u(),"menu"==T&&v()}function n(b,c,d){if("inner"==d&&"-1"!=c.menuId){var e=function(){fa=null;var d={};d.id=b[0].id,d.menuId=b[0].menuId,d.parentMenuId=c.menuId;b[0].pageType;if(d.leaf="1",d.menuName=b[0].menuName,d.nodeUrl=b[0].nodeUrl,d.pageType=b[0].pageType,d.isEnabled=b[0].isEnabled,d.analyseKind=b[0].analyseKind,d.description=b[0].description,"menu"===T)d.ismenu="1";else{d.ismenu="2";a("#notMenuTree").udeTree().getSelectedNode()}var e="com.neusoft.utf.portal.config.projectstructure.entity.UtfProjectAnalyseResult",f=new DataCenter,g=new DataStore(e);g.setRowSetName(e),g.getRowSet().addRow(d),f.addDataStore(g),pageDC=f,a.ude.rpc.projectStructure.saveMenuTreeData(M,f)};a.ude.util.confirm(a.i18n.prop("ude.page.config.pageReDetect.pageReDetectJs.moveMenuTree_confirm")+"\uff1f",e,m)}else m()}function o(a,b,c,d){for(var e=0,f=b.length;e<f;e++)switch(b[e].parentTId){case"menuTree_1":m();break;case"menuTree":m();break;case"":m();break;case"menuTree_1":m();break;case"notMenuTree_1":m();break;case"notMenuTree":m();break;default:fa=b[0].menuId,n(b,c,d)}}function p(){$&&$()}function q(b){"editFlag"==a("#editFlag").html()?a("#notMenuTree").udeTree({data:b,key:{idKey:"menuId",parentIdKey:"parentMenuId"},edit:{enable:!0,showRemoveBtn:!1,showRenameBtn:!1},callback:{onClick:F,onCheck:r,beforeDrag:l,beforeDrop:o},check:_}):a("#notMenuTree").udeTree({data:b,key:{idKey:"menuId",parentIdKey:"parentMenuId"},callback:{onClick:F,onCheck:r},check:_}),a("#notMenuTree").udeTree().selectNode("-1"),fa&&(ca=!0,a("#notMenuId").click(),a("#notMenuTree").udeTree().selectNode(fa),S=a("#notMenuTree").udeTree().getSelectedNode(),F(S.tId,S),fa=null)}function r(){$&&$()}function s(a){Y=a}function t(a){$=a}function u(){ca||(a("#notMenuTree").udeTree().destroy(),a("#menuTree").udeTree().destroy(),B()),T="notMenu",R="",a("#menuTreeSearch").val(""),a("#notMenuTreeSearch").val(""),Z&&Z(),ca=!1}function v(){a("#notMenuTree").udeTree().destroy(),a("#menuTree").udeTree().destroy(),A(),T="menu",R="",a("#menuTreeSearch").val(""),a("#notMenuTreeSearch").val(""),Z&&Z()}function w(){return S="menu"===T?a("#menuTree").udeTree().getSelectedNode():a("#notMenuTree").udeTree().getSelectedNode(),S.appimage=null,S.appdomxml=null,S}function x(){if("menu"===T){var b=a("#menuTree").udeTree().getSelectedNode(),c=b.name,d=b.level;if(k="",0===d)k=b.name;else if(d>2){for(var e=2;e<d;e++){var f=b.getParentNode(),g=f.name;k+=g+",",b=f}k=k.substring(0,k.length-1),k=k.split(",");for(var h=k.length,i="",j=h;j>0;j--)i+=k[j-1]+".";var k=i+c}else if(2===d)var k=c}else{var b=a("#notMenuTree").udeTree().getSelectedNode(),c=b.name,d=b.level;if(k="",0==d)k=b.name;else if(d>2){for(var e=2;e<d;e++){var f=b.getParentNode(),g=f.name;k+=g+",",b=f}k=k.substring(0,k.length-1),k=k.split(",");for(var h=k.length,i="",j=h;j>0;j--)i+=k[j-1]+".";var k=i+c}else if(2===d)var k=c}return k}function y(){var b=new DataCenter,c=new DataStore(ea);if(c.setRowSetName(ea),"menu"===T)var d=a("#menuTree").udeTree().getCheckedNode();else var d=a("#notMenuTree").udeTree().getCheckedNode();
return c.getRowSet().addRows(d),b.addDataStore(c),b}function z(){_=!0,"menu"===T?(a("#menuTree").udeTree().destroy(),A()):(a("#notMenuTree").udeTree().destroy(),B())}function A(){var b="1";a.ude.rpc.projectStructure.getQueryMenuTree(C,b)}function B(){var b="2";a.ude.rpc.projectStructure.getQueryMenuTree(D,b)}function C(a){for(var b=a.getDataStore("menuTreeStore"),d=b.getRowSet().getRowCount(),e=0;e<d;e++){b.getRowSet().getRow(e).setItemValue("name",b.getRowSet().getRow(e).getItemValue("menuName"));var f=b.getRowSet().getRow(e).getItemValue("parentMenuId");"root"===f&&b.getRowSet().getRow(e).setItemValue("parentMenuId","-1")}var g=b.getRowSet().getData(),h=a.getParameter("pageType");h&&1==h&&(fa=a.getParameter("pageId")),k(g),c(aa)}function D(a){for(var b=a.getDataStore("menuTreeStore"),d=b.getRowSet().getRowCount(),e=0;e<d;e++){b.getRowSet().getRow(e).setItemValue("name",b.getRowSet().getRow(e).getItemValue("menuName"));var f=b.getRowSet().getRow(e).getItemValue("parentMenuId");"root"===f&&b.getRowSet().getRow(e).setItemValue("parentMenuId","-1")}var g=b.getRowSet().getData(),h=a.getParameter("pageType");h&&2==h&&(fa=a.getParameter("pageId")),q(g),c(aa)}function E(b,c){var d=c.pageType;"listMenu"===d||""===d||"undefined"==typeof d?(a("#nodetype").empty(),a("#nodetype").append('<option  value="listMenu" selected="selected">'+a.i18n.prop("ude.page.config.projectStructure.projectStructureJs.treeMenuNodeClick_listMenu")+"</option>")):(a("#nodetype").empty(),a("#nodetype").append('<option  value="pageMenu" selected="selected">'+a.i18n.prop("ude.page.config.projectStructure.projectStructureJs.treeMenuNodeClick_pageMenu")+"</option>"),a("#nodetype").append('<option  value="childPage">'+a.i18n.prop("ude.page.config.projectStructure.projectStructureJs.treeMenuNodeClick_childPage")+"</option>")),U="update",O(),T="menu",da=1,V=c.id,W=c.menuId,X=c.parentMenuId,"-1"===W?(a("#addMenuTreeBtn").trigger("setDisableT"),a("#delMenuTreeBtn").trigger("setDisableT"),a("#editMenuTreeBtn").attr("disabled",!0)):"-1"===X?(a("#addMenuTreeBtn").trigger("setDisableF"),a("#delMenuTreeBtn").trigger("setDisableT"),a("#editMenuTreeBtn").attr("disabled",!0)):"childPage"!==d&&""!==d||"-1"==X?(a("#addMenuTreeBtn").trigger("setDisableF"),a("#delMenuTreeBtn").trigger("setDisableF"),a("#editMenuTreeBtn").attr("disabled",!1)):(a("#addMenuTreeBtn").trigger("setDisableF"),a("#delMenuTreeBtn").trigger("setDisableF"),a("#editMenuTreeBtn").attr("disabled",!1)),a.ude.rpc.projectStructure.getQueryMenuTreeNode(G,V,W,da),Y&&Y()}function F(b,c){var d=c.pageType;"listMenu"===d||""===d||"undefined"==typeof d?(a("#nodetype").empty(),a("#nodetype").append('<option  value="listMenu" selected="selected">'+a.i18n.prop("ude.page.config.projectStructure.projectStructureJs.treeMenuNodeClick_listMenu")+"</option>")):(a("#nodetype").empty(),a("#nodetype").append('<option  value="pageMenu" selected="selected">'+a.i18n.prop("ude.page.config.projectStructure.projectStructureJs.treeMenuNodeClick_pageMenu")+"</option>"),a("#nodetype").append('<option  value="childPage" >'+a.i18n.prop("ude.page.config.projectStructure.projectStructureJs.treeMenuNodeClick_childPage")+"</option>")),U="update",O(),T="notMenu",V=c.id,W=c.menuId,X=c.parentMenuId,da=2,"-1"===W?(a("#addMenuTreeBtn").trigger("setDisableT"),a("#delMenuTreeBtn").trigger("setDisableT"),a("#editMenuTreeBtn").attr("disabled",!0)):"-1"===X?(a("#addMenuTreeBtn").trigger("setDisableF"),a("#delMenuTreeBtn").trigger("setDisableT"),a("#editMenuTreeBtn").attr("disabled",!0)):"childPage"!==d&&""!==d||"-1"==X?(a("#addMenuTreeBtn").trigger("setDisableF"),a("#delMenuTreeBtn").trigger("setDisableF"),a("#editMenuTreeBtn").attr("disabled",!1)):(a("#addMenuTreeBtn").trigger("setDisableF"),a("#delMenuTreeBtn").trigger("setDisableF"),a("#editMenuTreeBtn").attr("disabled",!1)),a.ude.rpc.projectStructure.getQueryMenuTreeNode(G,V,W,da),Y&&Y()}function G(b){var c=b.getDataStore("menuTreeNodeStore");a("#menuPageName").val(c.getRowSet().getRow(0).data.menuName),a("#menuPageUrl").val(c.getRowSet().getRow(0).data.nodeUrl),a("#nodetype").val(c.getRowSet().getRow(0).data.pageType),a("#isEnabled").val(c.getRowSet().getRow(0).data.isEnabled),a("#analyseKind").val(c.getRowSet().getRow(0).data.analyseKind),a("#desc").val(c.getRowSet().getRow(0).data.description)}function H(){var b;if(a("#addMenuTreeBtn")[0].className.indexOf("-unavailable")<0){b="menu"===T?a("#menuTree").udeTree().getSelectedNode():a("#notMenuTree").udeTree().getSelectedNode(),"-1"!=b.menuId&&a("#editMenuTreeBtn").attr("disabled",!1);b.pageType;a("#nodetype").empty(),a("#nodetype").append('<option  value="pageMenu" selected="selected">'+a.i18n.prop("ude.page.config.projectStructure.projectStructureJs.addMenuTree_pageMenu")+"</option>"),a("#nodetype").append('<option  value="childPage">'+a.i18n.prop("ude.page.config.projectStructure.projectStructureJs.addMenuTree_childPage")+"</option>"),U="add",N(),a("#menuPageName").val(""),a("#menuPageUrl").val(""),a("#nodetype").val(""),a("#desc").val(""),a("#menuPageName").focus()}}function I(){var b=a("#menuPageName").val();return!(!b||""===b)||(showMessage(a.i18n.prop("ude.page.config.projectStructure.projectStructureJs.checkAvailability_menuPageName")+"\uff01",null,"error"),a("#menuPageName").focus(),!1)}function J(){a("#delMenuTreeBtn")[0].className.indexOf("-unavailable")<0&&a.ude.util.confirm(a.i18n.prop("ude.page.config.projectStructure.projectStructureJs.delMenuTree_confirm")+"\uff1f",K)}function K(){if("menu"===T){var b=a("#menuTree").udeTree().getSelectedNode();a("#menuTree").udeTree().removeNode(b);var c=b.menuId;a.ude.rpc.projectStructure.delTreeNode(P,c)}else{var b=a("#notMenuTree").udeTree().getSelectedNode();a("#notMenuTree").udeTree().removeNode(b);var c=b.menuId;a.ude.rpc.projectStructure.delTreeNode(P,c)}}function L(){var b=I();if(b){var c={};if("add"==U){var d=(new Date).getTime();c.menuId=String(d),c.parentMenuId=W}else"update"===U&&(c.id=V,c.menuId=W,c.parentMenuId=X);a.trim(a("#nodetype").val());if(c.leaf="1",c.menuName=a("#menuPageName").val(),c.nodeUrl=a.trim(a("#menuPageUrl").val()),c.pageType=a.trim(a("#nodetype").val()),c.isEnabled=a.trim(a("#isEnabled").val()),c.analyseKind=a.trim(a("#analyseKind").val()),c.description=a.trim(a("#desc").val()),"menu"===T)c.ismenu="1";else{c.ismenu="2";a("#notMenuTree").udeTree().getSelectedNode()}var e="com.neusoft.utf.portal.config.projectstructure.entity.UtfProjectAnalyseResult",f=new DataCenter,g=new DataStore(e);g.setRowSetName(e),g.getRowSet().addRow(c),f.addDataStore(g),pageDC=f,a.ude.rpc.projectStructure.saveMenuTreeData(M,f)}}function M(b){if("menu"===T)var c=a("#menuTree").udeTree().getSelectedNode();else var c=a("#notMenuTree").udeTree().getSelectedNode();var d=b.getDataStore("utfProjectAnalyseResultList"),e=d.getRowSet().getRowCount();d.getRowSet().getRow(0).setItemValue("name",d.getRowSet().getRow(0).getItemValue("menuName"));var f=d.getRowSet().getRow(0).getData();return e>0&&("add"===U?"menu"===T?a("#menuTree").udeTree().addNode(c,f):a("#notMenuTree").udeTree().addNode(c,f):"update"===U&&("menu"===T?(c.name=d.getRowSet().getRow(0).getData().name,c.nodeUrl=d.getRowSet().getRow(0).getData().nodeUrl,c.pageType=d.getRowSet().getRow(0).getData().pageType,c.isEnabled=d.getRowSet().getRow(0).getData().isEnabled,c.analyseKind=d.getRowSet().getRow(0).getData().analyseKind,c.description=d.getRowSet().getRow(0).getData().description,a("#menuTree").udeTree().updateNode(c)):(c.name=d.getRowSet().getRow(0).getData().name,c.nodeUrl=d.getRowSet().getRow(0).getData().nodeUrl,c.pageType=d.getRowSet().getRow(0).getData().pageType,c.isEnabled=d.getRowSet().getRow(0).getData().isEnabled,c.analyseKind=d.getRowSet().getRow(0).getData().analyseKind,c.description=d.getRowSet().getRow(0).getData().description,a("#notMenuTree").udeTree().updateNode(c)))),U="update",b?void("0"===b.getCode()?(showMessage(a.i18n.prop("ude.page.config.projectStructure.projectStructureJs.saveMenuTreeDataSuccess_success"),null,"info"),projectAnalyseDC=b):showMessage(b.getDetail(),null,"error")):void showMessage(a.i18n.prop("ude.page.config.projectStructure.projectStructureJs.saveMenuTreeDataSuccess_fail"),null,"error")}function N(){a("#isEnabled").val("T"),a("#analyseKind").val("manual"),a("#isEnabled").attr("disabled",!0),a("#analyseKind").attr("disabled",!0)}function O(){a("#analyseKind").val("manual"),a("#isEnabled").attr("disabled",!1),a("#analyseKind").attr("disabled",!0)}function P(b){a("#menuPageName").val(""),a("#menuPageUrl").val(""),a("#nodetype").val(""),a("#desc").val(""),a("#isEnabled").val("T"),a("#menuTree").udeTree().selectNode("-1"),showMessage(a.i18n.prop("ude.page.config.projectStructure.projectStructureJs.delTreeNodeSuccess_showMessage"),null,"info")}function Q(a){Z=a}a.ude.page.config.projectStructure.main={init:b,addMenuTree:H,delMenuTree:J,editMenuTree:L,queryMenuTree:A,treeAttribution:w,treeNodeNamePath:x,udeTreeClick:s,udeTreeCheckClick:t,treeCheckNodeAttribution:y,initCheckTree:z,getIfCheckFlag:d,setAutoDetectHeight:c,caseClickSelectNode:e,udeTabClick:Q,openMenu:v};var R,S="",T="menu",U="",V="",W="",X="",Y=null,Z=null,$=null,_=!1,aa="this",ba=0,ca=!1,da=1,ea="com.neusoft.utf.portal.config.projectstructure.entity.UtfProjectAnalyseResult",fa=null}(jQuery),function(a){a.projectStructure={getQueryMenuTree:function(a,b){var c=new DataCenter;c.addParameter("ismenu",b);var d={};d.url=appPath+"/utf/config/projectstructure/queryMenuTree.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)},getQueryMenuTreeNode:function(a,b,c,d){var e=new DataCenter;e.addParameter("id",b),e.addParameter("menuId",c),e.addParameter("pageType",d);var f={};f.url=appPath+"/utf/config/projectstructure/queryMenuTreeNode.action",f.sync=!1,f.load=a,$.maf.action.requestData(f,e)},saveMenuTreeData:function(a,b){var c={};c.url=appPath+"/utf/config/projectstructure/saveMenuTreeData.action",c.sync=!1,c.load=a,$.maf.action.requestData(c,b)},delTreeNode:function(a,b){var c=new DataCenter;c.addParameter("id",b);var d={};d.url=appPath+"/utf/config/projectstructure/delTreeNode.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)},getTreeNodeDataByMenuId:function(a,b){var c=new DataCenter;c.addParameter("menuId",b);var d={};d.url=appPath+"/utf/config/projectstructure/getTreeNodeDataByMenuId.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)}}}($.ude.rpc);