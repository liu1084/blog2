/* All right reserved by Neusoft Co. Ltd. 2016-10-14 11:10:38 */
!function(a){a.clouddevice={getCloudDevices:function(a,b){var c=new DataCenter;c.addParameter("type",b);var d={};d.url=appPath+"/utf/system/clouddevice/getCloudDevices.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)},applyCloudDevice:function(a,b,c){var d=new DataCenter;d.addParameter("deviceId",b),d.addParameter("endDate",c);var e={};e.url=appPath+"/utf/system/clouddevice/applyCloudDevice.action",e.sync=!1,e.load=a,$.maf.action.requestData(e,d)},freeCloudDevice:function(a,b,c){var d=new DataCenter;d.addParameter("applyId",b),d.addParameter("imsi",c);var e={};e.url=appPath+"/utf/system/clouddevice/freeCloudDevice.action",e.sync=!1,e.load=a,$.maf.action.requestData(e,d)},addCloudDeviceForUser:function(a,b,c,d,e){var f=new DataCenter;f.addParameter("imsi",b),f.addParameter("manufacturer",c),f.addParameter("model",d),f.addParameter("ip",e);var g={};g.url=appPath+"/utf/system/clouddevice/addCloudDeviceForUser.action",g.sync=!1,g.load=a,$.maf.action.requestData(g,f)}}}($.ude.rpc),function(a){function b(){a("#freeDevices").bind("click",function(a){f()}),a("#allDevices").bind("click",function(a){g()}),a("#myDevices").bind("click",function(a){h()}),a("#confirmApplyBtn").bind("click",function(a){c()}),d(),a(".btn-apply").live("click",function(b){k=a(this).data("id"),a("#endDate").val(i(1)),a.ude.dialog.open("applyTimeDialog",{title:"\u6307\u5b9a\u7533\u8bf7\u65f6\u95f4",width:"400px"})}),a(".btn-free").live("click",function(b){var c=a(this).data("id"),d=a(this).data("imsi"),e=function(b){b&&"0"===b.getCode()?a(".down-middle-content li.active a").click():showMessage("\u91ca\u653e\u8bbe\u5907\u5931\u8d25\uff01",null,"error")};a.ude.rpc.clouddevice.freeCloudDevice(e,c,d)});var b=function(a){if(a&&"0"===a.getCode()){var b=a.getDataStore("devices").getRowSet().getData();e(b,1)}else showMessage("\u65e0\u6cd5\u6b63\u5e38\u8fde\u63a5\u4e91\u624b\u673a\u5e94\u7528\uff0c\u8bf7\u786e\u4fdd\u5730\u5740\u914d\u7f6e\u6b63\u786e\uff01",null,"error")};a.ude.rpc.clouddevice.getCloudDevices(b,"all")}function c(){var b=a("#endDate").val();if(!b)return void showMessage("\u8f93\u5165\u7ed3\u675f\u65f6\u95f4\uff01",null,"warn");var c=function(b){b&&"0"===b.getCode()?a(".down-middle-content li.active a").click():showMessage("\u7533\u8bf7\u8bbe\u5907\u5931\u8d25\uff01",null,"error"),a.ude.dialog.close()};a.ude.rpc.clouddevice.applyCloudDevice(c,k,b)}function d(){var b={timeOnlyTitle:a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_timeOnlyTitle"),currentText:a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_currentText"),closeText:a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_closeText"),dateFormat:"yy-mm-dd",timeFormat:"HH:mm",hourText:"\u65f6",minuteText:"\u5206",showHour:!0,showMinute:!0,showTime:!1,changeMonth:!1,changeYear:!1,monthNamesShort:[a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_monthNamesShort1"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_monthNamesShort2"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_monthNamesShort3"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_monthNamesShort4"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_monthNamesShort5"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_monthNamesShort6"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_monthNamesShort7"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_monthNamesShort8"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_monthNamesShort9"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_monthNamesShort10"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_monthNamesShort11"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_monthNamesShort12")],dayNamesMin:[a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_dayNamesMin0"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_dayNamesMin1"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_dayNamesMin2"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_dayNamesMin3"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_dayNamesMin4"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_dayNamesMin5"),a.i18n.prop("ude.page.system.project.projectJs.setTimePicker_dayNamesMin6")]};a("#endDate").datetimepicker(b)}function e(b,c){var d=function(a,b){var c=a.mobilePic?a.mobilePic:j,d="<div class='col-md-3' style='width:20%;padding-left:15px;padding-right:15px;float:left;position:relative'><div class='box box-default box-solid'><div class='box-header with-border'><h3 class='box-title'>"+a.mobileInfoModel+"</h3></div><div class='box-body'><div class='small-box bg-purple'><div class='inner'><p>\u54c1\u724c\uff1a"+a.mobileInfoManufacturer+"</p><p>\u7248\u672c\uff1a"+a.mobileInfoVersion+"</p><p>\u5206\u8fa8\u7387\uff1a"+a.mobileInfoResolutionRatio+"</p><p>\u4f4d\u7f6e\uff1a"+a.address+"</p></div><div class='icon'><img style='width:100px;height:110px' src='"+c+"' alt=''></div></div></div><div class='box-footer'>";return d+=0==b?"<button class='btn btn-block btn-default btn-sm device-btn btn-apply'data-id='"+a.id+"' data-name='"+a.serverId+"'  type='button'>\u7533\u8bf7\u79df\u7528</button>":1==b?0==a.applyStatus?"<button class='btn btn-block btn-default btn-sm device-btn btn-apply'data-id='"+a.id+"' data-name='"+a.serverId+"'  type='button'>\u7533\u8bf7\u79df\u7528</button>":"<button class='btn btn-block btn-default btn-sm device-btn'data-id='"+a.id+"' data-name='"+a.serverId+"'  type='button' disabled>\u6b63\u5728\u4f7f\u7528</button>":"<button class='btn btn-block btn-default btn-sm device-btn btn-free'data-id='"+a.applyId+"' data-imsi='"+a.mobileInfoImsi+"' data-name='"+a.serverId+"'  type='button'>\u53d6\u6d88\u7533\u8bf7</button>",d+="</div>",d+="</div>",d+="</div>"};if(a("#tabForFreeDevices").html(""),a("#tabForAllDevices").html(""),a("#tabForMyDevices").html(""),b&&b.length>0){for(var e="",f=0,g=0;g<b.length;g++)f++,0!=g&&g%4!=0||(e+="<div class='row'>"),e+=d(b[g],c),0==g||f%4!=0&&g!=b.length-1||(e+="</div>");0==c?a("#tabForFreeDevices").html(e):1==c?a("#tabForAllDevices").html(e):a("#tabForMyDevices").html(e)}}function f(){var b=function(a){if(a&&"0"===a.getCode()){var b=a.getDataStore("devices").getRowSet().getData();e(b,0)}else showMessage("\u65e0\u6cd5\u6b63\u5e38\u8fde\u63a5\u4e91\u624b\u673a\u5e94\u7528\uff0c\u8bf7\u786e\u4fdd\u5730\u5740\u914d\u7f6e\u6b63\u786e\uff01",null,"error")};a.ude.rpc.clouddevice.getCloudDevices(b,"free")}function g(){var b=function(a){if(a&&"0"===a.getCode()){var b=a.getDataStore("devices").getRowSet().getData();e(b,1)}else showMessage("\u65e0\u6cd5\u6b63\u5e38\u8fde\u63a5\u4e91\u624b\u673a\u5e94\u7528\uff0c\u8bf7\u786e\u4fdd\u5730\u5740\u914d\u7f6e\u6b63\u786e\uff01",null,"error")};a.ude.rpc.clouddevice.getCloudDevices(b,"all")}function h(){var b=function(a){if(a&&"0"===a.getCode()){var b=a.getDataStore("devices").getRowSet().getData();e(b,2)}else showMessage("\u65e0\u6cd5\u6b63\u5e38\u8fde\u63a5\u4e91\u624b\u673a\u5e94\u7528\uff0c\u8bf7\u786e\u4fdd\u5730\u5740\u914d\u7f6e\u6b63\u786e\uff01",null,"error")};a.ude.rpc.clouddevice.getCloudDevices(b,"my")}function i(a){var b=new Date;b.setDate(b.getDate()+a);var c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate(),f=b.getHours(),g=b.getMinutes(),h=c+"-";return d<10&&(h+="0"),h+=d+"-",e<10&&(h+="0"),h+=e+" ",f<10&&(h+="0"),h+=f+":",g<10&&(h+="0"),h+=g}a.ude.page.system.clouddevice.main={init:b};var j="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEyOCAxMjgiIGlkPSLQodC70L7QuV8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMjggMTI4IiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48Zz48Zz48cGF0aCBkPSJNODQsMi41SDQ0Yy02LjMsMC0xMS41LDUuMi0xMS41LDExLjV2MTAwYzAsNi4zLDUuMiwxMS41LDExLjUsMTEuNWg0MGM2LjMsMCwxMS41LTUuMiwxMS41LTExLjVWMTQgICAgQzk1LjUsNy43LDkwLjMsMi41LDg0LDIuNXogTTM1LjUsMTUuNWg1N3Y5MmgtNTdWMTUuNXogTTQ0LDUuNWg0MGM0LjIsMCw3LjYsMyw4LjQsN0gzNS42QzM2LjQsOC41LDM5LjgsNS41LDQ0LDUuNXogTTg0LDEyMi41ICAgIEg0NGMtNC43LDAtOC41LTMuOC04LjUtOC41di0zLjVoNTd2My41QzkyLjUsMTE4LjcsODguNywxMjIuNSw4NCwxMjIuNXoiIGZpbGw9IiM0QTM3NEYiLz48cGF0aCBkPSJNNTksMTAuNWgxMGMwLjgsMCwxLjUtMC43LDEuNS0xLjVTNjkuOCw3LjUsNjksNy41SDU5Yy0wLjgsMC0xLjUsMC43LTEuNSwxLjVTNTguMiwxMC41LDU5LDEwLjV6IiBmaWxsPSIjNEEzNzRGIi8+PHBhdGggZD0iTTY0LDExMS41Yy0yLjgsMC01LDIuMi01LDVzMi4yLDUsNSw1czUtMi4yLDUtNVM2Ni44LDExMS41LDY0LDExMS41eiBNNjQsMTE4LjVjLTEuMSwwLTItMC45LTItMiAgICBzMC45LTIsMi0yczIsMC45LDIsMlM2NS4xLDExOC41LDY0LDExOC41eiIgZmlsbD0iIzRBMzc0RiIvPjwvZz48L2c+PC9zdmc+",k=""}(jQuery);