/* All right reserved by Neusoft Co. Ltd. 2016-10-14 09:10:28 */
!function(a){a.testcaseRpc={initResources:function(a,b,c){var d=new DataCenter;d.addParameter("parentCaseId",b),d.addParameter("pageType",c);var e={};e.url=appPath+"/utf/testcase/caseDesign/caseGrid/initUserPage.action",e.sync=!1,e.load=a,$.maf.action.requestData(e,d)},addUser:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseGrid/addUser.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},editUser:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseGrid/editUser.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},deleteUser:function(a,b){var c=new DataCenter;c.addParameter("id",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseGrid/deleteUser.action",d.load=b,$.maf.action.requestData(d,c)},testCaseRepeat:function(a,b){var c=new DataCenter;c.addParameter("id",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseGrid/testCaseRepeat.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},getIncludeFrame:function(a){var b=new DataCenter,c={};c.url=appPath+"/utf/testcase/caseDesign/caseGrid/getIncludeFrame.action",c.sync=!1,c.load=a,$.maf.action.requestData(c,b)},getAppiumSession:function(a){var b=new DataCenter,c={};c.url=appPath+"/utf/testcase/caseDesign/caseGrid/getAppiumSession.action",c.sync=!1,c.load=a,$.maf.action.requestData(c,b)},refreshImage:function(a,b){var c=new DataCenter;c.addParameter("appiumSessionId",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseGrid/refreshImage.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},installApp:function(a,b){var c=new DataCenter;c.addParameter("host",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseGrid/installApp.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},saveObject:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseGrid/saveObject.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},saveImage:function(a,b,c,d){var e=new DataCenter;e.addParameter("menuId",a),e.addParameter("appImageHidden",b),e.addParameter("appDomXmlHidden",c);var f={};f.url=appPath+"/utf/testcase/caseDesign/caseGrid/saveImage.action",f.sync=!1,f.load=d,$.maf.action.requestData(f,e)},getSavedImage:function(a,b){var c=new DataCenter;c.addParameter("menuId",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseGrid/getSavedImage.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},execScript:function(a,b,c,d,e,f){var g=new DataCenter;g.addParameter("appiumSessionId",a),g.addParameter("selector",b),g.addParameter("action",c),g.addParameter("waitTime",e),g.addParameter("scriptValue",d);var h={};h.url=appPath+"/utf/testcase/caseDesign/caseGrid/execScript.action",h.sync=!1,h.load=f,$.maf.action.requestData(h,g)}}}($.ude.rpc),function(a){function b(){a.ude.util.pageResize(),Ea=null,a.ude.rpc.testcaseRpc.getIncludeFrame(function(b){if(b&&b.getDataStore("utfProjectInfoTResult")){var c=b.getDataStore("utfProjectInfoTResult");if(c.getRowSet().getRowCount()>0){var d=c.getRowSet().getRow(0).data;Ea="1"!==d.perserve01,Ea===!1?(a("#includeFrameMethodFrame").hide(),a("#includeFrameEventFrame").hide(),a("#methodDefaultframe").hide(),a("#includeFrameMethodDefaultframe").hide()):(a("#includeFrameMethodFrame").show(),a("#includeFrameEventFrame").show(),a("#methodDefaultframe").show(),a("#includeFrameMethodDefaultframe").show()),a.ude.page.testcase.caseDesign.methodjs.initMethodTableForgetIncludeFrame(Ea),a("#caseList").show(),a("#caseEdit").hide()}}}),Y(),U(),a.ude.page.config.projectStructure.main.udeTreeClick(function(){a.ude.page.testcase.scenedesign.main.getSceneByCaseId(""),ya=a.ude.page.config.projectStructure.main.treeAttribution(),na(ya.ismenu,""),za=ya.menuId,Ca=ya.ismenu,a("#pageObjectDiv").length>0?(a("#pageObjectTable").udeTable().dataTable().fnClearTable(),"childPage"!==ya.pageType&&a("#caseTable").udeTable().dataTable().fnClearTable()):a("#caseTable").udeTable().dataTable().fnClearTable(),a("#addCaseBtn").trigger("setDisableT"),a("#addCaseToScene").trigger("setDisableT"),a("#editCaseBtn").trigger("setDisableT"),a("#deleteCaseBtn").trigger("setDisableT"),Ba="","pageMenu"===ya.pageType||"childPage"===ya.pageType?(Aa=a.ude.page.config.projectStructure.main.treeNodeNamePath(),a("#addCaseBtn").trigger("setDisableF"),a("#addCaseToScene").trigger("setDisableF"),a("#editCaseBtn").trigger("setDisableF"),a("#deleteCaseBtn").trigger("setDisableF"),a("#pageObjectDiv").length>0&&(a("#syncObject").trigger("setDisableF"),a("#manualPageObjectTab").attr("class").indexOf("active")!=-1?(a("#addPageObject").trigger("setDisableF"),a("#editPageObject").trigger("setDisableF"),a("#saveObject").trigger("setDisableT")):(a("#addPageObject").trigger("setDisableT"),a("#editPageObject").trigger("setDisableT"),a("#saveObject").trigger("setDisableF")),a("#deletePageObject").trigger("setDisableF"),a("#saveImage").trigger("setDisableF")),Ba="'"+ya.menuId+"'"+la(ya,Ba),a.ude.rpc.testcaseRpc.initResources(e,Ba,Ca),a("#addCaseBtn").attr("title",a.i18n.prop("testcase.casejs.init.addCaseBtn"))):ya.parentMenuId&&"-1"!==ya.parentMenuId?(a("#addCaseBtn").trigger("setDisableT"),a("#addCaseToScene").trigger("setDisableF"),a("#editCaseBtn").trigger("setDisableF"),a("#deleteCaseBtn").trigger("setDisableF"),a("#pageObjectDiv").length>0&&(a("#syncObject").trigger("setDisableF"),a("#manualPageObjectTab").attr("class").indexOf("active")!=-1?(a("#addPageObject").trigger("setDisableF"),a("#editPageObject").trigger("setDisableF"),a("#saveObject").trigger("setDisableT")):(a("#addPageObject").trigger("setDisableT"),a("#editPageObject").trigger("setDisableT"),a("#saveObject").trigger("setDisableF")),a("#deletePageObject").trigger("setDisableF"),a("#saveImage").trigger("setDisableF")),a("#caseTable").udeTable().dataTable().fnClearTable(),Ba="'"+la(ya,Ba).substring(2),"'"===Ba?(a("#pageObjectDiv").length>0&&a("#pageObjectTable").udeTable().dataTable().fnClearTable(),a("#caseTable").udeTable().dataTable().fnClearTable()):a.ude.rpc.testcaseRpc.initResources(e,Ba,Ca),a("#addCaseBtn").attr("title",a.i18n.prop("testcase.casejs.init.addCaseBtnT"))):ya.parentMenuId&&"-1"!==ya.parentMenuId||(a("#addCaseBtn").trigger("setDisableT"),a("#addCaseToScene").trigger("setDisableT"),a("#editCaseBtn").trigger("setDisableT"),a("#deleteCaseBtn").trigger("setDisableT"),a("#pageObjectDiv").length>0&&(a("#syncObject").trigger("setDisableT"),a("#addPageObject").trigger("setDisableT"),a("#editPageObject").trigger("setDisableT"),a("#deletePageObject").trigger("setDisableT"),a("#saveObject").trigger("setDisableT"),a("#saveImage").trigger("setDisableT")),a("#addCaseBtn").attr("title",a.i18n.prop("testcase.casejs.init.addCaseBtnT"))),a("#pageObjectDiv").length>0?"childPage"!==ya.pageType&&(a("#caseList").show(),a("#caseEdit").hide()):(a("#caseList").show(),a("#caseEdit").hide())}),a.ude.page.config.projectStructure.main.udeTabClick(function(){a("#pageObjectDiv").length>0||(a("#caseList").show(),a("#caseEdit").hide(),a("#pageObjectDiv").length>0&&a("#pageObjectTable").udeTable().dataTable().fnClearTable(),a("#caseTable").udeTable().dataTable().fnClearTable(),a("#addCaseBtn").trigger("setDisableT"),a("#addCaseToScene").trigger("setDisableT"),a("#editCaseBtn").trigger("setDisableT"),a("#deleteCaseBtn").trigger("setDisableT"),a("#addCaseBtn").attr("title",a.i18n.prop("testcase.casejs.init.addCaseBtnT")))}),d(),k(),a("#addCaseBtn").attr("title",a.i18n.prop("testcase.casejs.init.addCaseBtnT"))}function c(){a.ude.rpc.testcaseRpc.initResources(e,Ba,Ca),a("#caseList").show(),a("#caseEdit").hide(),na(ya.ismenu,"")}function d(){a.ude.pageResizeHandler=function(){a.ude.util.pageResize(),a("#caseTable").udeTable().fnResize(),a("#caseEditMethodDown").css("height",a("#caseEditMethod").height()-a(".common-content-top").outerHeight()-4),a("#caseEditEventDown").css("height",a("#caseEditEvent").height()-a(".common-content-top").outerHeight()-1)}}function e(b){if(!b)return void showMessage("\u521d\u59cb\u5316\u5931\u8d25\u3002",null,"error");if("1"===b.getCode())return void showMessage(b.getDetail(),null,"error");if(a("#pageObjectDiv").length>0){var c=function(b){a("#pageObjectTable").udeTable().dataTable().fnClearTable(),a("#pageObjectTableM").udeTable().dataTable().fnClearTable();for(var c=b.getDataStore(sa).getRowSet().getData(),d=new Array,e=new Array,f=0;f<c.length;f++)"auto"==c[f].analyseKind?e.push(c[f]):d.push(c[f]);a("#pageObjectTable").udeTable().fnRedraw(e),a("#pageObjectTable").udeTable().fnResize(),a("#pageObjectTableM").udeTable().fnRedraw(d),a("#pageObjectTableM").udeTable().fnResize(),i()};h(c),a("#caseMoreConfigTr").hide(),a("#methodMoreConfigTr").hide(),a("#initMenuCheckTr").hide()}var d=b.getDataStore("caseStore"),e=a.ude.page.config.projectStructure.main.treeAttribution();a("#pageObjectDiv").length>0?("childPage"!==e.pageType||Da)&&X(d.getRowSet().getData()):X(d.getRowSet().getData())}function f(){La?(a("input[name='check']").attr("checked",!1),La=!1):(a("input[name='check']").attr("checked",!0),La=!0)}function g(){Ma?(a("input[name='checkM']").attr("checked",!1),Ma=!1):(a("input[name='checkM']").attr("checked",!0),Ma=!0)}function h(b){var c=new DataCenter,d=new DataStore(ra);d.setRowSetName(ra);var e=a.ude.page.config.projectStructure.main.treeAttribution(),f=e.menuId,g=e.ismenu;c.addParameter("caseId",f),c.addParameter("pageType",g),d.getRowSet().addRow(e),c.addDataStore(d),a.ude.rpc.pageObject.getPageElement(c,b)}function i(){var b=a.ude.page.config.projectStructure.main.treeAttribution(),c=b.menuId;a.ude.rpc.testcaseRpc.getSavedImage(c,j)}function j(b){if(b&&"0"===b.getCode()){var c=b.getParameter("imageStream");b.getParameter("domXml");Ha=b.getParameter("height"),Ia=b.getParameter("width");var d=Ha*Ua/Ia;c&&""!=c?a("#savedAppImage").attr("src","data:image/png;base64,"+c):a("#savedAppImage").attr("src",""),a("#savedAppImage").height(d),a("#savedAppImage").width(Ua);var e=b.getDataStore("targetHotSpotNodes");a("#savedhotspot-container").html(""),e.getRowSet().forEach(function(b){var c=b.getItemValue("bounds"),e=b.getItemValue("nodeId");e="saved::"+e;var f=c.replace("][",",").replace("[","").replace("]",""),g=f.split(","),h=Ua*g[0]/Ia,i=d*g[1]/Ha,j=(g[2]-g[0])*Ua/Ia,k=(g[3]-g[1])*d/Ha,l="top:"+i+"px;left:"+h+"px;height:"+k+"px;width:"+j+"px;",m="<li><a href='javascript:void(0)'><span class='hotspot' style='"+l+"' id='"+e+"'></span></a></li>";a("#savedhotspot-container").append(m)})}else{var f=b.getDetail();showMessage(f,null,"error")}}function k(){a("#addCaseBtn").bind("click",function(b){a("#addCaseBtn")[0].className.indexOf("-unavailable")<0&&$()}),a("#editCaseBtn").bind("click",function(b){a("#editCaseBtn")[0].className.indexOf("-unavailable")<0&&_()}),a("#deleteCaseBtn").bind("click",function(b){a("#deleteCaseBtn")[0].className.indexOf("-unavailable")<0&&da()}),a("#caseMoreConfigBtn").bind("click",function(){"none"===a("#caseMoreConfig")[0].style.display?(a("#caseMoreConfigBtn")[0].className="testcase-buttons-item opt-closeup",a("#caseMoreConfig").css("display","block")):(a("#caseMoreConfig").css("display","none"),a("#caseMoreConfigBtn")[0].className="testcase-buttons-item opt-openall")}),a("#addCaseToScene").bind("click",function(){if(a("#addCaseToScene")[0].className.indexOf("-unavailable")<0){var b=a("#caseTable").udeTable().fnGetSelectedRowData();if(null==b)return void showMessage(a.i18n.prop("testcase.casejs.initUser.operPrompt"),null,"error");a.ude.page.testcase.scenedesign.main.addCaseToScene(b,"add")}}),a(".common-buttons-item").unbind("setDisableT"),a(".common-buttons-item").unbind("setDisableF"),a(".common-buttons-item").bind("setDisableT",function(b){var c=b.currentTarget.className;b.currentTarget.className=c.indexOf("-unavailable")<0?c+"-unavailable":c,a(b.currentTarget).attr("disabled","disabled")}),a(".common-buttons-item").bind("setDisableF",function(b){var c=b.currentTarget.className;b.currentTarget.className=c.replace("-unavailable",""),a(b.currentTarget).removeAttr("disabled")})}function l(){a("#refreshImage").bind("click",function(b){a("#refreshImage")[0].className.indexOf("-unavailable")<0&&(L(),a("#currentImage").click())}),a("#installApp").bind("click",function(b){a("#installApp")[0].className.indexOf("-unavailable")<0&&u()}),a("#syncObject").bind("click",function(b){a("#syncObject")[0].className.indexOf("-unavailable")<0&&(K(),a("#autoPageObject").click())}),a("#saveObject").bind("click",function(b){a("#saveObject")[0].className.indexOf("-unavailable")<0&&w()}),a("#deletePageObject").bind("click",function(){a("#deletePageObject")[0].className.indexOf("-unavailable")<0&&z()}),a("#addPageObject").bind("click",function(){a("#addPageObject")[0].className.indexOf("-unavailable")<0&&C()}),a("#editPageObject").bind("click",function(){a("#editPageObject")[0].className.indexOf("-unavailable")<0&&I()}),a("#savePageObject").bind("click",function(){a("#savePageObject")[0].className.indexOf("-unavailable")<0&&H()}),a("#saveImage").bind("click",function(){a("#saveImage")[0].className.indexOf("-unavailable")<0&&r()}),a(document).off("click",".hotspot"),a(document).on("click",".hotspot",function(b){var c=a(this).attr("id");if(c){var d=q(c);d!=-1&&(a("#pageObjectTable").udeTable().fnSelectRowByData(d),a("#pageObjectTable").udeTable().fnScrollToSelectedRow())}}),a(document).off("dblclick",".hotspot"),a(document).on("dblclick",".hotspot",function(b){var c=a(this).attr("id");if(c){var d=q(c);d!=-1?(a("#pageObjectTable").udeTable().fnSelectRowByData(d),a("#pageObjectTable").udeTable().fnScrollToSelectedRow(),t(a("#pageObjectTable").udeTable().fnGetSelectedRowData())):showMessage("\u8be5\u63a7\u4ef6\u5c1a\u672a\u540c\u6b65\uff0c\u8bf7\u540c\u6b65\u5e76\u4fdd\u5b58\u540e\u518d\u6dfb\u52a0\u7528\u4f8b\uff01",null,"error")}}),a(document).off("click","#appImage"),a(document).on("click","#appImage",function(b){b.pageX-a("#appImage").offset().left,b.pageY-a("#appImage").offset().top}),a(document).off("mouseover",".hotspot"),a(document).on("mouseover",".hotspot",function(b){a(".hotspot").removeClass("showborder")}),a("#manualPageObject").bind("click",function(){setTimeout('$("#pageObjectTableM").udeTable().fnResize()',50),a("#addPageObject").trigger("setDisableF"),a("#editPageObject").trigger("setDisableF"),a("#saveObject").trigger("setDisableT")}),a("#autoPageObject").bind("click",function(){setTimeout('$("#pageObjectTable").udeTable().fnResize()',50),a("#addPageObject").trigger("setDisableT"),a("#editPageObject").trigger("setDisableT"),a("#saveObject").trigger("setDisableF")}),Sa=a("#appImage").imgAreaSelect({handles:!0,instance:!0,onSelectEnd:function(a,b){m(b,!1)}}),Ta=a("#savedAppImage").imgAreaSelect({handles:!0,instance:!0,onSelectEnd:function(a,b){m(b,!0)}}),a("#saveControlBtn").bind("click",function(){n()}),a(document).on("click",function(b){var c=a(b.target);a(b.target).parents(".ui-dialog").length>0||c.hasClass("ui-widget-overlay")||(null!=Sa&&Sa.cancelSelection(),Ta&&Ta.cancelSelection())}),L(!0),E()}function m(b,c){if(0!=b.width&&0!=b.height){var d=0,e=0,f=0,g=0;if(c){var h=a("#savedAppImage").attr("src");if(!h)return void showMessage("\u5c1a\u672a\u4fdd\u5b58\u56fe\u50cf\uff01",null,"error");d=Ha,e=Ia,f=a("#savedAppImage").height(),g=a("#savedAppImage").width()}else{var h=a("#appImage").attr("src");if(!h)return void showMessage("\u5c1a\u672a\u83b7\u53d6\u5f53\u524d\u56fe\u50cf\uff01",null,"error");d=Fa,e=Ga,f=a("#appImage").height(),g=a("#appImage").width()}var i=b.x1,j=b.y1,k=b.x2,l=b.y2,m=parseInt(i*e/g,10),n=parseInt(j*d/f,10),o=parseInt(k*e/g,10),p=parseInt(l*d/f,10),q="["+m+","+n+"]["+o+","+p+"]";a("#controlInfo").html("\u9009\u62e9\u8303\u56f4\u5728\u5bf9\u5e94\u8bbe\u5907\u4e0a\u7684\u8fb9\u754c\u662f"+q),a("#controlBounds").val(q),a("#resolution").val("["+e+","+d+"]"),a("#controlText").val(""),a.ude.dialog.open("addControlDialog",{title:"\u65b0\u589e\u63a7\u4ef6",width:"500px"})}}function n(){var b=a("#controlText").val(),c=a("#controlBounds").val(),d=a("#resolution").val();if(!b)return void showMessage("\u8bf7\u8f93\u5165\u63a7\u4ef6\u7684\u540d\u79f0\uff01",null,"error");var e=a.ude.page.config.projectStructure.main.treeAttribution(),f=e.menuId,g=e.parentMenuId;if("-1"==f||"-1"==g)return void showMessage("\u8be5\u83dc\u5355\u65e0\u6cd5\u6dfb\u52a0\u63a7\u4ef6\uff01",null,"error");var h={type:"Webview","resource-id":"",text:b,"content-desc":"",xpath:"",dp:"",bounds:c,resolution:d,density:Ra},i=JSON.stringify(h),j={};j.id="syncAdd",j.name=i,j.menuId=f,j.elementType="custom",j.elementLable=i,j.analyseKind="auto",j.isEnabled="T",j.elementXpath="",j.syncInfo="1",j.text=b,j.bounds=c;var k=new DataCenter,l=new DataStore(ta);l.setRowSetName(ta),l.getRowSet().addRow(j),k.addDataStore(l),a.ude.rpc.testcaseRpc.saveObject(k,o)}function o(b){if(a.ude.dialog.close(),p(),b&&"0"===b.getCode()){showMessage("\u64cd\u4f5c\u6210\u529f\u3002",null,"info");var c=b.getDataStore(ta).getRowSet().getData(),d=c[0];d.syncInfo="",a("#pageObjectTable").udeTable().fnAddRow(d)}else{var e=b.getDetail();showMessage(e,null,"error")}}function p(){Sa.cancelSelection(),Ta.cancelSelection()}function q(b){var c="",d="",e="",f=b.split("::");"saved"==f[0]?(c=f[1],d=f[2],e=f[3]):(c=f[0],d=f[1],e=f[2]);for(var g=c+"::"+d+"::"+e,h=a("#pageObjectTable").udeTable().fnGetData(),i=-1,j=null,k=0;k<h.length;k++){var l=h[k],m=l.resourceId?l.resourceId:"",n=l.text?l.text:"";n||(n=l.contentDesc?l.contentDesc:"");var o=l.elementXpath?l.elementXpath:"",p=m+"::"+n+"::"+o;if(g==p){i=k,j=l;break}}return i}function r(){var b=a("#appImageHidden").val(),c=a("#appDomXmlHidden").val(),d=a.ude.page.config.projectStructure.main.treeAttribution(),e=d.menuId,f=function(){i()};a.ude.rpc.testcaseRpc.saveImage(e,b,c,f)}function s(b){if(b){var c=a("#methodTable").is(":visible");if(!c)return void showMessage("\u8bf7\u9009\u62e9\u7528\u4f8b\u540e\uff0c\u518d\u6dfb\u52a0\u6d4b\u8bd5\u6b65\u9aa4\uff01",null,"error");var d=a("#caseTable").udeTable().fnGetSelectedRowData(),e=a("#methodTable").udeTable().fnGetSelectedRowData();if(!d||!e)return void showMessage("\u8bf7\u6307\u5b9a\u6d4b\u8bd5\u65b9\u6cd5\uff01",null,"error");var f=b.id,g={},h=d.caseId,i=e.methodId;g.caseId=h,g.methodId=i,g.controlType=b.elementType,g.controlId=f;var j=b.elementType;"input"==j||"date"==j?g.operActionId="setValue":"select"==j?g.operActionId="setText":g.operActionId="click",g.varId="",g.wait="1",g.eventDesc="",g.interactiveObject="pageObj",g.interactiveType="operType";var k=new DataCenter,l=new DataStore(ua);l.setRowSetName(ua),l.getRowSet().addRow(g),k.addDataStore(l),a.ude.page.testcase.caseDesign.eventjs.doAddEvent(k)}}function t(b){if(b){var c=b.syncInfo;if("1"==c||"2"==c)return void showMessage("\u60a8\u9009\u62e9\u7684\u8282\u70b9\u672a\u4fdd\u5b58\u6216\u5df2\u5220\u9664\uff0c\u8bf7\u8fdb\u884c\u540c\u6b65\uff01",null,"error");var d=a("#methodTable").is(":visible");if(!d)return void showMessage("\u8bf7\u9009\u62e9\u7528\u4f8b\u540e\uff0c\u518d\u6dfb\u52a0\u6d4b\u8bd5\u6b65\u9aa4\uff01",null,"error");var e=a("#caseTable").udeTable().fnGetSelectedRowData(),f=a("#methodTable").udeTable().fnGetSelectedRowData();if(!e||!f)return void showMessage("\u8bf7\u6307\u5b9a\u6d4b\u8bd5\u65b9\u6cd5\uff01",null,"error");var g=b.id,h=b.name,i={},j=e.caseId,k=f.methodId;i.caseId=j,i.methodId=k,i.controlType=b.elementType,i.controlId=g,h&&h.indexOf("android.widget.EditText")!=-1?i.operActionId="setValue":i.operActionId="click",i.varId="",i.wait="1",i.eventDesc="",i.interactiveObject="pageObj",i.interactiveType="operType";var l=new DataCenter,m=new DataStore(ua);m.setRowSetName(ua),m.getRowSet().addRow(i),l.addDataStore(m),a.ude.page.testcase.caseDesign.eventjs.doAddEvent(l)}}function u(){var b=function(b){b&&"0"===b.getCode()?a.ude.util.confirm("\u5df2\u6709\u5e94\u7528\u88ab\u5b89\u88c5,\u662f\u5426\u91cd\u65b0\u5b89\u88c5\u5e94\u7528?",v):v()};a.ude.rpc.testcaseRpc.getAppiumSession(b)}function v(){var b=function(a){if(a&&"0"===a.getCode())L();else{var b=a.getDetail();showMessage(b,null,"error")}},c=window.location.host;a.ude.rpc.testcaseRpc.installApp(c,b)}function w(){Na=new Array;var b=a("input[name='check']:checked");return b.length>0?(a(b).each(function(){Na.push(this.value)}),void a.ude.util.confirm("\u662f\u5426\u786e\u8ba4\u540c\u6b65\u63a7\u4ef6\u4fe1\u606f?",x)):void showMessage("\u8bf7\u9009\u62e9\u8981\u540c\u6b65\u7684\u6570\u636e",null,"error")}function x(){var b=a("#pageObjectTable").udeTable().fnGetData(),c=new DataCenter,d=new DataStore(ta);d.setRowSetName(ta);for(var e=0;e<b.length;e++)a.inArray(b[e].id,Na)!=-1&&d.getRowSet().addRow(b[e]);c.addDataStore(d),a.ude.rpc.testcaseRpc.saveObject(c,y)}function y(b){if(b&&"0"===b.getCode()){var c=function(b){a("#pageObjectTable").udeTable().dataTable().fnClearTable(),a("#pageObjectTableM").udeTable().dataTable().fnClearTable();for(var c=b.getDataStore(sa).getRowSet().getData(),d=new Array,e=new Array,f=0;f<c.length;f++)"auto"==c[f].analyseKind?e.push(c[f]):d.push(c[f]);a("#pageObjectTable").udeTable().fnRedraw(e),a("#pageObjectTable").udeTable().fnResize(),a("#pageObjectTableM").udeTable().fnRedraw(d),a("#pageObjectTableM").udeTable().fnResize(),showMessage("\u540c\u6b65\u6210\u529f\u3002",null,"info")};h(c);var d=a("#appDomXmlHidden").val();""!=d&&r()}else{var e=b.getDetail();showMessage(e,null,"error")}}function z(){if(Na=new Array,a("#manualPageObjectTab").attr("class").indexOf("active")!=-1){var b=a("input[name='checkM']:checked");if(!(b.length>0))return void showMessage(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.deletePageObject_showMessage"),null,"error");a(b).each(function(){Na.push(this.value)});var c=a.ude.page.config.projectStructure.main.treeAttribution(),d=new DataCenter,e=new DataStore(ra);e.setRowSetName(ra),e.getRowSet().addRow(c),d.addDataStore(e),Qa=d;for(var f=0;f<Na.length;f++)Qa.addParameter(Na[f],Na[f]);a.ude.util.confirm(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.deletePageObject_confirm")+"\uff1f",A)}else{var b=a("input[name='check']:checked");if(!(b.length>0))return void showMessage(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.deletePageObject_showMessage"),null,"error");a(b).each(function(){Na.push(this.value)});for(var g=a("#pageObjectTable").udeTable().fnGetData(),h=0;h<g.length;h++)a.inArray(g[h].id,Na)!=-1&&(g[h].syncInfo="2");a("#pageObjectTable").udeTable().fnRedraw(g),a("#pageObjectTable").udeTable().fnResize()}}function A(){a.ude.rpc.pageObject.deletePageObject(Qa,B)}function B(b){if(b&&"0"===b.getCode()){for(var c=b.getDataStore(sa).getRowSet().getData(),d=new Array,e=new Array,f=0;f<c.length;f++)"auto"==c[f].analyseKind?e.push(c[f]):d.push(c[f]);a("#pageObjectTableM").udeTable().fnRedraw(d),showMessage(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.deletePageObjectComplete"),null,"info")}else{var g=b.getDetail();showMessage(g,null,"error")}}function C(){var b=a.ude.page.config.projectStructure.main.treeAttribution(),c=b.pageType,d=b.menuId;"-1"===d||"listMenu"===c?showMessage(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.addPageObject_showMessage")+"\uff01",null,"error"):(a("#pageObjectDialog").prop("add",!0),D(),a.ude.dialog.open("pageObjectDialog",{title:a.i18n.prop("ude.page.config.pageObject.pageObjectJs.addPageObject_title"),width:"500px"}))}function D(){a("#elementName").attr("value",""),a("#description").attr("value","")}function E(){a.ude.rpc.pageObject.getInitData(null,F)}function F(b){if(b&&"0"===b.getCode()){var c=b.getDataStore("elementTypeList").getRowSet().getData();Oa=a("#elementType").udeSelect({}),Oa.setData(c)}}function G(){var b=a("#elementType").val();if(!b||""===b)return showMessage(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.checkAvailability_elementType")+"\uff01",a("#pageObjectDialog"),"error"),a("#elementType").focus(),!1;var c=a.trim(a("#elementName").val());return c&&""!==c?!(c.indexOf('"')>0)||void showMessage("\u63a7\u4ef6\u6807\u8bc6\u4e2d\u4e0d\u80fd\u5b58\u5728\u53cc\u5f15\u53f7",a("#pageObjectDialog"),"error"):(showMessage(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.checkAvailability_elementName"),a("#pageObjectDialog"),"error"),void a("#elementName").focus())}function H(){var b=G();if(b){var c=(new DataCenter,a("#elementType").val()),d=a.trim(a("#elementName").val()),e=a.trim(a("#description").val()),f=null;if(a("#pageObjectDialog").prop("add")){var g={};g.elementType=c,g.name=d,g.belongFrame="",g.description=e,g.analyseKind="manual",f=new DataStore(sa),f.setRowSetName(sa),f.getRowSet().addRow(g)}else Pa.elementType=c,Pa.name=d,Pa.belongFrame="",Pa.description=e,Pa.analyseKind="manual",f=new DataStore(sa),f.setRowSetName(sa),f.getRowSet().addRow(Pa);var h=new DataStore(ra);h.setRowSetName(ra);var i=a.ude.page.config.projectStructure.main.treeAttribution();h.getRowSet().addRow(i),a.ude.rpc.pageObject.savePageObject(f,h,function(b){"0"==b.header.code?J(b):showMessage(a.i18n.prop(b.header.message.detail),null,"error")})}}function I(){if(Pa=a("#pageObjectTableM").udeTable().fnGetSelectedRowData(),null==Pa)return void showMessage(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.editPageObject_showMessage"),null,"error");D();var b=Pa.elementType,c=Pa.name;Oa.udeSelect().setValue(b);b.toLowerCase();a("#elementName").val(c),a("#description").val(Pa.description),a("#pageObjectDialog").prop("add",!1),a.ude.dialog.open("pageObjectDialog",{title:a.i18n.prop("ude.page.config.pageObject.pageObjectJs.editPageObject_title"),width:"500px"})}function J(b){a.ude.dialog.close(),showMessage("\u64cd\u4f5c\u6210\u529f\u3002",null,"info");for(var c=b.getDataStore(sa).getRowSet().getData(),d=new Array,e=new Array,f=0;f<c.length;f++)"auto"==c[f].analyseKind?e.push(c[f]):d.push(c[f]);a("#pageObjectTableM").udeTable().fnRedraw(d)}function K(){var b=function(b){a("#pageObjectTable").udeTable().dataTable().fnClearTable();for(var c=b.getDataStore(sa).getRowSet().getData(),d=new Array,e=new Array,f=0;f<c.length;f++)"auto"==c[f].analyseKind?e.push(c[f]):d.push(c[f]);for(var g=a.ude.page.config.projectStructure.main.treeAttribution(),h=g.menuId,i={},j={},k=0;k<Ja.length;k++){var l="(//"+Ja[k].clazz+")["+(parseInt(Ja[k].instance)+1)+"]";Ja[k].indexInWebView!=-1&&"android.view.View"==Ja[k].clazz&&(l="(//android.webkit.WebView[@instance=0]//*)["+Ja[k].indexInWebView+"]");var m=Ja[k].resourceId+"::"+Ja[k].text+"::"+Ja[k].contentDesc+"::"+l;j.hasOwnProperty(m)||(j[m]=k)}for(var n=0;n<e.length;n++)if(e[n].elementXpath){var m=e[n].resourceId+"::"+e[n].text+"::"+e[n].contentDesc+"::"+e[n].elementXpath;i.hasOwnProperty(m)||(i[m]=n),j.hasOwnProperty(m)||"auto"!=e[n].analyseKind||(e[n].syncInfo="2")}else e[n].syncInfo="";for(var f=0;f<Ja.length;f++){var l="(//"+Ja[f].clazz+")["+(parseInt(Ja[f].instance)+1)+"]";Ja[f].indexInWebView!=-1&&"android.view.View"==Ja[f].clazz&&(l="(//android.webkit.WebView[@instance=0]//*)["+Ja[f].indexInWebView+"]");var m=Ja[f].resourceId+"::"+Ja[f].text+"::"+Ja[f].contentDesc+"::"+l;if(!i.hasOwnProperty(m)){var o="Native";Ja[f].isWebview="0",1==Ja[f].webviewNode&&(o="Webview",Ja[f].isWebview="1");var p={type:o,"resource-id":Ja[f].resourceId,text:Ja[f].text,"content-desc":Ja[f].contentDesc,xpath:l,dp:"",bounds:Ja[f].bounds,resolution:"["+Ga+","+Fa+"]",density:Ra},q=JSON.stringify(p);Ja[f].id="syncAdd"+Ka,Ka+=1,Ja[f].name=q,Ja[f].menuId=h,Ja[f].elementType="custom",Ja[f].elementLable=q,Ja[f].analyseKind="auto",Ja[f].isEnabled="T",Ja[f].elementXpath=l,Ja[f].syncInfo="1",e.push(Ja[f])}}a("#pageObjectTable").udeTable().fnRedraw(e),a("#pageObjectTable").udeTable().fnResize()};h(b)}function L(b){var c=function(c){if(c&&"0"===c.getCode()){var e=c.getParameter("appiumSessionId");a.ude.rpc.testcaseRpc.refreshImage(e,d)}else b||showMessage("\u8bf7\u5148\u70b9\u51fb\u5b89\u88c5\u5e94\u7528\u6309\u94ae\uff0c\u5b89\u88c5\u5e94\u7528\uff01",null,"info")},d=function(b){if(b&&"0"===b.getCode()){var c=b.getParameter("imageStream"),d=b.getParameter("domXml");Fa=b.getParameter("height"),Ga=b.getParameter("width"),Ra=b.getParameter("density");var e=Fa*Ua/Ga;a("#appImageHidden").val(c),a("#appDomXmlHidden").val(d),a("#appImage").attr("src","data:image/png;base64,"+c),a("#appImage").height(e),a("#appImage").width(Ua);var f=b.getDataStore("targetHotSpotNodes");Ja=f.getRowSet().getData(),a("#hotspot-container").html(""),f.getRowSet().forEach(function(b){var c=b.getItemValue("bounds"),d=b.getItemValue("nodeId"),f=c.replace("][",",").replace("[","").replace("]",""),g=f.split(","),h=Ua*g[0]/Ga,i=e*g[1]/Fa,j=(g[2]-g[0])*Ua/Ga,k=(g[3]-g[1])*e/Fa,l="top:"+i+"px;left:"+h+"px;height:"+k+"px;width:"+j+"px;",m="<li><a href='javascript:void(0)'><span class='hotspot' style='"+l+"' id='"+d+"'></span></a></li>";a("#hotspot-container").append(m)})}else{var g=b.getDetail();showMessage(g,null,"error")}};a.ude.rpc.testcaseRpc.getAppiumSession(c)}function M(b){a("#pageObjectTable").udeTable({data:b,columns:[{sTitle:"",mData:"id",sWidth:"5%",bSort:!1,mRender:Q},{sTitle:"\u6587\u672c",mData:"text",sWidth:"28%",mRender:T},{sTitle:"\u63a7\u4ef6ID",mData:"resourceId",sWidth:"19%"},{sTitle:"\u8def\u5f84",mData:"elementXpath",sWidth:"19%"},{sTitle:"\u5750\u6807",mData:"bounds",sWidth:"19%"},{sTitle:"\u540c\u6b65\u72b6\u6001",mData:"syncInfo",sWidth:"10%",mRender:S}],dblClick:P,onClick:O,oScroller:{displayBuffer:100,rowHeight:26}}),a("#pageObjectTable").udeTable().fnSetCheckbox("pageObjectTable"),La=!1,a("input[name='pageObjectTable_chk_all']").unbind("click"),a("input[name='pageObjectTable_chk_all']").bind("click",function(){f()})}function N(b){a("#pageObjectTableM").udeTable({data:b,columns:[{sTitle:"",mData:"id",sWidth:"5%",bSort:!1,mRender:R},{sTitle:a.i18n.prop("ude.page.config.pageObject.pageObjectJs.setData_elementType"),mData:"elementType",sWidth:"20%"},{sTitle:a.i18n.prop("ude.page.config.pageObject.pageObjectJs.setData_name"),mData:"name",sWidth:"25%"},{sTitle:a.i18n.prop("ude.page.config.pageObject.pageObjectJs.setData_description"),mData:"description",sWidth:"50%"}],dblClick:s}),a("#pageObjectTableM").udeTable().fnSetCheckbox("pageObjectTableM"),Ma=!1,a("input[name='pageObjectTableM_chk_all']").unbind("click"),a("input[name='pageObjectTableM_chk_all']").bind("click",function(){g()})}function O(b){var c=b.resourceId?b.resourceId:"",d=b.text?b.text:"";d||(d=b.contentDesc?b.contentDesc:"");var e=b.elementXpath?b.elementXpath:"",f=c+"::"+d+"::"+e;a("#savedImage").parent().hasClass("active")&&(f="saved::"+f),a(".hotspot").removeClass("showborder");var g=document.getElementById(f);a(g).addClass("showborder")}function P(a){t(a)}function Q(b,c,d){var e,f=a("<div class='cell-widget' align='center'/>");if(!d.syncInfo||"1"!=d.syncInfo&&"2"!=d.syncInfo)var e=a("<input type='checkbox' name='check' value='"+b+"'/> ");else var e=a("<input type='checkbox' name='check' value='"+b+"' checked/> ");return f.append(e),a("<div/>").append(f).html()}function R(b,c,d){var e=a("<div class='cell-widget' align='center'/>"),f=a("<input type='checkbox' name='checkM' value='"+b+"'/> ");return e.append(f),a("<div/>").append(e).html()}function S(a,b,c){return a&&"1"==a?"\u65b0\u589e":a&&"2"==a?"\u5220\u9664":"\u5df2\u5b58\u5728"}function T(a,b,c){return c.text&&""!=c.text?c.text:c.contentDesc}function U(){a("#caserefresh").hide(),a("#caserefreshDIV").hide(),a("#caseName").prop("maxlength",40),a("#defaultInclude").prop("maxlength",20),a("#url").prop("maxlength",100),a("#descInfo").prop("maxlength",200),a("#caseSaveId").click(function(){V()&&W()})}function V(){var b=a.trim(a("#caseName").val());return!(!b||""===b)||(showMessage(a.i18n.prop("testcase.casejs.checkAvailability.caseName"),a("#caseDialog"),"error"),a("#caseName").focus(),!1)}function W(){var b=a.trim(a("#caseName").val()),c=function(b){if(b&&"0"===b.getCode()){var c=b.getParameter("caseName");"0"===c?aa():(showMessage(a.i18n.prop("testcase.casejs.testCaseRepeat.caseName"),a("#caseDialog"),"error"),a("#caseName").focus())}else{var d=b.getDetail();showMessage(d,a("#caseDialog"),"error")}};xa!==b?a.ude.rpc.testcaseRpc.testCaseRepeat(b,c):aa()}function X(b){a("#caseTable").udeTable().dataTable().fnClearTable();for(var c=null,d=0;d<b.length;d++)a("#caseTable").udeTable().fnAddRow(b[d]),Da===b[d].caseId&&(c=b[d],Da=null);if(c){a("#caseList").hide(),a("#caseEdit").show(),
a.ude.page.testcase.scenedesign.main.getSceneByCaseId(c.caseId);var e=ja(c.parentCaseId),f=pa(c.parentCaseId);a.ude.page.testcase.caseDesign.methodjs.initMethod(c,f,e)}else{var g=a("#caseTable").udeTable().fnGetSelectedRowData();a.ude.page.testcase.scenedesign.main.getSceneByCaseId(g.caseId)}}function Y(b){a("#caseTable").udeTable({data:b,columns:[{sTitle:a.i18n.prop("testcase.casejs.initTable.caseName"),mData:"caseName",sWidth:"20%",mRender:ga},{sTitle:a.i18n.prop("testcase.casejs.initTable.belongpage"),mData:"parentCaseId",sWidth:"43%",mRender:oa},{sTitle:a.i18n.prop("testcase.casejs.initTable.status"),mData:"status",sWidth:"7%",mRender:ia},{sTitle:"URL",mData:"url",sWidth:"0%",bVisible:!1},{sTitle:a.i18n.prop("testcase.casejs.initTable.uICompare"),mData:"uICompare",sWidth:"0%",mRender:ia,bVisible:!1},{sTitle:a.i18n.prop("testcase.casejs.initTable.descInfo"),mData:"descInfo",sWidth:"30%"},{sTitle:a.i18n.prop("testcase.casejs.initTable.refresh"),mData:"refresh",sWidth:"0%",mRender:ia,bVisible:!1}],dblClick:function(b){_(),a.ude.page.testcase.scenedesign.main.getSceneByCaseId(b.caseId)}})}function Z(){wa={},a("#caseName").val(""),a("#casestatus").attr("checked",!0),a("#defaultInclude").val(""),a("#url").val(""),a("#caserefresh").attr("checked",!1),a("#caseUICompare").attr("checked",!1),a("#descInfo").val("")}function $(){Z(),a("#caseDialog").prop("add",!0),a.ude.dialog.open("caseDialog",{title:a.i18n.prop("testcase.casejs.newUser.caseDialog"),width:"500px"})}function _(){var b=a("#caseTable").udeTable().fnGetSelectedRowData();return null==b?void showMessage(a.i18n.prop("testcase.casejs.initUser.operPrompt"),null,"error"):(va=b.id,xa=b.caseName,wa=b,a("#caseName").val(b.caseName),"1"===b.status?a("#casestatus").attr("checked",!0):a("#casestatus").attr("checked",!1),a("#defaultInclude").val(b.defaultInclude),a("#url").val(b.url),"1"===b.refresh?a("#caserefresh").attr("checked",!0):a("#caserefresh").attr("checked",!1),"1"===b.uICompare?a("#caseUICompare").attr("checked",!0):a("#caseUICompare").attr("checked",!1),a("#descInfo").val(b.descInfo),a("#caseDialog").prop("add",!1),void a.ude.dialog.open("caseDialog",{title:a.i18n.prop("testcase.casejs.editUser.caseDialog"),width:"500px"}))}function aa(){var b=wa;b.caseName=a.trim(a("#caseName").val()),b.status=a("#casestatus").is(":checked")===!0?"1":"0",b.defaultInclude=a.trim(a("#defaultInclude").val()),b.url=a.trim(a("#url").val()),b.refresh=a("#caserefresh").is(":checked")===!0?"1":"0",b.uICompare=a("#caseUICompare").is(":checked")===!0?"1":"0",b.descInfo=a.trim(a("#descInfo").val()),a("#caseDialog").prop("add")&&(b.parentCaseId=za),"childPage"===ya.pageType?b.belongpage=ya.menuName:b.belongpage=null;var c=new DataCenter,d=new DataStore(qa);d.setRowSetName(qa),d.getRowSet().addRow(b),c.addDataStore(d),a("#caseDialog").prop("add")?ba(c):(b.id=va,ca(c))}function ba(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,e=function(b){if(b&&"0"===b.getCode()){var c=b.getSingleDataStore();d=c.getRowSet().getRow(0).data,a("#caseTable").udeTable().fnAddRow(d),a.ude.dialog.close()}else{var e=b.getDetail();showMessage(e,a("#caseDialog"),"error")}};a.ude.rpc.testcaseRpc.addUser(b,e)}function ca(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,e=function(b){if(b&&"0"===b.getCode())a("#caseTable").udeTable().fnUpdateRow(d),a.ude.dialog.close();else{var c=b.getDetail();showMessage(c,a("#caseDialog"),"error")}};a.ude.rpc.testcaseRpc.editUser(b,e)}function da(){var b=a("#caseTable").udeTable().fnGetSelectedRowData();return b?void a.ude.util.confirm(a.i18n.prop("testcase.casejs.deleteUser.caseDialogQ"),ea):void showMessage(a.i18n.prop("testcase.casejs.deleteUser.caseDialog"),null,"error")}function ea(){var b=a("#caseTable").udeTable().fnGetSelectedRowData();a.ude.rpc.testcaseRpc.deleteUser(b.caseId,fa)}function fa(b){if(b&&"0"===b.getCode())a("#caseTable").udeTable().fnDeleteRow();else{var c=b.getDetail();showMessage(c,null,"error")}}function ga(b,c){var d=a("<div class='cell'></div>"),e=a("<a href='#' style='text-decoration:underline;' onclick='$.ude.page.testcase.caseDesign.main.caseNameOnclick(event)'>"+b+"</a>");return d.append(e),d.html()}function ha(b){a("#caseList").hide(),a("#caseEdit").show(),a.ude.page.testcase.scenedesign.main.clearnCurrentNode();var c=a("#caseTable").udeTable().fnGetSelectedRowData();a.ude.page.testcase.scenedesign.main.getSceneByCaseId(c.caseId);var d=ja(c.parentCaseId),e=pa(c.parentCaseId);a.ude.page.testcase.caseDesign.methodjs.initMethod(c,e,d,Ea),na(ya.ismenu,c.parentCaseId)}function ia(b,c){return b="1"===b?a.i18n.prop("testcase.casejs.renderYorN.yes"):a.i18n.prop("testcase.casejs.renderYorN.no")}function ja(b){var c="";"1"===ya.ismenu?c=a("#menuTree").udeTree().getNodeByMenuId(b):"2"===ya.ismenu&&(c=a("#notMenuTree").udeTree().getNodeByMenuId(b));var d="",e="",f="";return"pageMenu"===c.pageType||"childPage"===c.pageType?(d=c.menuId,f="'"+d+"'"+ka(c,e)):(d="",f=ka(c,e).substring(1)),f}function ka(a,b){if(a.isParent){var c=a.children;if(c)for(var d=0;d<c.length;d++)"childPage"===c[d].pageType&&(b+=",'"+c[d].menuId+"'"),b=ka(c[d],b)}return b}function la(a,b){if(a.isParent){var c=a.children;if(c)for(var d=0;d<c.length;d++)"pageMenu"!==c[d].pageType&&"childPage"!==c[d].pageType||(b+=",'"+c[d].menuId+"'"),b=la(c[d],b)}return b}function ma(b,c,d){a.ude.page.config.projectStructure.main.caseClickSelectNode(d),Da=b}function na(b,c){var d=a("1"===b?"#menuTree":"#notMenuTree"),e=a("#caseList").find(".common-content-top").width()-a("#caseLoadeTitle_caseL").prev().width()-a("#caseList").find(".common-right").width(),f=a("#caseEditMethod").find(".common-content-top").width()-a("#caseLoadeTitle_caseM").prev().width()-a("#caseEditMethod").find(".common-right").width(),g=0!==e?e:f;a("div[id*='caseLoadeOut']").css("width",g-190),a("div[id*='caseLoadeTitle']").children().remove(),a(".caseloadeoutMoveR").remove(),a(".caseloadeoutMoveL").remove(),a("div[id*='caseLoadeTitle']").css("margin-left","0px"),a("div[id*='caseLoadeTitle']").css("width","auto");var h=[];h=c&&c.length>0?d.udeTree().getNodeByMenuId(c):d.udeTree().getSelectedNode();for(var i=!1;h.parentTId&&"-1"!==h.parentMenuId;){var j=h.name,k=h.menuId;i?a("div[id*='caseLoadeTitle']").prepend("<div></div>"):i=!0;var l=a("<span id='"+k+"'>"+j+"</span>").bind("click",function(a){});a("div[id*='caseLoadeTitle']").prepend(l),h=d.udeTree().getNodeByTId(h.parentTId)}i?a("div[id*='caseLoadeTitle']").prepend("<label><strong>\u3010</strong></label>"):"",i?a("div[id*='caseLoadeTitle']").append("<label><strong>\u3011</strong></label>"):"";var m=a(a("div[id*='caseLoadeTitle']")[0]).width()-a(a("div[id*='caseLoadeOut']")[0]).width(),n=a(a("div[id*='caseLoadeTitle']")[1]).width()-a(a("div[id*='caseLoadeOut']")[1]).width(),o=0===a("#caseList").find(".common-content-top").width()?n:m;o>=0&&(a("div[id*='caseLoadeTitle']").css("width",a("div[id*='caseLoadeOut']").width()+1e3),a("div[id*='caseLoadeOut']").prev().after(a("<div class='caseloadeoutMoveL'></div>").bind("click",function(){var b=a("div[id*='caseLoadeTitle']").css("margin-left"),c=parseInt(b.substring(0,b.length-2));c<0&&a("div[id*='caseLoadeTitle']").css("margin-left",c+80+"px")})),a("div[id*='caseLoadeOut']").after(a("<div class='caseloadeoutMoveR'></div>").bind("click",function(b){var c=a("div[id*='caseLoadeTitle']").css("margin-left"),d=parseInt(c.substring(0,c.length-2)),e=a(a(".caseloadeoutMoveR")[0]),f=a(a(".caseloadeoutMoveR")[1]),g=e.offset().left-e.prev().children().find("label:last").offset().left,h=f.offset().left-f.prev().children().find("label:last").offset().left,i=0!==g?g:h;i<30&&a("div[id*='caseLoadeTitle']").css("margin-left",d-80+"px")})))}function oa(b){var c;c=a(a("#t1").is(":hidden")?"#notMenuTree":"#menuTree");for(var d=c.udeTree().getNodeByMenuId(b),e=d.name;d.parentTId&&"-1"!==d.parentMenuId;){d.menuId;if(d=c.udeTree().getNodeByTId(d.parentTId),"-1"==d.parentMenuId)break;e=d.name+"."+e}return e}function pa(b){var c;c=a(a("#t1").is(":hidden")?"#notMenuTree":"#menuTree");var d=c.udeTree().getNodeByMenuId(b),e="";for("childPage"!=d.pageType&&(e=d.name);d.parentTId&&"-1"!==d.parentMenuId;){d.menuId;if(d=c.udeTree().getNodeByTId(d.parentTId),"-1"==d.parentMenuId)break;"childPage"!=d.pageType&&(e=""==e?d.name:d.name+"."+e)}return e}a.ude.page.testcase.caseDesign.main={init:b,initAppPage:l,caseNameOnclick:ha,treeClick:c,initResizeHandler:d,caseNameOnclickByScene:ma,refreshImage:L,setData:M,setDataM:N};var qa="com.neusoft.utf.portal.common.entity.TestcaseLevel",ra="com.neusoft.utf.portal.config.projectstructure.entity.UtfProjectAnalyseResult",sa="com.neusoft.utf.portal.config.pageobject.entity.UtfPageAnalyseResult",ta="com.neusoft.utf.portal.config.pageobject.entity.UtfPageAnalyseResultForApp",ua="com.neusoft.utf.portal.common.entity.TestcaseEvent",va=null,wa={},xa=null,ya=null,za="",Aa=null,Ba="",Ca=1,Da=null,Ea=null,Fa=480,Ga=270,Ha=480,Ia=270,Ja={},Ka=0,La=!1,Ma=!1,Na=new Array,Oa=null,Pa=null,Qa=null,Ra="",Sa=null,Ta=null,Ua=270;a.ude.page.testcase.caseDesign}(jQuery);