/* All right reserved by Neusoft Co. Ltd. 2016-10-14 09:10:51 */
!function(a){function b(){a("#projectTypehead").data("searchKeyWord",null),a("#projectTypehead").data("searchKey",null),a("#projectUserTypehead").data("searchProjectUserKeyWord",null),a("#projectUserTypehead").data("searchProjectUserKey",null),a("#projectTable").data("projectStore",null),a("#projectUserTable").data("projectUserStore",null)}function c(){return a("#methodTable").data("methodStore")}function d(b){a("#methodTable").data("methodStore",b),b.addRowData=function(a){b.getRowSet().addRow(a)},b.deleteRowData=function(a,c){c=c?c:"id";for(var d=b.getRowSet().getRowCount(),e=null,f=-1,g=0;g<d;g++)if(e=b.getRowSet().getRow(g),e.getItemValue(c)==a[c]){f=g;break}f<0||b.getRowSet().deleteRow(f)},b.updateRowData=function(a,c){c=c?c:"id";for(var d=b.getRowSet().getRowCount(),e=null,f=0;f<d&&(e=b.getRowSet().getRow(f),e.getItemValue(c)!=a[c]);f++);if(e)for(var g in a)e.setItemValue(g,a[g])}}function e(){return a("#projectUserTable").data("projectUserStore")}function f(b){a("#eventTable").data("eventStore",b),b.addRowData=function(a){b.getRowSet().addRow(a)},b.deleteRowData=function(a,c){c=c?c:"id";for(var d=b.getRowSet().getRowCount(),e=null,f=-1,g=0;g<d;g++)if(e=b.getRowSet().getRow(g),e.getItemValue(c)==a[c]){f=g;break}f<0||b.getRowSet().deleteRow(f)},b.updateRowData=function(a,c){c=c?c:"id";for(var d=b.getRowSet().getRowCount(),e=null,f=0;f<d&&(e=b.getRowSet().getRow(f),e.getItemValue(c)!=a[c]);f++);if(e)for(var g in a)e.setItemValue(g,a[g])}}function g(b){a("#projectTypehead").data("searchKeyWord",b)}function h(){return a("#projectTypehead").data("searchKeyWord")}function i(b){a("#projectTypehead").data("searchKey",b)}function j(){return a("#projectTypehead").data("searchKey")}function k(b){a("#projectUserTypehead").data("projectUserSearchKeyWord",b)}function l(){return a("#projectUserTypehead").data("projectUserSearchKeyWord")}function m(b){a("#projectUserTypehead").data("projectUserSearchKey",b)}function n(){return a("#projectUserTypehead").data("projectUserSearchKey")}a.ude.page.testcase.caseDesign.editparameter={initParameters:b,getMethodStore:c,setMethodStore:d,getProjectUserStore:e,setEventStore:f,setSearchKeyWord:g,getSearchKeyWord:h,setSearchKey:i,getSearchKey:j,setProjectUserSearchKeyWord:k,getProjectUserSearchKeyWord:l,setProjectUserSearchKey:m,getProjectUserSearchKey:n}}(jQuery),function(a){function b(a){a!==!1&&e(),p(),q()}function c(){return a.ude.page.testcase.caseDesign.main.getCurrentScene()}function d(){return a.ude.page.testcase.caseDesign.main.getCurrentParamGroup()}function e(b){a("#eventTable").udeTable({data:b,bSort:!1,columns:[{sTitle:"",mData:"id",sWidth:"5%",mRender:ka,fnClickCallback:function(){Pa=!0}},{sTitle:a.i18n.prop("testcase.caseeditevent.initEventGrid.controlType"),mData:"controlType",sWidth:"8%",mRender:j},{sTitle:"\u63a7\u4ef6\u6587\u672c",mData:"name",sWidth:"13%",mRender:n},{sTitle:"\u8def\u5f84",mData:"name",sWidth:"10%",mRender:k},{sTitle:"\u8def\u5f84\u4f18\u5148",mData:"name",sWidth:"6%",mRender:f},{sTitle:"\u6807\u8bc6",mData:"name",sWidth:"10%",mRender:l},{sTitle:a.i18n.prop("testcase.caseeditevent.initEventGrid.operActionId"),mData:"operActionId",sWidth:"12%"},{sTitle:a.i18n.prop("testcase.caseeditevent.initEventGrid.varValue"),mData:ja,sWidth:"16%"},{sTitle:"\u4f4d\u7f6e",mData:"name",sWidth:"8%",mRender:m},{sTitle:a.i18n.prop("testcase.caseeditevent.initEventGrid.eventDesc"),mData:"eventDesc",sWidth:"12%"}],dblClick:function(a){},onClick:function(b){Pa||(a("#eventTable_chk_all").attr("checked",!1),a("input[name='check']").attr("checked",!1),Sa=!1),Pa=!1;var c=b.id,d=a("input[value='"+c+"']");d.is(":checked")?d.prop("checked",!1):d.prop("checked",!0),Ha=b.controlId,Ha!=b.name?a.ude.page.testcase.caseDesign.main.setCurrentMenu(b.objectMenuId,b):""==Ha&&a.ude.page.testcase.caseDesign.main.setCurrentMenu("","")}}),a("#eventTable").udeTable().fnSetCheckbox("eventTable"),a("#eventTable_chk_all").bind("click",function(a){la()})}function f(a,b,c){var d=g(c);return d?"\u662f":"\u5426"}function g(a){try{var b=JSON.parse(a.name.replace(/'/g,'"')),c=b.priority?b.priority:"";return"xpath"==c}catch(a){return!1}}function h(a){try{var b=JSON.parse(a.name.replace(/'/g,'"')),c=b.disableAutoScroll?b.disableAutoScroll:"";return"yes"==c}catch(a){return!1}}function i(a,b){try{var c=JSON.parse(a.name.replace(/'/g,'"')),d=c[b]?c[b]:"";return d}catch(a){return""}}function j(a,b,c){try{var d=JSON.parse(c.name.replace(/'/g,'"')),b=d.type?d.type:"";return b}catch(b){return a}}function k(a,b,c){try{var d=JSON.parse(a.replace(/'/g,'"')),e=d.xpath?d.xpath:"";return e}catch(a){return""}}function l(a,b,c){try{var d=JSON.parse(a.replace(/'/g,'"')),e=d["resource-id"]?d["resource-id"]:"";return e}catch(a){return""}}function m(a,b,c){try{var d=JSON.parse(a.replace(/'/g,'"')),e=d.bounds?d.bounds:"";return e}catch(a){return""}}function n(a,b,c){try{var d=JSON.parse(a.replace(/'/g,'"')),e=d.text?d.text:"";return e||(e=d["content-desc"]?d["content-desc"]:""),e}catch(b){return a}}function o(){for(var b=a("#pageObjectTable").udeTable().fnGetData(),c=-1,d=0;d<b.length;d++){var e=b[d],f=e.id;if(Ha==f){c=d;break}}if(c!=-1){a("#autoPageObject").click(),a("#pageObjectTable").udeTable().fnSelectRowByIndex(c),a("#pageObjectTable").udeTable().fnScrollToSelectedRow();var e=a("#pageObjectTable").udeTable().fnGetSelectedRowData(),g=a("#pageObjectTable").udeTable().data("onClick");g(e)}else{for(var b=a("#pageObjectTableM").udeTable().fnGetData(),d=0;d<b.length;d++){var e=b[d],f=e.id;if(Ha==f){c=d;break}}if(c!=-1){a("#manualPageObject").click(),a("#pageObjectTableM").udeTable().fnSelectRowByIndex(c),a("#pageObjectTableM").udeTable().fnScrollToSelectedRow();var e=a("#pageObjectTableM").udeTable().fnGetSelectedRowData(),g=a("#pageObjectTableM").udeTable().data("onClick");g(e)}}}function p(){Sa=!1,a("#addObjectBtn").bind("click",function(a){y()}),a("#addObjectBtnSub").bind("click",function(a){z()}),a("#addParameterBtn").bind("click",function(a){H()}),a("#addParameterBtnSub").bind("click",function(a){I()}),a("#addEventBtn").bind("click",function(a){P()}),a("#editEventBtn").bind("click",function(a){T()}),a("#upEventBtn").bind("click",function(a){Z()}),a("#downEventBtn").bind("click",function(a){$()}),a("#deleteEventBtn").bind("click",function(a){W()}),a("#eventCancelId").bind("click",function(a){Ra=null}),a(".select2-result-label").live("mouseover",function(){var b=a(this).text(),c=a("#controlId").udeSelect().getData();if(c)for(var d=0;d<c.length;d++){var e=c[d];e.name==b&&e.title&&a(this).attr("title",e.title)}}),a("#interactiveObjectDiv").find("input:radio").bind("click",function(a){_()}),a("#interactiveTypeDiv").find("input:radio").bind("click",function(a){aa()}),Ba=a("#eventElementType").udeSelect({onChange:function(){var b=a("#eventElementType").udeSelect().getNameValue().toLowerCase();"gridcell"===b||"gridrow"===b||"treenode"===b?(a("#textTr").hide(),a("#gridTr").show(),"gridcell"===b?(a("#gridIdTitleId").show(),a("#rowIdTitleId").show(),a("#treeIdTitleId").hide(),a("#treeNodeIdTitleId").hide(),a("#columnIdTitleTd").show(),a("#columnIdTextTd").show()):"gridrow"===b?(a("#gridIdTitleId").show(),a("#rowIdTitleId").show(),a("#treeIdTitleId").hide(),a("#treeNodeIdTitleId").hide(),a("#columnIdTitleTd").hide(),a("#columnIdTextTd").hide()):(a("#gridIdTitleId").hide(),a("#rowIdTitleId").hide(),a("#treeIdTitleId").show(),a("#treeNodeIdTitleId").show(),a("#columnIdTitleTd").hide(),a("#columnIdTextTd").hide())):(a("#textTr").show(),a("#gridTr").hide())}}),a("#controlId").udeSelect({onChange:function(){var b=a("#controlId").udeSelect().getNameValue();if(b){var c=a("#operActionId").udeSelect().getNameValue(),d=new RegExp("(^set)|(^sendKey)");a("#eventOper").is(":checked")&&d.test(c)&&a("#varId").udeSelect().setValue(b)}}}),a("#sourceVarId").udeSelect({}),Da=a("#operActionId").udeSelect({onChange:function(){var b=a("#operActionId").udeSelect().getValue(),c=a("#controlType").udeSelect().getValue();if("click"!=b&&"longPress"!=b||"custom"!=c)a("#clickConfig").hide();else{a("#clickConfig").show();var d=a("#verticalPosition").val(),e=a("#horizontalPosition").val();d||a("#verticalPosition").val(50),e||a("#horizontalPosition").val(80)}if(b&&"scroll"==b.match("^scroll")&&"custom"==c){a("#scrollConfig").show();var f=a("#scrollLength").val(),g=a("#scrollTime").val();f||a("#scrollLength").val(80),g||a("#scrollTime").val(3)}else a("#scrollConfig").hide();!b||"custom"!=c||"scroll"!=b.match("^scroll")&&"click"!=b&&"longPress"!=b?(a("#loopBasic").hide(),a("#loopConfig").hide()):(a("#loopBasic").show(),a("#loopConfig").show())}}),Ca=a("#controlType").udeSelect({onChange:function(){var b=a("#controlType").udeSelect().getValue(),c=a("#controlType").udeSelect().getSelectData();c[b]&&(a("#eventOper").is(":checked")&&c[b][0]&&(a("#operActionId").udeSelect().setData(c[b]),a("#operActionId").udeSelect().setValue(c[b][0].id)),ea(b))}}),a(".common-buttons-item").unbind("setDisableT"),a(".common-buttons-item").unbind("setDisableF"),a(".common-buttons-item").bind("setDisableT",function(b){var c=b.currentTarget.className;b.currentTarget.className=c.indexOf("-unavailable")<0?c+"-unavailable":c,a(b.currentTarget).attr("disabled","disabled")}),a(".common-buttons-item").bind("setDisableF",function(b){var c=b.currentTarget.className;b.currentTarget.className=c.replace("-unavailable",""),a(b.currentTarget).removeAttr("disabled")}),a("#loopBasicCheckBox").bind("change",function(b){var c=a(this).is(":checked");c?a("#loopConfig").show():a("#loopConfig").hide()}),a("#loopAlways").bind("change",function(b){var c=a(this).is(":checked");c?(a("#loopCount").val(""),a("#loopCount").attr("disabled","disabled")):a("#loopCount").removeAttr("disabled")})}function q(){a("#eventWait").prop("maxlength",10),a("#eventSaveId").click(function(){var b=a.trim(a("#controlType").val());if(!b||""===b)return showMessage(a.i18n.prop("testcase.caseeditevent.initEventDialog.controlType"),a("#eventDialog"),"error"),void a("#controlType").udeSelect().focus();var c=a.trim(a("#operActionId").val());if(!c||""===c)return showMessage(a.i18n.prop("testcase.caseeditevent.initEventDialog.operActionId"),a("#eventDialog"),"error"),void a("#operActionId").udeSelect().focus();var d=a("#interactiveObjectDiv").find("input:radio:checked").val(),e=a.trim(a("#varId").val()),f=a.trim(a("#controlId").val());if(e&&""!==e||!f||""===f)R();else{var d=a("#controlId").udeSelect().getNameValue(),g=a("#operActionId").udeSelect().getNameValue(),h=new RegExp("(^set)|(^sendKey)"),i=!1;if(a("#eventOper").is(":checked")&&h.test(g)){for(var j=a("#varId").udeSelect().getData(),k=0;k<j.length;k++)if(d==j[k].id){i=!0;break}i?a.ude.util.confirm(a.i18n.prop("testcase.caseeditevent.initEventDialog.isUseParam")+'"'+d+'"?',r,R):a.ude.util.confirm(a.i18n.prop("testcase.caseeditevent.initEventDialog.isAddParam")+'"'+d+'"?',s,R)}else R()}}),a("#objectSaveId").click(function(){var b=a.trim(a("#eventElementType").val());if(!b||""===b)return showMessage(a.i18n.prop("testcase.caseeditevent.initEventDialog.objectElementType"),a("#objectDialog"),"error"),void a("#eventElementType").focus();var c="";if("gridcell"===b.toLowerCase()){var d=a("#rowId").val(),e=a("#columnId").val();if(!d||""===d||!e||""===e)return showMessage(a.i18n.prop("testcase.caseeditevent.initEventDialog.objectEventName"),a("#objectDialog"),"error"),void a("#girdId").focus();c=a.trim(a("#girdId").val())+",${"+a("#rowId").val()+"},"+a.trim(a("#columnId").val())}else if("gridrow"===b.toLowerCase()||"treenode"===b.toLowerCase()){var d=a("#rowId").val();if(!d||""===d)return showMessage(a.i18n.prop("testcase.caseeditevent.initEventDialog.objectEventName"),a("#objectDialog"),"error"),void a("#girdId").focus();c=a.trim(a("#girdId").val())+",${"+a("#rowId").val()+"}"}else if(c=a.trim(a("#name").val()),!c||""===c)return showMessage(a.i18n.prop("testcase.caseeditevent.initEventDialog.objectEventName"),a("#objectDialog"),"error"),void a("#name").focus();return c.indexOf('"')>0?void showMessage("\u63a7\u4ef6\u6807\u793a\u4e2d\u4e0d\u80fd\u5b58\u5728\u53cc\u5f15\u53f7",a("#objectDialog"),"error"):void B()}),a("#parameterSaveId").click(function(){var b=a.trim(a("#parameterName").val());return b&&""!==b?void J():(showMessage(a.i18n.prop("testcase.caseeditevent.initEventDialog.parameterName"),a("#parameterDialog"),"error"),void a("#parameterName").focus())}),a("#addParamOperBtnExec").click(function(){na()}),a("#moveupParamOperBtnExec").click(function(){oa()}),a("#movedownParamOperBtnExec").click(function(){pa()}),a("#deleteParamOperBtnExec").click(function(){qa()}),a("#openCloseParam").click(function(){a(this).hasClass("opt-openall")?(a("#paramOperator").show(),a("#Dialog_paramOperateDivExec").show(),a(this).removeClass("opt-openall"),a(this).addClass("opt-closeup")):(a("#paramOperator").hide(),a("#Dialog_paramOperateDivExec").hide(),a(this).removeClass("opt-closeup"),a(this).addClass("opt-openall"))}),a(document).off("click",".opt-calculate"),a(document).on("click",".opt-calculate",function(b){for(var c=a(this).parent().parent()[0],d=a("#paramOperateTbodyExec tr"),e=[],f=0;f<d.length;f++){var g=ta(d[f]);if(g&&e.push(g),d[f]==c)break}var h=a("#controlId").udeSelect().getNameValue();va(h,JSON.stringify(e))}),a(document).off("click",".eventcheck"),a(document).on("click",".eventcheck",function(a){a.preventDefault()})}function r(){var b=a("#controlId").udeSelect().getNameValue();a("#varId").udeSelect().setValue(b),R()}function s(){var b=a("#controlId").udeSelect().getNameValue(),c="",d={};d.varName=b,d.varType="2",d.varGroup=c,d.varValue="",d.varLevel="3",d.caseId=za.caseId,d.sceneId="";var e="",f="",g=new DataCenter,h=new DataStore(ya);h.setRowSetName(ya),h.getRowSet().addRow(d),g.addDataStore(h),a.ude.rpc.param.addUser(g,e,f,t)}function t(){var b=Aa;b.caseId=za.caseId,b.methodId=a("#methodTable").udeTable().fnGetSelectedRowData().methodId,b.controlType=a("#controlType").val(),b.controlId=a.trim(a("#controlId").val()),b.operActionId=a.trim(a("#operActionId").val());var c=a("#controlId").udeSelect().getNameValue();b.varId=c,b.wait=a.trim(a("#eventWait").val()),b.eventDesc=a.trim(a("#eventDesc").val()),b.interactiveObject=a("#interactiveObjectDiv").find("input:radio:checked").val(),b.interactiveType=a("#interactiveTypeDiv").find("input:radio:checked").val();var d=new DataCenter,e=new DataStore(xa);e.setRowSetName(xa),e.getRowSet().addRow(b),d.addDataStore(e),a("#eventDialog").prop("add")?U(d):V(d)}function u(b,e){za=b,Na=e;var f=a("#methodTable").udeTable().fnGetSelectedRowData(),g=f.methodId,h=c();if(h){var i=h,j=d();a.ude.rpc.testcaseeditrpc.getEventByMethodId(v,g,i,j)}else a.ude.rpc.testcaseeditrpc.getEventByMethodId(v,g,"","")}function v(b){if(!b)return void showMessage(a.i18n.prop("testcase.caseeditevent.getEventByMethodIdSuccess.showMessage"),null,"error");if("1"===b.getCode())return void showMessage(b.getDetail(),null,"error");var c=function(a){if(!a)return void showMessage("\u83b7\u53d6\u52a8\u6001\u53c2\u6570\u5931\u8d25",null,"error");if("1"===a.getCode())return void showMessage(b.getDetail(),null,"error");for(var c=b.getDataStore("eventStore"),d=c.getRowSet().getData(),e=a.getDataStore("DynamicParams"),f=e.getRowSet().getData(),g=0;g<d.length;g++){var h=d[g];if(!h.operActionId||"setParam"!=h.operActionId){var i=h.varId;if(h&&h.varType&&"var"==h.varType)if(h.varLevel&&"3"==h.varLevel)for(var j=0;j<f.length;j++){var k=f[j];if(k&&k.paramName&&k.paramName==i&&k.level&&"3"==k.level){h.varValue=k.value;break}}else if(h.varLevel&&"2"==h.varLevel)for(var j=0;j<f.length;j++){var k=f[j];if(k&&k.paramName&&k.paramName==i&&k.level&&"2"==k.level){h.varValue=k.value;break}}else if(h.varLevel&&"1"==h.varLevel)for(var j=0;j<f.length;j++){var k=f[j];if(k&&k.paramName&&k.paramName==i&&k.level&&"1"==k.level){h.varValue=k.value;break}}}}x(d)};a.ude.rpc.testcaseRpc.getDynamicParams(c)}function w(a){Qa=a}function x(b){a("#eventTable").udeTable().dataTable().fnClearTable(),a("#eventTable").udeTable().fnRedraw(b);var c=a("#eventTable").udeTable().fnGetSelectedRowData(),d=a("#eventTable").udeTable().data("onClick");if(b.length>0&&Qa&&c&&(Qa=!1,d(c)),b.length>0&&Oa){Oa=!1,c=a("#eventTable").udeTable().fnSelectRowByIndex(a("#eventTable").udeTable().fnGetData().length-1),d.selectedRowdata,c=a("#eventTable").udeTable().fnGetRowData(a("#eventTable").udeTable().fnGetData().length-1),a("#eventTable_chk_all").attr("checked",!1),a("input[name='check']").attr("checked",!1),Sa=!1;var e=c.id,f=a("input[value='"+e+"']");f.is(":checked")?f.prop("checked",!1):f.prop("checked",!0);var g=a("#eventTable").udeTable().fnGetData().length;a("#eventTable").udeTable().fnScrollToRow(g-1)}}function y(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();return null==b?void showMessage(a.i18n.prop("testcase.caseeditevent.addObject.showMessage"),a("#methodTable"),"error"):(A(),ga(),a("#objectDialog").prop("add",!0),void a.ude.dialog.open("objectDialog",{title:a.i18n.prop("testcase.caseeditevent.addObject.objectDialog"),width:"500px"}))}function z(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();if(null==b)return void showMessage(a.i18n.prop("testcase.caseeditevent.addObject.showMessage"),a("#methodTable"),"error");A();var c=a("#controlType").udeSelect().getValue();a("#eventElementType").udeSelect().setValue(c);var d=c.toLowerCase();"gridcell"===d||"gridrow"===d||"treenode"===d?(a("#textTr").hide(),a("#gridTr").show(),"gridcell"===d?(a("#gridIdTitleId").show(),a("#rowIdTitleId").show(),a("#treeIdTitleId").hide(),a("#treeNodeIdTitleId").hide(),a("#columnIdTitleTd").show(),a("#columnIdTextTd").show()):"gridrow"===d?(a("#gridIdTitleId").show(),a("#rowIdTitleId").show(),a("#treeIdTitleId").hide(),a("#treeNodeIdTitleId").hide(),a("#columnIdTitleTd").hide(),a("#columnIdTextTd").hide()):(a("#gridIdTitleId").hide(),a("#rowIdTitleId").hide(),a("#treeIdTitleId").show(),a("#treeNodeIdTitleId").show(),a("#columnIdTitleTd").hide(),a("#columnIdTextTd").hide())):(a("#textTr").show(),a("#gridTr").hide()),a("#objectDialog").prop("add",!0),a.ude.dialog.open("objectDialog",{title:a.i18n.prop("testcase.caseeditevent.addObject.objectDialog"),width:"500px"})}function A(){a("#eventElementType").val(""),a("#name").val(""),a("#girdId").val(""),a("#rowId").val(""),a("#columnId").val(""),a("#description").val(""),a("#belongFrame").val("")}function B(){var b=function(b){var c=b.getDataStore("utfProjectAnalyseResultList"),d=c.getRowSet().getRow(0).getItemValue("menuId");Ra=d;var e={},f=a("#eventElementType").val();e.elementType=f;var g="";g="gridcell"===f.toLowerCase()?a.trim(a("#girdId").val())+",${"+a("#rowId").val()+"},"+a.trim(a("#columnId").val()):"gridrow"===f.toLowerCase()||"treenode"===f.toLowerCase()?a.trim(a("#girdId").val())+",${"+a("#rowId").val()+"}":a.trim(a("#name").val()),e.name=g,e.description=a.trim(a("#description").val()),e.belongFrame=a.trim(a("#belongFrame").val()),e.analyseKind="manual",e.isEnabled="T",e.menuId=Ra;var b=new DataCenter,h=new DataStore(wa);h.setRowSetName(wa),h.getRowSet().addRow(e),b.addDataStore(h),a.ude.rpc.testcaseeditrpc.addObject(b,C),a.ude.dialog.close(),showMessage(a.i18n.prop("testcase.caseeditevent.saveObject.showMessage"),a("#eventTable"),"")};a.ude.page.testcase.caseDesign.main.addMenuTree(b)}function C(b){if(b&&"0"===b.getCode())ga(),window.setTimeout(E(b),500);else{var c=b.getDetail();showMessage(c,a("#objectDialog"),"error")}}function D(b){var c=a("#interactiveObjectDiv").find("input:radio:checked").val();if("pageObj"===c){var d=b.getParameter("elementType"),e=b.getParameter("id");a("#controlType").udeSelect().setValue(d);var f=a("#controlType").udeSelect().getValue(),g=a("#controlType").udeSelect().getSelectData();g[f]&&(a("#eventOper").is(":checked")&&g[f][0]&&(a("#operActionId").udeSelect().setData(g[f]),a("#operActionId").udeSelect().setValue(g[f][0].id)),ea(f)),window.setTimeout(G(e),500)}else"sqlObj"===c&&(a("#controlType").udeSelect().setData(La),a("#controlType").udeSelect().setValue(La.id))}function E(a){return function(){D(a)}}function F(b){a("#controlId").udeSelect().setValue(b)}function G(a){return function(){F(a)}}function H(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();return null==b?void showMessage(a.i18n.prop("testcase.caseeditevent.addObject.showMessage"),a("#methodTable"),"error"):(a("#parameterName").val(""),a("#parameterGroup").val(""),a("#parameterValue").val(""),a("#parameterTypeA").attr("checked",!0),a("#parameterLevelB").attr("checked",!0),a("#parameterGroup").attr("readonly",!1),a("#parameterValue").attr("readonly",!1),void a.ude.dialog.open("parameterDialog",{title:a.i18n.prop("testcase.caseeditevent.addParameter.parameterDialog"),width:"500px"}))}function I(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();if(null==b)return void showMessage(a.i18n.prop("testcase.caseeditevent.addObject.showMessage"),a("#methodTable"),"error");var c=a.trim(a("#controlType").val());"custom"!=c?a("#parameterName").val(a("#controlId").udeSelect().getNameValue()):a("#parameterName").val("");var e=d();a("#parameterGroup").val(e),a("#parameterValue").val(""),a("#parameterTypeA").attr("checked",!0),a("#parameterLevelB").attr("checked",!0),a("#parameterGroup").attr("readonly",!1),a("#parameterValue").attr("readonly",!1),a.ude.dialog.open("parameterDialog",{title:a.i18n.prop("testcase.caseeditevent.addParameter.parameterDialog"),width:"500px"})}function J(){var b={};b.varName=a.trim(a("#parameterName").val());var c=a.trim(a("#parameterValue").val());c?b.varType="1":b.varType="2",b.varGroup=a.trim(a("#parameterGroup").val()),b.varValue=c,b.varLevel=a('input:radio[name="parameterLevelG"]:checked').val(),b.caseId=za.caseId,b.sceneId="";var d="",e="",f=new DataCenter,g=new DataStore(ya);g.setRowSetName(ya),g.getRowSet().addRow(b),f.addDataStore(g),a.ude.rpc.param.addUser(f,d,e,K)}function K(b){if(b&&"0"===b.getCode())a.ude.page.testcase.sqlConfig.main.initSql(),a.ude.page.testcase.caseDesign.main.initResizeHandler(),da(),window.setTimeout(M(b),500),a.ude.dialog.close(),showMessage(a.i18n.prop("testcase.caseeditevent.newParamComplete.showMessage"),a("#eventTable"),"");else{var c=b.getDetail();showMessage(c,a("#parameterDialog"),"error")}}function L(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,e=(a("#varId").udeSelect().getData(),a("#interactiveObjectDiv").find("input:radio:checked").val());a("#varId").udeSelect().setValue(d.varName),"sqlObj"===e&&(a("#controlType").udeSelect().setData(La),a("#controlType").udeSelect().setValue(La.id))}function M(a){return function(){L(a)}}function N(){var b=a('input:radio[name="parameterTypeG"]:checked').val();"2"===b?(a("#parameterValue").val(""),a("#parameterValue").attr("readonly",!0)):a("#parameterValue").attr("readonly",!1)}function O(b){var c=a('input:radio[name="parameterLevelG"]:checked').val();"3"===c?a("#parameterGroup").attr("readonly",!1):"1"===c&&(a("#parameterGroup").val(""),a("#parameterGroup").attr("readonly",!0))}function P(){a("#clickConfig").hide(),a("#scrollConfig").hide(),a("#loopBasic").hide(),a("#loopConfig").hide();var b=a("#methodTable").udeTable().fnGetSelectedRowData();return null==b?void showMessage(a.i18n.prop("testcase.caseeditevent.addObject.showMessage"),a("#methodTable"),"error"):(a("#sqlTableDiv").hide(),Q(),a("#paramConfig").hide(),a("#horizontalPosition").val(80),a("#verticalPosition").val(50),a("#scrollLength").val(80),a("#scrollTime").val(3),a("#controlTextTable").hide(),a("#controlTextEdit").val(""),a("#eventDialog").prop("add",!0),a.ude.dialog.open("eventDialog",{title:a.i18n.prop("testcase.caseeditevent.addEvent.eventDialog"),width:"750px"}),a.ude.page.testcase.sqlConfig.main.initSql(),a.ude.page.testcase.caseDesign.main.initResizeHandler(),da(),ga(),a("#interactiveObjectDiv").find("input:radio").removeAttr("disabled"),a("#pageControl").attr("checked",!0),a("#interactiveTypeDiv").find("input:radio").removeAttr("disabled"),a("#eventOper").attr("checked",!0),a("#controlType").udeSelect().focus(),a("#pathPriority").attr("checked",!1),a("#disableAutoScroll").attr("checked",!1),a("#alwaysScreen").attr("checked",!1),void a("#optionalEvent").attr("checked",!1))}function Q(){Aa={},a("#controlType").udeSelect().setReadOnly(!1),a("#operActionId").udeSelect().setReadOnly(!1),a("#eventWait").val("1"),a("#eventDesc").val(""),a("#controlType").udeSelect().clear(),a("#controlId").udeSelect().clear(),a("#operActionId").udeSelect().clear(),a("#varId").udeSelect().clear(),a("#controlId").udeSelect().clear(),a("#horizontalPosition").val(""),a("#verticalPosition").val(""),a("#scrollLength").val(""),a("#scrollTime").val(""),a("#paramOperateTbodyExec").html(""),a("#loopBasicCheckBox").attr("checked",!1),a("#loopAlways").attr("checked",!1),a("#loopCount").val(""),Ea=null,Fa=null,Ga=null,Ha=null,Ia=null}function R(){var b=Aa;b.caseId=za.caseId,b.methodId=a("#methodTable").udeTable().fnGetSelectedRowData().methodId,b.controlType=a("#controlType").val(),"paramObj"===a("#interactiveObjectDiv").find("input:radio:checked").val()?b.controlId=a("#sourceVarId").val():b.controlId=a.trim(a("#controlId").val()),b.operActionId=a.trim(a("#operActionId").val()),b.varId=a("#varId").val(),b.wait=a.trim(a("#eventWait").val()),b.eventDesc=a.trim(a("#eventDesc").val()),b.interactiveObject=a("#interactiveObjectDiv").find("input:radio:checked").val(),b.interactiveType=a("#interactiveTypeDiv").find("input:radio:checked").val(),"setParam"==b.operActionId?b.paramOperations=sa():b.paramOperations="";var c=new DataCenter,d=new DataStore(xa);if(d.setRowSetName(xa),d.getRowSet().addRow(b),c.addDataStore(d),a("#eventDialog").prop("add"))U(c);else{var e=a("#controlId").udeSelect().getSelectData();if(e&&e.name){var f=S(e.name);c.addParameter("controlName",f)}V(c)}}function S(b){try{var c=a("#pathPriority").is(":checked"),d=JSON.parse(b.replace(/'/g,'"')),e=d.priority;c?d.priority="xpath":e&&"xpath"==e&&delete d.priority;var f=a("#disableAutoScroll").is(":checked"),g=d.disableAutoScroll;f?d.disableAutoScroll="yes":g&&"yes"==g&&delete d.disableAutoScroll;var h=a("#loopBasicCheckBox").is(":checked"),i=d.loopEvent;h?d.loopEvent="yes":i&&"yes"==i&&delete d.loopEvent;var j=a("#loopCount").val(),k=d.loopCount;j?d.loopCount=j:k&&delete d.loopCount;var l=a("#loopAlways").is(":checked"),m=d.loopAlways;l?d.loopAlways="yes":m&&"yes"==m&&delete d.loopAlways;var n=a("#alwaysScreen").is(":checked"),o=d.alwaysScreen;n?d.alwaysScreen="yes":o&&"yes"==o&&delete d.alwaysScreen;var p=a("#optionalEvent").is(":checked"),q=d.optionalEvent;p?d.optionalEvent="yes":q&&"yes"==q&&delete d.optionalEvent;var r=a.trim(a("#operActionId").val());if("click"==r||"longPress"==r){var s=a.trim(a("#verticalPosition").val()),t=a.trim(a("#horizontalPosition").val());d.heightOffset=s,d.widthOffset=t}else if(r&&"scroll"==r.match("^scroll")){var u=a.trim(a("#scrollLength").val()),v=a.trim(a("#scrollTime").val());d.scollPercentage=u,d.scollDuringTime=v}var w=a.trim(a("#controlTextEdit").val()),x=d.text?d.text:"";x||(x=d["content-desc"]?d["content-desc"]:""),w!=x&&(d.text=w,d["content-desc"]=w,d.textChanged="yes");var y=JSON.stringify(d),z=y.replace(/\"/g,"'");return z}catch(a){return b}}function T(){var b=a("input[name='check']:checked");if(b.length>1)return void showMessage("\u6bcf\u6b21\u53ea\u80fd\u4fee\u6539\u4e00\u4e2a\u6b65\u9aa4",null,"error");a("#clickConfig").hide(),a("#scrollConfig").hide(),a("#loopBasic").hide(),a("#loopConfig").hide();var c=a("#eventTable").udeTable().fnGetSelectedRowData();if(null==c)return void showMessage(a.i18n.prop("testcase.caseeditevent.editEvent.showMessage"),a("#eventTable"),"error");Q(),Aa=c,a("#eventWait").val(Aa.wait),a("#eventDesc").val(Aa.eventDesc),Ea=c.controlType,Fa=c.operActionId,a("#pathPriority").attr("checked",!1),a("#disableAutoScroll").attr("checked",!1),a("#alwaysScreen").attr("checked",!1),a("#optionalEvent").attr("checked",!1);var d=g(c);d&&a("#pathPriority").attr("checked",!0);var e=h(c);e&&a("#disableAutoScroll").attr("checked",!0);var f=i(c,"alwaysScreen");"yes"==f&&a("#alwaysScreen").attr("checked",!0);var j=i(c,"optionalEvent");if("yes"==j&&a("#optionalEvent").attr("checked",!0),"custom"==Ea){if(Fa&&("click"==Fa||"longPress"==Fa||"scroll"==Fa.match("^scroll"))){a("#loopAlways").removeAttr("disabled"),a("#loopCount").removeAttr("disabled");var k=i(c,"priority");k&&"location"==k&&a("#loopAlways").attr("disabled","disabled"),a("#loopBasic").show();var l=i(c,"loopEvent");if("yes"==l){a("#loopConfig").show(),a("#loopBasicCheckBox").attr("checked",!0);var m=i(c,"loopCount"),n=i(c,"loopAlways");"yes"==n?(a("#loopAlways").attr("checked",!0),a("#loopCount").val(""),a("#loopCount").attr("disabled","disabled")):(a("#loopAlways").attr("checked",!1),a("#loopCount").val(m),a("#loopCount").removeAttr("disabled"))}}if("click"==Fa||"longPress"==Fa){a("#clickConfig").show();var o=i(c,"heightOffset"),p=i(c,"widthOffset"),q=a.ude.page.testcase.caseDesign.main.getProjectOSType();"iOS"==q?(o||(o=0),p||(p=0)):(o||(o=50),p||(p=80)),a("#horizontalPosition").val(p),a("#verticalPosition").val(o)}else if(Fa&&"scroll"==Fa.match("^scroll")){a("#scrollConfig").show();var r=i(c,"scollPercentage"),s=i(c,"scollDuringTime");r||(r=80),s||(s=3),a("#scrollLength").val(r),a("#scrollTime").val(s)}a("#controlTextTable").show(),a("#controlTextEdit").val("");var t=i(c,"text");t||(t=i(c,"content-desc")),a("#controlTextEdit").val(t)}Ga=c.varId,Ha=c.controlId,Ia=c.name,a.ude.page.testcase.sqlConfig.main.initSql(),a.ude.page.testcase.caseDesign.main.initResizeHandler(),da(),ga();var u=c.interactiveObject;"pageObj"===u?a("#pageControl").attr("checked",!0):"sqlObj"===u?a("#queryDB").attr("checked",!0):(a("#parameterControl").attr("checked",!0),a("#parameterControl").click()),"operType"===c.interactiveType?a("#eventOper").attr("checked",!0):"assertType"===c.interactiveType?a("#eventAssert").attr("checked",!0):a("#eventTrendsDefine").attr("checked",!0),"pageObj"===u?a("#sqlTableDiv").hide():"sqlObj"===u?(a("#sqlTableDiv").show(),a("#sqlTable").udeTable().fnResize()):(a("#sqlTableDiv").hide(),a("#controlLabelTD").hide(),a("#controlTD").hide(),a("#sourceVarLabelTD").show(),a("#sourceVarTD").show()),a("#eventDialog").prop("add",!1),a.ude.dialog.open("eventDialog",{title:a.i18n.prop("testcase.caseeditevent.editEvent.eventDialog"),width:"750px"}),"defineType"===c.interactiveType?(a("#paramConfig").show(),ua(c.paramOperations)):a("#paramConfig").hide()}function U(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,e=function(b){if(b&&"0"===b.getCode()){var c=b.getSingleDataStore();d=c.getRowSet().getRow(0).data,a("#eventTable").udeTable().fnAddRow(d),Oa=!0,u(za,Na),a.ude.dialog.close()}else{var e=b.getDetail();showMessage(e,a("#eventDialog"),"error")}a.ude.page.testcase.caseDesign.main.setCurrentMenu(Ra)};a.ude.rpc.testcaseeditrpc.addEvent(b,e)}function V(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,e=function(b){if(b&&"0"===b.getCode()){var c=b.getSingleDataStore();d=c.getRowSet().getRow(0).data,a("#eventTable").udeTable().fnUpdateRow(d),u(za,Na),a.ude.dialog.close()}else{var e=b.getDetail();showMessage(e,a("#eventDialog"),"error")}};a.ude.rpc.testcaseeditrpc.editEventForMobile(b,e)}function W(){Ta=new Array;var b=a("input[name='check']:checked");return b.length>0?(a(b).each(function(){Ta.push(this.value)}),void(b.length>1?a.ude.util.confirm("\u662f\u5426\u786e\u8ba4\u5220\u9664\u591a\u4e2a\u6d4b\u8bd5\u6b65\u9aa4\uff1f",X):a.ude.util.confirm("\u662f\u5426\u786e\u8ba4\u5220\u9664\u5f53\u524d\u6d4b\u8bd5\u6b65\u9aa4\uff1f",X))):void showMessage("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u8981\u5220\u9664\u7684\u6b65\u9aa4",null,"error")}function X(){a.ude.rpc.testcaseeditrpc.deleteEvents(Ta,Y)}function Y(b){if(b&&"0"==b.getCode()){for(var c=a("#eventTable").udeTable().fnGetData(),d=new DataStore("recordDataStore",c),e=0;e<Ta.length;e++)for(var f=0;f<c.length;f++)if(Ta[e]===c[f].id){d.getRowSet().deleteRow(f);break}x(d.getRowSet().getData())}else{var g=b.getDetail();showMessage(g,null,"error")}}function Z(){var b=a("input[name='check']:checked");if(b.length>1)return void showMessage("\u6bcf\u6b21\u53ea\u80fd\u79fb\u52a8\u4e00\u4e2a\u6b65\u9aa4",null,"error");
var c=a("#eventTable").udeTable().fnGetSelectedRowData();if(!c)return void showMessage(a.i18n.prop("testcase.caseedit.upMethod.moveup"),a("#eventTable"),"error");var d=a("#eventTable").udeTable().fnGetSelectedRowDataIndex();if(0!==d){a("#eventTable").udeTable().fnMoveRow(c,"up");var e=a("#eventTable").udeTable().fnGetSelectedRowDataIndex(),f=a("#eventTable").udeTable().fnGetRowData(e+1).eventOrder,g=a("#eventTable").udeTable().fnGetSelectedRowData().eventOrder,h=a("#eventTable").udeTable().fnGetSelectedRowData();h.eventOrder=f;var i=a("#eventTable").udeTable().fnGetRowData(e+1);i.eventOrder=g;var j=new DataCenter,k=new DataStore(xa);k.setRowSetName(xa),k.getRowSet().addRow(h),k.getRowSet().addRow(i),j.addDataStore(k),a.ude.rpc.testcaseeditrpc.upORdownEvent(j)}}function $(){var b=a("input[name='check']:checked");if(b.length>1)return void showMessage("\u6bcf\u6b21\u53ea\u80fd\u79fb\u52a8\u4e00\u4e2a\u6b65\u9aa4",null,"error");var c=a("#eventTable").udeTable().fnGetSelectedRowData();if(!c)return void showMessage(a.i18n.prop("testcase.caseedit.upMethod.movedown"),a("#eventTable"),"error");var d=a("#eventTable").udeTable().fnGetSelectedRowDataIndex()+1,e=a("#eventTable").udeTable().fnGetData().length;if(d!==e){a("#eventTable").udeTable().fnMoveRow(c,"down");var f=a("#eventTable").udeTable().fnGetSelectedRowDataIndex(),g=a("#eventTable").udeTable().fnGetRowData(f-1).eventOrder,h=a("#eventTable").udeTable().fnGetSelectedRowData().eventOrder,i=a("#eventTable").udeTable().fnGetSelectedRowData();i.eventOrder=g;var j=a("#eventTable").udeTable().fnGetRowData(f-1);j.eventOrder=h;var k=new DataCenter,l=new DataStore(xa);l.setRowSetName(xa),l.getRowSet().addRow(i),l.getRowSet().addRow(j),k.addDataStore(l),a.ude.rpc.testcaseeditrpc.upORdownEvent(k)}}function _(){var b=a("#interactiveObjectDiv").find("input:radio:checked").val();"pageObj"===b?(a("#operActionId").udeSelect().setReadOnly(!1),a("#eventOper").removeAttr("disabled"),a("#eventTrendsDefine").removeAttr("disabled"),a("#eventOper").attr("checked",!0),a("#controlType").udeSelect().setReadOnly(!1),a("#controlType").udeSelect().clear(),a("#operActionId").udeSelect().clear(),a("#controlId").udeSelect().clear(),a("#sqlTableDiv").hide(),a("#controlLabelTD").show(),a("#controlTD").show(),a("#sourceVarLabelTD").hide(),a("#sourceVarTD").hide(),ga(),da()):"sqlObj"===b?(a("#operActionId").udeSelect().setReadOnly(!1),a("#eventAssert").attr("checked",!0),a("#eventOper").attr("disabled","disabled"),a("#eventTrendsDefine").removeAttr("disabled"),a("#controlLabelTD").show(),a("#controlTD").show(),a("#sourceVarLabelTD").hide(),a("#sourceVarTD").hide(),a("#controlType").udeSelect().setData(La),a("#controlType").udeSelect().setValue(La.id),a("#controlType").udeSelect().setReadOnly(!0),a("#controlId").udeSelect().clear(),a("#sqlTableDiv").show(),a("#sqlTable").udeTable().fnResize(),a.ude.rpc.testcaseeditrpc.queryAssertOper(ca),da()):"paramObj"===b&&(a("#eventAssert").attr("checked",!0),a("#eventOper").attr("disabled","disabled"),a("#eventTrendsDefine").attr("disabled","disabled"),a("#controlType").udeSelect().setData(Ma),a("#controlType").udeSelect().setValue(Ma.id),a("#controlType").udeSelect().setReadOnly(!0),a("#sqlTableDiv").hide(),a("#controlLabelTD").hide(),a("#controlTD").hide(),a("#sourceVarLabelTD").show(),a("#sourceVarTD").show(),a.ude.rpc.testcaseeditrpc.queryAssertOper(ca),da())}function aa(){var b=a("#interactiveTypeDiv").find("input:radio:checked").val();return"assertType"===b?(a("#operActionId").udeSelect().setReadOnly(!1),a.ude.rpc.testcaseeditrpc.queryAssertOper(ca),void a("#paramConfig").hide()):"operType"===b?(a("#operActionId").udeSelect().setReadOnly(!1),a("#paramConfig").hide(),a("#controlType").udeSelect().clear(),a("#operActionId").udeSelect().clear(),a("#controlId").udeSelect().clear(),ga(),void da()):"defineType"===b?(a("#controlType").udeSelect().setReadOnly(!1),a("#operActionId").udeSelect().setData(Ka),a("#operActionId").udeSelect().setValue(Ka.id),a("#paramConfig").show(),a("#paramOperator").hide(),a("#Dialog_paramOperateDivExec").hide(),a("#openCloseParam").removeClass("opt-closeup"),a("#openCloseParam").addClass("opt-openall"),a("#queryDB").is(":checked")&&a("#controlType").udeSelect().setReadOnly(!0),a("#operActionId").udeSelect().setReadOnly(!0),void da(b)):void 0}function ba(b,c){var d=a("#interactiveObjectDiv").find("input:radio:checked").val();if("sqlObj"===d){var e={id:c,name:c};a("#controlId").udeSelect().setData(e),a("#controlId").udeSelect().setValue(e.id)}}function ca(b){var c=b.getDataStore("queryAssertOperStore");if(c.getRowSet().getRowCount()>0){queryAssertOper$=a("#operActionId").udeSelect({});for(var d=c.getRowSet().getData(),e=0;e<d.length;e++)d[e].name=d[e].codename,d[e].id=d[e].codevalue;queryAssertOper$.setData(d),queryAssertOper$.setValue(d[0].id),Fa&&a("#eventAssert").is(":checked")===!0&&a("#operActionId").udeSelect().setValue(Fa)}}function da(b){var e="",f="",g="",h=c();if(h){var i=h,j=d();f=j+";;"+i+";;"+za.caseId,g="utf_testcase_arg_define_t1"}else f=za.caseId,g="utf_testcase_arg_define_t2";"defineType"===b?(f=f+";;"+za.projId,g+="1"):(f=f+";;"+za.projId,g+="2"),e={widgetId:"varId",widgetType:"dropdownbox",tableName:g,objectName:"",objectValue:"",condition:f,expandStr:""};var k=new DataCenter,l=new DataStore("commonDs");l.setRowSetName("commonDs"),l.getRowSet().addRow(e),k.addDataStore(l),a.ude.rpc.testcaseeditrpc.getComboBoxDataCommon(k,fa)}function ea(b){Ra?selWhereMenuId=Ra:selWhereMenuId=a.ude.page.testcase.caseDesign.main.getCurrentMenu();var c={widgetId:"controlId",widgetType:"dropdownbox",tableName:"utf_page_analyse_result_t",objectName:"",objectValue:"",condition:selWhereMenuId+";;"+za.projId+";;"+b,expandStr:""},d=new DataCenter,e=new DataStore("commonDs");e.setRowSetName("commonDs"),e.getRowSet().addRow(c),d.addDataStore(e),a.ude.rpc.testcaseeditrpc.getComboBoxDataCommon(d,fa)}function fa(b){for(var c in b.getDataStores()){var d=b.getDataStores()[c],e=d.getParameter("widgetId"),f=d.getParameter("widgetType"),g=a("#"+e),h=d.parameters.data;if("dropdownbox"===f){if(g.udeSelect({onChange:function(){var b=a("#interactiveObjectDiv").find("input:radio:checked").val();if("controlId"===e&&"pageObj"===b){var c=a("#controlId").udeSelect().getSelectData();c&&(Ja=c.expand1)}}}),g.setData(h),"varId"===e){var i=a("#rowId");i.udeSelect({}),i.setData(h)}"varId"===e&&a("#sourceVarId").udeSelect().setData(h)}else"pickListSingle"===f&&(g.pickListSingle({label:"CODENAME",width:g.width()+"px"}),g.pickListSingle("redraw",h));if(Ga&&"varId"===e&&(g.setValue(Ga),Ha&&"paramObj"==a("#interactiveObjectDiv").find("input:radio:checked").val()&&a("#sourceVarId").udeSelect().setValue(Ha)),Ha&&"controlId"===e){var j=g.udeSelect().getData(),k=!1;if(j)for(var l=0;l<j.length;l++)if(j[l].id==Ha){k=!0;break}if(!k){var m=new Object;Ha!=Ia&&(m.id=Ha,m.name=Ia,m.expand1="",j.push(m),g.setData(j))}g.setValue(Ha);var n=a("#controlId").udeSelect().getSelectData();n&&(Ja=n.expand1)}"varId"===e&&a("#s2id_"+e).find(".select2-search-choice-close").show(),"controlId"===e&&a("#s2id_"+e).find(".select2-search-choice-close").show()}}function ga(){var b=new DataCenter,c=new DataStore("commonDs");c.setRowSetName("commonDs"),b.addDataStore(c),a.ude.rpc.testcaseeditrpc.getAllElementType(b,ha)}function ha(b){var c=[],d=[];b.getDataStore("utf_dic_control_type_t")&&(c=b.getDataStore("utf_dic_control_type_t").parameters.data),b.getDataStore("utf_oper_conf_info_t")&&(d=b.getDataStore("utf_oper_conf_info_t").parameters.data);var e=b.getParameter("elementTypeList"),f=new Array,g=0;for(var h in e){f[g]={id:c[h]?c[h]:ia(h),name:c[h]?c[h]:ia(h)};var i=e[h],j=new Array,k=0;for(var l in i)j[k++]={id:i[l],name:d[i[l]]?d[i[l]]:i[l]};f[g++][c[h]?c[h]:ia(h)]=j}if(Ca.setData(f),Ea){Ca.setValue(Ea);var m=Ca.getSelectData();if(m[Ea]){a("#eventAssert").is(":checked")&&a.ude.rpc.testcaseeditrpc.queryAssertOper(ca),a("#eventTrendsDefine").is(":checked")&&(a("#operActionId").udeSelect().setReadOnly(!1),a("#operActionId").udeSelect().setData(Ka),a("#operActionId").udeSelect().setValue(Ka.id),a("#operActionId").udeSelect().setReadOnly(!0)),a("#eventOper").is(":checked")&&(Da.setData(m[Ea]),Da.setValue(Fa));var n=a("#interactiveObjectDiv").find("input:radio:checked").val();if("pageObj"===n)ea(Ea);else if("sqlObj"===n){var o={id:Ha,name:Ha};a("#controlId").udeSelect().setData(o),a("#controlId").udeSelect().setValue(o.id)}}}Ba.setData(f)}function ia(a){return a.indexOf("[")>-1&&a.length>2?a.substring(1,a.length-1):a}function ja(b){var c=a("<div></div>");return"value"===b.varType?c.append("<span title='"+b.varValue+"'>"+b.varValue+"</span>"):c.append("<span title='"+b.varValue+"'>"+b.varValue+"</span>"),c.html()}function ka(b,c){var d=a("<div class='cell-widget' align='center'/>"),e=a("<input type='checkbox' name='check' class='eventcheck' value='"+b+"'/>");return d.append(e),a("<div/>").append(d).html()}function la(){Sa?(a("input[name='check']").attr("checked",!1),Sa=!1):(a("input[name='check']").attr("checked",!0),Sa=!0)}function ma(b){var c=a("#eventDialog").parent().offset().top,d=a("#eventDialog").parent().height(),e=document.body.clientHeight,f=e-d-c,g=a("#Dialog_paramOperateDivExec")[0].scrollHeight,h=a("#Dialog_paramOperateDivExec")[0].clientHeight,i=g>h;f<30&&("del"!==b||i)?a("#Dialog_paramOperateDivExec").css("height",a("#Dialog_paramOperateDivExec").height()):a("#Dialog_paramOperateDivExec").css("height","auto")}function na(b,c,d){ma(),a("#paramOperateTbodyExec").append("<tr class='tr' align='center'><td class='td'><input type='checkbox' name='' value='methodSeclect'/></td><td class='td'>\u7c7b\u578b:&nbsp;<input style='width:170px;' type='text' ></input>&nbsp;&nbsp;&nbsp;\u64cd\u4f5c:&nbsp;<input style='width:130px;' type='text' ></input>&nbsp;&nbsp;&nbsp;\u503c:&nbsp;<input style='width:160px;' class='arg' type='text' ></input><div id='deleteParamOperBtnExec' class='common-buttons-item opt-calculate' style='float:right;margin-top:5px' title='\u8ba1\u7b97\u503c'></div></td></tr>");var e=a("#paramOperateTbodyExec").find("tr:last-child").find("input"),f=a(e[1]),g=a(e[2]),h=a(e[3]);if(f.udeSelect({onChange:function(){var b=f.udeSelect().getSelectData(),c=b.id;if("0"==c)if(null==Wa){var d=function(a){if("1"===a.header.code)return void showMessage("\u83b7\u53d6\u4fe1\u606f\u5931\u8d25",null,"error");var b=a.getParameter("operators");if(b){for(var c=[],d=0;d<b.length;d++){var e={id:b[d].name,name:b[d].name,operStr:b[d].operStr};c.push(e)}g.udeSelect().setData(c),Wa=c}};a.ude.rpc.testcaseRpc.getParamOperatorActions(d)}else g.udeSelect().setData(Wa);else"1"==c&&g.udeSelect().setData(Va)}}),f.udeSelect().setData(Ua),g.udeSelect({onChange:function(){var a=g.udeSelect().getSelectData(),b=f.udeSelect().getSelectData();b&&"0"==b.id&&a&&h.val(a.operStr)}}),b)if("regex"==b)if(f.udeSelect().setValue("0"),h.val(d),null==Wa){var i=function(a){if("1"===a.header.code)return void showMessage("\u83b7\u53d6\u4fe1\u606f\u5931\u8d25",null,"error");var b=a.getParameter("operators");if(b){for(var d=[],e=0;e<b.length;e++){var f={id:b[e].name,name:b[e].name,operStr:b[e].operStr};d.push(f)}g.udeSelect().setData(d),Wa=d;for(var e=0;e<Wa.length;e++)if(Wa[e].name==c){g.udeSelect().setValue(Wa[e].id);break}}};a.ude.rpc.testcaseRpc.getParamOperatorActions(i)}else{g.udeSelect().setData(Wa);for(var j=0;j<Wa.length;j++)if(Wa[j].name==c){g.udeSelect().setValue(Wa[j].id);break}}else"math"==b&&(h.val(d),f.udeSelect().setValue("1"),g.udeSelect().setData(Va),"add"==c?g.udeSelect().setValue("+"):"subtract"==c?g.udeSelect().setValue("-"):"multiply"==c?g.udeSelect().setValue("*"):"division"==c&&g.udeSelect().setValue("/"))}function oa(){var b=ra();1!==b.length?showMessage("\u8bf7\u9009\u62e9\u4e00\u6761\u8bb0\u5f55",a("#eventDialog"),"error"):a(b[0]).prev()[0]?a(b[0]).insertBefore(a(b[0]).prev()):showMessage("\u5df2\u79fb\u81f3\u6700\u4e0a\u5c42",a("#eventDialog"),"error")}function pa(){var b=ra();1!==b.length?showMessage("\u8bf7\u9009\u62e9\u4e00\u6761\u8bb0\u5f55",a("#eventDialog"),"error"):a(b[0]).next()[0]?a(b[0]).insertAfter(a(b[0]).next()):showMessage("\u5df2\u79fb\u81f3\u6700\u4e0b\u5c42",a("#eventDialog"),"error")}function qa(){var b=ra();for(var c in b)b[c]&&a(b[c]).remove();ma("del")}function ra(){var b=a("#paramOperateTbodyExec").children(),c=[],d=0,e=0;for(e=0;b[e];e++)a(b[e]).find("input")[0].checked===!0&&(c[d++]=b[e]);return c}function sa(){for(var b=[],c=a("#paramOperateTbodyExec tr"),d=0;d<c.length;d++){var e=ta(c[d]);e&&b.push(e)}return 0==b.length?"":JSON.stringify(b)}function ta(b){var c=a(b).find(".select2-chosen"),d=a(c[0]).text(),e=a(c[1]).text(),f=a(b).find(".arg").val();if(d&&e&&f){var g={};return d==Ua[0].name?(g.name=e,g.type="regex",g.operStr=f,g.arg=""):(e==Va[0].id?(g.name="add",g.operStr="add"):e==Va[1].id?(g.name="subtract",g.operStr="subtract"):e==Va[2].id?(g.name="multiply",g.operStr="multiply"):e==Va[3].id&&(g.name="division",g.operStr="division"),g.type="math",g.arg=f),g}return null}function ua(b){if(b)for(var c=JSON.parse(b),d=0;d<c.length;d++){var e=c[d];"regex"==e.type?na(e.type,e.name,e.operStr):"math"==e.type&&na(e.type,e.name,e.arg)}a("#paramOperator").hide(),a("#Dialog_paramOperateDivExec").hide(),a("#openCloseParam").removeClass("opt-closeup"),a("#openCloseParam").addClass("opt-openall")}function va(b,c){var d=a("#controlType").udeSelect().getNameValue(),e="",f=a.ude.page.testcase.caseDesign.main.getProjectOSType();if("iOS"!=f&&(e=a.ude.page.testcase.caseDesign.main.getSelectedDevice()),"custom"!=d)return void showMessage("\u53ea\u80fd\u4e3a\u539f\u59cb\u7684\u63a7\u4ef6\u53d6\u503c",null,"error");var g="",h=function(a){if("1"===a.header.code)return void showMessage("\u83b7\u53d6\u7ed3\u679c\u5931\u8d25",null,"error");var b=a.getParameter("result");showMessage("\u8ba1\u7b97\u7ed3\u679c\uff1a"+b,null,"info")},i=function(d){return(g=d.getParameter("appiumSessionId"))?void a.ude.rpc.testcaseRpc.calculateParamValue(b,c,h,e):void showMessage("\u8bf7\u8fde\u63a5\u6d4b\u8bd5\u8bbe\u5907\uff01",null,"error")};a.ude.rpc.testcaseRpc.getAppiumSession(i,e)}a.ude.page.testcase.caseDesign.eventjs={initEvent:b,getEventByMethodId:u,getEventByMethodIdSuccess:v,setOperActionIdForSql:ba,clickParameterLevel:O,clickParamType:N,initEventGrid:e,doAddEvent:U,selectRow:o,displayType:j,displayText:n,displayPath:k,displayPathPriority:f,displayId:l,varToValue:ja,displayBound:m,setInitEventFlag:w};var wa="com.neusoft.utf.portal.config.pageobject.entity.UtfPageAnalyseResult",xa="com.neusoft.utf.portal.common.entity.TestcaseEvent",ya="com.neusoft.utf.portal.common.entity.TestcaseArgDefine",za="",Aa={},Ba="",Ca="",Da="",Ea=null,Fa=null,Ga=null,Ha=null,Ia=null,Ja="",Ka={id:"setParam",name:"setParam"},La={id:"sql",name:"sql"},Ma={id:"param",name:"param"},Na="",Oa=!1,Pa=!1,Qa=!0,Ra=null,Sa="",Ta=new Array,Ua=[{id:"0",name:"\u622a\u53d6"},{id:"1",name:"\u8fd0\u7b97"}],Va=[{id:"+",name:"+"},{id:"-",name:"-"},{id:"*",name:"*"},{id:"/",name:"/"}],Wa=null}(jQuery),function(a){a.testcaseeditrpc={getMethod:function(a,b){var c=new DataCenter;c.addParameter("caseId",b);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseEdit/getMethod.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)},getEventByMethodId:function(a,b,c,d){var e=new DataCenter;e.addParameter("methodId",b),e.addParameter("paramSceneId",c),e.addParameter("paramParamGroup",d);var f={};f.url=appPath+"/utf/testcase/caseDesign/caseEdit/getEventByMethodId.action",f.sync=!1,f.load=a,$.maf.action.requestData(f,e)},addMethod:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseEdit/addMethod.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},addMethodInitMenu:function(a,b,c,d){var e=new DataCenter;e.addParameter("caseId",a),e.addParameter("parentCaseId",b),e.addParameter("QJinitMenu",c);var f={};f.url=appPath+"/utf/testcase/caseDesign/caseEdit/addMethodInitMenu.action",f.sync=!1,f.load=d,$.maf.action.requestData(f,e)},editMethod:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseEdit/editMethod.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},deleteMethod:function(a,b){var c=new DataCenter;c.addParameter("methodId",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseEdit/deleteMethod.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},addObject:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseEdit/addObject.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},addEvent:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseEdit/addEvent.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},editEvent:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseEdit/editEvent.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},editEventForMobile:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseMobile/editEventForMobile.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},deleteEvent:function(a,b){var c=new DataCenter;c.addParameter("eventId",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseEdit/deleteEvent.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},queryDicControlType:function(a){var b={};b.url=appPath+"/utf/testcase/caseDesign/caseEdit/queryDicControlType.action",b.sync=!1,b.load=a,$.maf.action.requestData(b)},queryAssertOper:function(a){var b={};b.url=appPath+"/utf/testcase/caseDesign/caseEdit/queryAssertOper.action",b.sync=!1,b.load=a,$.maf.action.requestData(b)},getComboBoxDataCommon:function(a,b){var c={};c.url=appPath+"/utf/testcase/scenedesign/getComboBoxDataCommon.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},getAllElementType:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseEdit/getAllElementType.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},upORdownMethod:function(a){var b={};b.url=appPath+"/utf/testcase/caseDesign/caseEdit/upORdownMethod.action",b.sync=!1,$.maf.action.requestData(b,a)},upORdownEvent:function(a){var b={};b.url=appPath+"/utf/testcase/caseDesign/caseEdit/upORdownEvent.action",b.sync=!1,$.maf.action.requestData(b,a)},deleteEvents:function(a,b){for(var c=new DataCenter,d=0;d<a.length;d++)c.addParameter(a[d],a[d]);var e={};e.url=appPath+"/utf/testcase/caseDesign/caseEdit/deleteEvents.action",e.sync=!1,e.load=b,$.maf.action.requestData(e,c)}}}($.ude.rpc),function(a){function b(){d(),a("#caseEditMethodDown").css("height",a("#caseEditMethod").height()-a(".common-content-top").outerHeight()-4),a("#caseEditEventDown").css("height",a("#caseEditEvent").height()-a(".common-content-top").outerHeight()-1),e()}function c(b,c,d){E=b,F=c,G=d,a.ude.rpc.testcaseeditrpc.getMethod(g,E.caseId),a("#eventTable").udeTable().dataTable().fnClearTable()}function d(){a("#methodRefresh").hide(),a("#methodRefreshDIV").hide(),a("#methodName").prop("maxlength",40),a("#wait").prop("maxlength",10),a("#frame").prop("maxlength",100),a("#elementFinder").prop("maxlength",10),a("#methodSaveId").click(function(){f()&&m()})}function e(){a("#addMethodBtn").bind("click",function(a){k()}),a("#editMethodBtn").bind("click",function(a){o()}),a("#upMethodBtn").bind("click",function(a){t()}),a("#downMethodBtn").bind("click",function(a){u()}),a("#deleteMethodBtn").bind("click",function(a){q()}),a("#returnEventBtn").bind("click",function(b){a.ude.page.testcase.caseDesign.main.treeClick(),a.ude.page.testcase.scenedesign.main.clearnCurrentNode()}),a("#initMenuCheck").find("input:radio").bind("click",function(a){v()}),a("#methodMoreConfigBtn").bind("click",function(){"none"===a("#methodMoreConfig")[0].style.display?(a("#methodMoreConfigBtn")[0].className="testcase-buttons-item opt-closeup",a("#methodMoreConfig").css("display","block")):(a("#methodMoreConfig").css("display","none"),a("#methodMoreConfigBtn")[0].className="testcase-buttons-item opt-openall")})}function f(){var b=a.trim(a("#methodName").val());return!(!b||""===b)||(showMessage(a.i18n.prop("testcase.caseedit.checkAvailability.methodName"),a("#methodDialog"),"error"),a("#methodName").focus(),!1)}function g(b){if(!b)return void showMessage(a.i18n.prop("testcase.caseedit.getMethodInfoSuccess.dc"),null,"error");if("1"===b.getCode())return void showMessage(b.getDetail(),null,"error");if(b){var c=b.getDataStore("methodStore");B.setMethodStore(c),h(c.getRowSet().getData())}}function h(b){a("#methodTable").udeTable().dataTable().fnClearTable();for(var c=0,d=b.length;c<d;c++)b[c]&&a("#methodTable").udeTable().fnAddRow(b[c]);C.getEventByMethodId(E,G)}function i(a){H=a,j()}function j(b){a("#methodTable").udeTable({data:b,columns:[{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.methodName"),mData:"methodName",sWidth:"24%"},{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.wait"),mData:"wait",sWidth:"8%"},{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.enabled"),mData:"enabled",sWidth:"8%",mRender:x},{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.frame"),mData:"frame",sWidth:"16%",bVisible:H},{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.refresh"),mData:"refresh",sWidth:"0%",mRender:x,bVisible:!1},{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.uICompare"),mData:"uICompare",sWidth:"8%",mRender:x},{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.defaultframe"),mData:"defaultframe",sWidth:"8%",mRender:x,bVisible:H},{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.window"),mData:"window",sWidth:"12%"},{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.elementFinder"),mData:"elementFinder",sWidth:"16%"}],onClick:function(a){C.getEventByMethodId(E,G)}})}function k(){l(),a("#methodDialog").prop("add",!0),a.ude.dialog.open("methodDialog",{title:a.i18n.prop("testcase.caseedit.newMethod.methodDialog"),width:"500px"});var b=a("#initMenuCheck").find("input:radio");b.removeAttr("disabled"),a("#initMenuStatusB").attr("checked",!0),w("enabled"),a("#methodName").focus()}function l(){z={},a("#methodName").val(""),a("#wait").val("2"),a("#methodEnabled").attr("checked",!0),a("#frame").val(""),a("#methodUICompare").attr("checked",!0),a("#methodRefresh").attr("checked",!1),a("#elementFinder").val(""),a("#methodDefaultframe").attr("checked",!1),a("#window").val("")}function m(){var b=z;b.caseId=E.caseId,b.methodName=a.trim(a("#methodName").val()),b.wait=a.trim(a("#wait").val()),b.enabled=a("#methodEnabled").is(":checked")===!0?"1":"0",b.frame=a.trim(a("#frame").val()),b.uICompare=a("#methodUICompare").is(":checked")===!0?"1":"0",b.refresh=a("#methodRefresh").is(":checked")===!0?"1":"0",b.elementFinder=a.trim(a("#elementFinder").val()),b.defaultframe=a("#methodDefaultframe").is(":checked")===!0?"1":"0",b.initmenu=a("#initMenuCheck").find("input:radio:checked").val(),b.window=a.trim(a("#window").val());var c=new DataCenter,d=new DataStore(A);d.setRowSetName(A),d.getRowSet().addRow(b),c.addDataStore(d),a("#methodDialog").prop("add")?n(c):(b.id=y,p(c))}function n(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,e=function(b){if(b&&"0"===b.getCode()){var c=b.getSingleDataStore();d=c.getRowSet().getRow(0).data,a("#methodTable").udeTable().fnAddRow(d);var e=B.getMethodStore();e.addRowData(d),a.ude.dialog.close(),C.getEventByMethodId(E,G)}else{var f=b.getDetail();showMessage(f,a("#methodDialog"),"error")}},f=function(b){if(b&&"0"===b.getCode()){var c=b.getSingleDataStore();d=c.getRowSet().getRow(0).data,a("#methodTable").udeTable().fnAddRow(d),a("#methodTable").udeTable().fnMoveRow(d,"top"),a.ude.dialog.close()}else{var e=b.getDetail();showMessage(e,a("#methodDialog"),"error")}};"1"===a("#initMenuCheck").find("input:radio:checked").val()?a.ude.rpc.testcaseeditrpc.addMethodInitMenu(E.caseId,E.parentCaseId,F,f):a.ude.rpc.testcaseeditrpc.addMethod(b,e)}function o(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();if(null==b)return void showMessage(a.i18n.prop("testcase.casejs.initUser.operPrompt"),a("#methodTable"),"error");y=b.id,z=b,a("#methodName").val(b.methodName),a("#wait").val(b.wait),"1"===b.enabled?a("#methodEnabled").attr("checked",!0):a("#methodEnabled").attr("checked",!1),a("#frame").val(b.frame),"1"===b.uICompare?a("#methodUICompare").attr("checked",!0):a("#methodUICompare").attr("checked",!1),"1"===b.refresh?a("#methodRefresh").attr("checked",!0):a("#methodRefresh").attr("checked",!1),a("#elementFinder").val(b.elementFinder),"1"===b.defaultframe?a("#methodDefaultframe").attr("checked",!0):a("#methodDefaultframe").attr("checked",!1),a("#window").val(b.window),a("#methodDialog").prop("add",!1),a.ude.dialog.open("methodDialog",{title:a.i18n.prop("testcase.casejs.initUser.operPromptX"),width:"500px"});var c=a("#initMenuCheck").find("input:radio");c.attr("disabled","disabled"),a("#initMenuStatusB").attr("checked",!0),w("enabled")}function p(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,e=function(b){if(b&&"0"===b.getCode()){a("#methodTable").udeTable().fnUpdateRow(d);var c=B.getMethodStore();c.updateRowData(d),a.ude.dialog.close()}else{var e=b.getDetail();showMessage(e,a("#methodDialog"),"error")}};a.ude.rpc.testcaseeditrpc.editMethod(b,e)}function q(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();return D=b,b?void a.ude.util.confirm(a.i18n.prop("testcase.caseedit.deleteMethod.showMessageQ"),r):void showMessage(a.i18n.prop("testcase.caseedit.deleteMethod.showMessage"),a("#methodTable"),"error")}function r(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();a.ude.rpc.testcaseeditrpc.deleteMethod(b.methodId,s)}function s(b){if(b&&"0"===b.getCode()){a("#methodTable").udeTable().fnDeleteRow();var c=B.getMethodStore();c.deleteRowData(D),a("#eventTable").udeTable().dataTable().fnClearTable()}else{var d=b.getDetail();showMessage(d,null,"error")}}function t(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();if(!b)return void showMessage(a.i18n.prop("testcase.caseedit.upMethod.moveup"),a("#methodTable"),"error");var c=a("#methodTable").udeTable().fnGetSelectedRowDataIndex();if(0!==c){a("#methodTable").udeTable().fnMoveRow(b,"up");var d=a("#methodTable").udeTable().fnGetSelectedRowDataIndex(),e=a("#methodTable").udeTable().fnGetRowData(d+1).orderId,f=a("#methodTable").udeTable().fnGetSelectedRowData().orderId,g=a("#methodTable").udeTable().fnGetSelectedRowData();g.orderId=e;var h=a("#methodTable").udeTable().fnGetRowData(d+1);h.orderId=f;var i=new DataCenter,j=new DataStore(A);j.setRowSetName(A),j.getRowSet().addRow(g),j.getRowSet().addRow(h),i.addDataStore(j),a.ude.rpc.testcaseeditrpc.upORdownMethod(i)}}function u(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();if(!b)return void showMessage(a.i18n.prop("testcase.caseedit.upMethod.movedown"),a("#methodTable"),"error");var c=a("#methodTable").udeTable().fnGetSelectedRowDataIndex()+1,d=a("#methodTable").udeTable().fnGetData().length;if(c!==d){a("#methodTable").udeTable().fnMoveRow(b,"down");var e=a("#methodTable").udeTable().fnGetSelectedRowDataIndex(),f=a("#methodTable").udeTable().fnGetRowData(e-1).orderId,g=a("#methodTable").udeTable().fnGetSelectedRowData().orderId,h=a("#methodTable").udeTable().fnGetSelectedRowData();h.orderId=f;var i=a("#methodTable").udeTable().fnGetRowData(e-1);i.orderId=g;var j=new DataCenter,k=new DataStore(A);k.setRowSetName(A),k.getRowSet().addRow(h),k.getRowSet().addRow(i),j.addDataStore(k),a.ude.rpc.testcaseeditrpc.upORdownMethod(j)}}function v(){var b=a("#initMenuCheck").find("input:radio:checked").val();return"1"===b?(w("disabled"),void a("#methodName").val(a.i18n.prop("testcase.caseedit.initMenuCheck.methodName"))):(w("enabled"),void a("#methodName").val(""))}function w(b){return"disabled"===b?(a("#methodName").attr("disabled","disabled"),a("#wait").attr("disabled","disabled"),a("#methodEnabled").attr("disabled","disabled"),a("#frame").attr("disabled","disabled"),a("#methodUICompare").attr("disabled","disabled"),a("#methodDefaultframe").attr("disabled","disabled"),a("#methodRefresh").attr("disabled","disabled"),a("#elementFinder").attr("disabled","disabled"),void a("#window").attr("disabled","disabled")):(a("#methodName").removeAttr("disabled"),a("#wait").removeAttr("disabled"),a("#methodEnabled").removeAttr("disabled"),a("#frame").removeAttr("disabled"),a("#methodUICompare").removeAttr("disabled"),a("#methodDefaultframe").removeAttr("disabled"),a("#methodRefresh").removeAttr("disabled"),a("#elementFinder").removeAttr("disabled"),void a("#window").removeAttr("disabled"))}function x(b,c){return b="1"===b?a.i18n.prop("testcase.casejs.renderYorN.yes"):a.i18n.prop("testcase.casejs.renderYorN.no")}a.ude.page.testcase.caseDesign.methodjs={init:b,initMethod:c,doEditMethod:p,initMethodTableForgetIncludeFrame:i};var y=null,z={},A="com.neusoft.utf.portal.common.entity.TestcaseMethod",B=a.ude.page.testcase.caseDesign.editparameter,C=a.ude.page.testcase.caseDesign.eventjs,D=null,E="",F=null,G="",H=null}(jQuery),function(a){function b(){la(),a(".common-content-down").css("height",.5*a(".common-content").height()-a(".common-content-top").outerHeight()),a.ude.rpc.testcase.initDBResources(d),k()}function c(){la(),i([]),a.ude.rpc.testcase.initSqlResources(e),m()}function d(b){if(!b)return void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.initMessage")+"\uff01",null,"error");if(1==b.getCode())return void showMessage(b.getDetail(),null,"error");var c=b.getDataStore("dbStore");f(c)}function e(b){if(!b)return void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.initMessage")+"\uff01",null,"error");if(1==b.getCode())return void showMessage(b.getDetail(),null,"error");var c=b.getDataStore("sqlStore");g(c)}function f(b){a("#testConnectBtn").bind("click",function(){A()}),a("#addDBBtn").bind("click",function(){B()}),a("#editDBBtn").bind("click",function(a){D()}),a("#deleteDBBtn").bind("click",function(){L()}),h(b.getRowSet().getData())}function g(b){a("#sqlTable").udeTable().fnRedraw(b.getRowSet().getData())}function h(b){a("#dbTable").udeTable({data:b,columns:[{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.Name"),mData:"dbConnectName",sWidth:"13%"},{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.Type"),mData:"dbConnectType",sWidth:"13%"},{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.Driver"),mData:"dbDriver",sWidth:"22%"},{sTitle:"URL",mData:"dbUrl",sWidth:"13%"},{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.dbUsername"),mData:"dbUsername",sWidth:"13%"},{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.dbPwd"),mData:"dbPwd",sWidth:"13%",mRender:ha}],dblClick:function(a){D()}})}function i(b){a("#sqlTable").udeTable({data:b,columns:[{sTitle:"SQL"+a.i18n.prop("ude.page.testcase.sqlConfig.varName"),mData:"varName",sWidth:"20%"},{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.dbConnectId"),mData:"dbConnectId",sWidth:"30%"},{sTitle:"SQL"+a.i18n.prop("ude.page.testcase.sqlConfig.varValue"),mData:"varValue",sWidth:"30%"},{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.dbValue"),mData:"dbValue",sWidth:"20%"}],dblClick:function(a){E()},onClick:function(a){j()}})}function j(){var b=a("#sqlTable").udeTable().fnGetSelectedRowData().varName,c=a("#sqlTable").udeTable().fnGetSelectedRowData().varId;a.ude.page.testcase.caseDesign.eventjs.setOperActionIdForSql(c,b)}function k(){a("#dbConnectName").prop("maxlength",40),a("#dbIp").prop("maxlength",40),a("#dbPort").prop("maxlength",20),a("#dbInstanceName").prop("maxlength",20),a("#dbUsername").prop("maxlength",20),a("#dbPwd").prop("maxlength",40),a("#dbConnectType").change(ia),a("#dbSaveId").click(l)}function l(){a.ude.rpc.testcase.checkDbNameVailability(a.trim(a("#dbConnectName").val()),U)}function m(){n(),p(),t(),w()}function n(){a.ude.rpc.testcase.initDBResources(q)}function o(){a.ude.rpc.testcase.initDBResources(r)}function p(){a.ude.rpc.testcase.initCaseIdList(s)}function q(b){ua=a("#sqlConfigDataSourceSelect").udeSelect({});var c=b.getDataStore("dbStore");if(c.getRowSet().getRowCount()>0){for(var d=c.getRowSet().getData(),e=0;e<d.length;e++)d[e].name=d[e].dbConnectName,d[e].id=d[e].dbConnectId;ua.setData(d)}else ua.setData()}function r(b){ua=a("#sqlConfigDataSourceSelect").udeSelect({});var c=b.getDataStore("dbStore");if(c.getRowSet().getRowCount()>0){for(var d=c.getRowSet().getData(),e=0;e<d.length;e++)d[e].name=d[e].dbConnectName,
d[e].id=d[e].dbConnectId;ua.setData(d)}else ua.setData();a.ude.rpc.testcase.getSqlParameterInfoByVarId(oa,F)}function s(b){var c=b.getDataStore("caseInfoStore");if(va=a("#caseIdSelect").udeSelect({}),c.getRowSet().getRowCount()>0){for(var d=c.getRowSet().getData(),e=0;e<d.length;e++)d[e].name=d[e].caseName,d[e].id=d[e].caseId;va.setData(d)}}function t(){u(),v()}function u(){a("#leftParaTable").udeTable({data:null,columns:[{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.paraName"),mData:"varName",sWidth:"33%"},{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.paraValue"),mData:"varValue",sWidth:"33%"},{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.caseId"),mData:"caseId",sWidth:"33%"}],selectable:"ctrl",dblClick:function(){Z()}})}function v(){a("#rightParaTable").udeTable({data:null,columns:[{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.paraName"),mData:"varName",sWidth:"100%",mRender:ga}],selectable:"ctrl",dblClick:function(){$()}})}function w(){a("#updateSqlConfig").bind("click",E),a("#deleteSqlConfig").bind("click",N),a("#addSqlConfig").bind("click",C),a("#sqlConfigSaveBtn").bind("click",x),a("#searchParameter").bind("click",Y),a("#sqlMoveRight").bind("click",Z),a("#sqlMoveLeft").bind("click",$),a("#sqlMoveUp").bind("click",ba),a("#sqlMoveDown").bind("click",ca)}function x(){a.ude.rpc.testcase.checkSqlNameVailability(a.trim(a("#sqlConfigNameInput").val()),W)}function y(){var b=pa;b.dbConnectName=a.trim(a("#dbConnectName").val()),b.dbConnectType=a.trim(a("#dbConnectType").val()),b.dbDriver=a.trim(a("#dbDriver").val()),b.dbUrl=a.trim(a("#dbUrl").val()),b.dbUsername=a.trim(a("#dbUsername").val()),b.dbPwd=a.trim(a("#dbPwd").val());var c=new DataCenter,d=new DataStore(ma);d.setRowSetName(ma),d.getRowSet().addRow(b),c.addDataStore(d),a("#dbDialog").prop("add")?H(c):(b.dbConnectId=oa,J(c))}function z(){qa.dbValue="",qa.varName="",qa.dbConnectId="",qa.varValue="";var b=a("#rightParaTable").udeTable().fnGetData(),c=qa;c.varName=a.trim(a("#sqlConfigNameInput").val()),c.dbConnectId=a.trim(a("#sqlConfigDataSourceSelect").val()),c.varValue=a.trim(a("#varValue").val());for(var d=null,e=0;e<b.length;e++)d=d?d+","+b[e].varName:b[e].varName;c.dbValue=d;var f=new DataCenter,g=new DataStore(na);g.setRowSetName(na),g.getRowSet().addRow(c),f.addDataStore(g),a("#sqlDialog").prop("add")?I(f):(c.varId=oa,K(f))}function A(){var b=a("#dbTable").udeTable().fnGetSelectedRowData(),c=new DataCenter,d=new DataStore(ma);d.setRowSetName(ma),d.getRowSet().addRow(b),c.addDataStore(d),b?a.ude.rpc.testcase.testConnectDB(c,Q):showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.connectMessage")+"\uff01",null,"error")}function B(){X(),a("#dbDriver").val("oracle.jdbc.driver.OracleDriver"),a("#dbUrl").val("jdbc:oracle:thin:@127.0.0.1:1521:SID"),a("#dbDialog").prop("add",!0),a.ude.dialog.open("dbDialog",{title:a.i18n.prop("ude.page.testcase.sqlConfig.dbBuild"),width:"500px"})}function C(){va.setValue(""),fa(),n(),a("#sqlDialog").prop("add",!0),a.ude.dialog.open("sqlDialog",{title:ta,width:"850px"}),a("#sqlConfigNameInput").attr("readonly",!1),a("#sqlConfigIdInput").val(a.ude.util.generateUUID()),a("#sqlConfigNameInput").val(""),a("#sqlConfigDataSourceSelect").val(""),a("#sqlConfigDescInput").val(""),ta="SQL"+a.i18n.prop("ude.page.testcase.sqlConfig.build")}function D(){var b=a("#dbTable").udeTable().fnGetSelectedRowData();return null==b?void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.chooseMessage")+"\u3002",null,"error"):(pa=b,oa=b.dbConnectId,editDbName=b.dbConnectName,a("#dbConnectName").val(b.dbConnectName),a("#dbConnectType").val(b.dbConnectType),a("#dbDriver").val(b.dbDriver),a("#dbUrl").val(b.dbUrl),a("#dbUsername").val(b.dbUsername),a("#dbPwd").val(b.dbPwd),a("#dbDialog").prop("add",!1),void a.ude.dialog.open("dbDialog",{title:a.i18n.prop("ude.page.testcase.sqlConfig.dbModify"),width:"500px"}))}function E(){var b=a("#sqlTable").udeTable().fnGetSelectedRowData();null==b?showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.chooseMessage")+"\uff01",null,"error"):(va.setValue(""),fa(),o(),a("#sqlDialog").prop("add",!1),a.ude.dialog.open("sqlDialog",{title:"SQL"+a.i18n.prop("ude.page.testcase.sqlConfig.modify"),width:"850px"}),qa=b,oa=b.varId,Aa=b.varName,a("#sqlConfigNameInput").val(b.varName),a("#varValue").val(b.varValue),a("#sqlConfigNameInput").attr("readonly",!0))}function F(b){if(!b)return void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.initMessage")+"\uff01",null,"error");if(1==b.getCode())return void showMessage(b.getDetail(),null,"error");var c=b.getDataStore("sqlParStore"),d=c.getRowSet().getData();wa=d[0].dbConnectId,ua.setValue(wa);var e=d[0].dbValue;e&&a.ude.rpc.testcase.getSqlParameterInfoByVarIdStr(e,G)}function G(b){if(a.ude.dialog.open("sqlDialog",{title:"SQL"+a.i18n.prop("ude.page.testcase.sqlConfig.modify"),width:"850px"}),!b)return void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.initMessage")+"\uff01",null,"error");if(1==b.getCode())return void showMessage(b.getDetail(),null,"error");var c=b.getDataStore("sqlStrParStore"),d=c.getRowSet().getData();a("#rightParaTable").udeTable().dataTable().fnClearTable();for(var e=0;e<d.length;e++)a("#rightParaTable").udeTable().fnAddRow(d[e])}function H(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,e=function(b){if(b&&"0"==b.getCode()){var c=b.getSingleDataStore();d=c.getRowSet().getRow(0).data,a("#dbTable").udeTable().fnAddRow(d),editDbName="",a.ude.dialog.close()}else{var e=b.getDetail();showMessage(e,a("#dbDialog"),"error")}};a.ude.rpc.testcase.addDB(b,e)}function I(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,f=function(b){if(b&&"0"==b.getCode()){var c=b.getSingleDataStore();d=c.getRowSet().getRow(0).data,a("#sqlTable").udeTable().fnAddRow(d),a("#sqlTable").udeTable().dataTable().fnClearTable(),a.ude.rpc.testcase.initSqlResources(e),Aa="",a.ude.dialog.close()}else{var f=b.getDetail();showMessage(f,a("#sqlDialog"),"error")}};a.ude.rpc.testcase.addSql(b,f)}function J(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,e=function(b){if(b&&"0"==b.getCode())a("#dbTable").udeTable().fnUpdateRow(d),editDbName="",a.ude.dialog.close();else{var c=b.getDetail();showMessage(c,a("#dbDialog"),"error")}};d.dbPwd==sa&&(d.dbPwd=""),a.ude.rpc.testcase.editDB(b,e)}function K(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,f=function(b){if(b&&"0"==b.getCode())a("#sqlTable").udeTable().fnUpdateRow(d),a("#sqlTable").udeTable().dataTable().fnClearTable(),a.ude.rpc.testcase.initSqlResources(e),Aa="",a.ude.dialog.close();else{var c=b.getDetail();showMessage(c,a("#sqlDialog"),"error")}};a.ude.rpc.testcase.editSql(b,f)}function L(){var b=a("#dbTable").udeTable().fnGetSelectedRowData();return b?void a.ude.rpc.testcase.getDbConfigSql(b.dbConnectId,M):void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.deleteDb")+"\uff01",null,"error")}function M(b){return b.getDataStore("sqlStore").getRowSet().getData().length>0?void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.deleteMessage")+"\uff01",null,"error"):void a.ude.util.confirm(a.i18n.prop("ude.page.testcase.sqlConfig.deleteDBConfirm"),O)}function N(){var b=a("#sqlTable").udeTable().fnGetSelectedRowData();return b?void a.ude.util.confirm(a.i18n.prop("ude.page.testcase.sqlConfig.deleteDBConfirm"),P):void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.deleteSql")+"SQL"+a.i18n.prop("ude.page.testcase.sqlConfig.config"),null,"error")}function O(){var b=a("#dbTable").udeTable().fnGetSelectedRowData();a.ude.rpc.testcase.deleteDB(b.dbConnectId,R)}function P(){var b=a("#sqlTable").udeTable().fnGetSelectedRowData();a.ude.rpc.testcase.deleteSql(b.varId,S)}function Q(b){var c=b.getParameter("testResult");"true"===c?showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.connSuccess")+"!",null,""):showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.connFail")+"!",null,"error")}function R(b){if(b&&"0"==b.getCode()){a("#dbTable").udeTable().fnDeleteRow();var c=a("#dbTable").udeTable().fnGetSelectedRowData(),d=ra.getDBStore();d.deleteRowData(c)}else{var e=b.getDetail();showMessage(e,null,"error")}}function S(b){if(b&&"0"==b.getCode()){a("#sqlTable").udeTable().fnDeleteRow();var c=a("#sqlTable").udeTable().fnGetSelectedRowData(),d=ra.getSqlStore();d.deleteRowData(c)}else{var e=b.getDetail();showMessage(e,null,"error")}}function T(){var b=a.trim(a("#dbConnectName").val()),c=a.trim(a("#dbConnectType").val()),d=a.trim(a("#dbDriver").val()),e=a.trim(a("#dbUrl").val()),f=a.trim(a("#dbUsername").val());return b&&""!=b?c&&""!=c?d&&""!=d?e&&""!=e?!(!f||""==f)||(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.dbUsernameWarn")+"\u3002",a("#dbDialog"),"error"),a("#dbUsername").focus(),!1):(showMessage("URL"+a.i18n.prop("ude.page.testcase.sqlConfig.dbUrl")+"!",a("#dbDialog"),"error"),a("#dbUrl").focus(),!1):(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.dbDriver")+"!",a("#dbDialog"),"error"),a("#dbDriver").focus(),!1):(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.dbConnectType")+"!",a("#dbDialog"),"error"),a("#dbConnectType").focus(),!1):(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.dbConnectName")+"!",a("#dbDialog"),"error"),a("#dbConnectName").focus(),!1)}function U(b){return xa=b.getParameter("dbCheckResult"),"0"!=xa&&editDbName!=a("#dbConnectName").val()?(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.dbNameCheckResult")+"\u3002",a("#dbDialog"),"error"),void a("#dbConnectName").focus()):void(T()&&y())}function V(){var b=a.trim(a("#sqlConfigNameInput").val()),c=a.trim(a("#varValue").val()),d=a.trim(a("#sqlConfigDataSourceSelect").val());ka(c);var e=a("#rightParaTable").udeTable().fnGetData().length;return b&&""!=b?d?c&&""!=c?za==e||(showMessage("Sql"+a.i18n.prop("ude.page.testcase.sqlConfig.markCount"),a("#sqlDialog"),"error"),a("#varValue").focus(),!1):(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.dbInput")+"SQL"+a.i18n.prop("ude.page.testcase.sqlConfig.varValue")+"\u3002",a("#sqlDialog"),"error"),a("#varValue").focus(),!1):(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.DataSourceSelect"),a("#sqlDialog"),"error"),"#sqlConfigDataSourceSelect".focus(),!1):(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.dbInput")+"SQL"+a.i18n.prop("ude.page.testcase.sqlConfig.dbConnectName")+"\u3002",a("#sqlDialog"),"error"),a("#varName").focus(),!1)}function W(b){return ya=b.getParameter("sqlCheckResult"),"0"!=ya&&a("#sqlConfigNameInput").val()!=Aa?(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.sqlName")+"Sql"+a.i18n.prop("ude.page.testcase.sqlConfig.sqlNameCheckResult"),a("#sqlDialog"),"error"),void a("#sqlConfigNameInput").focus()):void(V()&&z())}function X(){pa={},a("#dbConnectName").val(""),a("#dbConnectType").val(""),a("#dbDriver").val(""),a("#dbUrl").val(""),a("#dbUsername").val(""),a("#dbPwd").val("")}function Y(){var b=a.trim(a("#caseIdSelect").val()),c=a.trim(a("#parName").val());a.ude.rpc.testcase.getParameterByCaseId(b,c,da)}function Z(){var b=a("#leftParaTable").udeTable().fnGetSelectedRowDatas();a("#leftParaTable").udeTable().fnDeleteRow(),_(b)}function $(){var b=a("#rightParaTable").udeTable().fnGetSelectedRowDatas();a("#rightParaTable").udeTable().fnDeleteRow(),aa(b)}function _(b){if(!(b.length>0))return void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.rightPara"),null,"error");for(var c=0;c<b.length;c++)a("#rightParaTable").udeTable().fnAddRow(b[c])}function aa(b){if(!(b.length>0))return void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.rightPara"),null,"error");for(var c=0;c<b.length;c++)a("#leftParaTable").udeTable().fnAddRow(b[c])}function ba(){var b=a("#rightParaTable").udeTable().fnGetSelectedRowData();return b?void a("#rightParaTable").udeTable().fnMoveRow(b,"up"):void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.upContent"),null,"error")}function ca(){var b=a("#rightParaTable").udeTable().fnGetSelectedRowData();return b?void a("#rightParaTable").udeTable().fnMoveRow(b,"down"):void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.downContent"),null,"error")}function da(b){if(!b)return void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.initMessage")+"\uff01",null,"error");if(1==b.getCode())return void showMessage(b.getDetail(),null,"error");var c=b.getDataStore("parStore");ea(c.getRowSet().getData())}function ea(b){a("#leftParaTable").udeTable().dataTable().fnClearTable();for(var c=0;c<b.length;c++)a("#leftParaTable").udeTable().fnAddRow(b[c])}function fa(){qa={},ua.setValue(""),a("#sqlConfigNameInput").val(""),a("#varValue").val(""),a("#rightParaTable").udeTable().dataTable().fnClearTable(),a("#leftParaTable").udeTable().dataTable().fnClearTable(),a("#s2id_caseIdSelect").find(".select2-search-choice-close").show()}function ga(a){return"<div class='cell' style='text-align:center'>"+a+"</div>"}function ha(a){return"<div class='cell' >********</div>"}function ia(){ja(),"Oracle"===a("#dbConnectType").val()&&(a("#dbDriver").val("oracle.jdbc.driver.OracleDriver"),a("#dbUrl").val("jdbc:oracle:thin:@127.0.0.1:1521:SID")),"MySQL"===a("#dbConnectType").val()&&(a("#dbDriver").val("com.mysql.jdbc.Driver"),a("#dbUrl").val("jdbc:mysql://127.0.0.1:3306/SID")),"MSSQLServer"===a("#dbConnectType").val()&&(a("#dbDriver").val("net.sourceforge.jtds.jdbc.Driver"),a("#dbUrl").val("jdbc:jtds:sqlserver://127.0.0.1:1433/SID")),"IBMDB2"===a("#dbConnectType").val()&&(a("#dbDriver").val("com.ibm.db2.jcc.DB2Driver"),a("#dbUrl").val("jdbc:db2://127.0.0.1:50000/SID")),"Sybase"===a("#dbConnectType").val()&&(a("#dbDriver").val("com.sybase.jdbc3.jdbc.SybDriver"),a("#dbUrl").val("jdbc:sybase:Tds:127.0.0.1:5000/SID")),a("#dbConnectType").val()===a.i18n.prop("ude.page.testcase.sqlConfig.oscar")&&(a("#dbDriver").val("com.oscar.Driver"),a("#dbUrl").val("jdbc:oscar://127.0.0.1:2003/SID")),a("#dbConnectType").val()===a.i18n.prop("ude.page.testcase.sqlConfig.DmDriver")&&(a("#dbDriver").val("dm.jdbc.driver.DmDriver"),a("#dbUrl").val("jdbc:dm://127.0.0.1:5236/DMSERVER")),a("#dbConnectType").val()===a.i18n.prop("ude.page.testcase.sqlConfig.kingbase")&&(a("#dbDriver").val("com.kingbase.Driver"),a("#dbUrl").val("jdbc:kingbase://127.0.0.1:54321/SID")),"jdbc"===a("#dbConnectType").val()&&(a("#dbDriver").val("jdbc driver"),a("#dbUrl").val("jdbc url"))}function ja(){a("#dbDriver").val(""),a("#dbUrl").val("")}function ka(a){var b=a.match(/\?/g);za=b?b.length:0}function la(){a.ude.pageResizeHandler=function(){a(".common-content-down").css("height",.5*a(".common-content").height()-a(".common-content-top").outerHeight())}}a.ude.page.testcase.sqlConfig.main={initDB:b,initSql:c};var ma="com.neusoft.utf.portal.common.entity.DataDbConfig",na="com.neusoft.utf.portal.common.entity.TestcaseArgDefine",oa=null,pa={},qa={},ra=a.ude.page.testcase.sqlConfig.parameter,sa="******",ta=null,ua=null,va=null,wa="",xa="0",ya="0",za=0,Aa=null}(jQuery),function(a){a.testcase={initDBResources:function(a){var b={};b.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/initDBInfo.action",b.sync=!1,b.load=a,$.maf.action.requestData(b)},initSqlResources:function(a){var b={};b.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/initSqlInfo.action",b.sync=!1,b.load=a,$.maf.action.requestData(b)},getDbConfigSql:function(a,b){var c=new DataCenter;c.addParameter("dbConnectId",a);var d={};d.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/getSqlInfo.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},testConnectDB:function(a,b){var c={};c.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/testConnectDB.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},addDB:function(a,b){var c={};c.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/addDB.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},editDB:function(a,b){var c={};c.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/editDB.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},deleteDB:function(a,b){var c=new DataCenter;c.addParameter("dbConnectId",a);var d={};d.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/deleteDB.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},addSql:function(a,b){var c={};c.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/addSql.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},editSql:function(a,b){var c={};c.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/editSql.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},deleteSql:function(a,b){var c=new DataCenter;c.addParameter("varId",a);var d={};d.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/deleteSql.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},saveResourceAuthorities:function(a,b){var c={};c.url=appPath+"/utf/system/user/saveResourceAuthorities.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},initCaseIdList:function(a){var b={};b.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/getCaseInfoList.action",b.sync=!1,b.load=a,$.maf.action.requestData(b)},getParameterByCaseId:function(a,b,c){var d=new DataCenter;d.addParameter("caseId",a),d.addParameter("varName",b);var e={};e.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/getParemeterInfoList.action",e.sync=!1,e.load=c,$.maf.action.requestData(e,d)},getSqlParameterInfoByVarId:function(a,b){var c=new DataCenter;c.addParameter("varId",a);var d={};d.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/getSqlParameterInfoByVarId.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},getSqlParameterInfoByVarIdStr:function(a,b){var c=new DataCenter;c.addParameter("dbValue",a);var d={};d.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/getSqlParameterInfoByVarIdStr.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},checkDbNameVailability:function(a,b){var c=new DataCenter;c.addParameter("dbName",a);var d={};d.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/checkDbNameVailability.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},checkSqlNameVailability:function(a,b){var c=new DataCenter;c.addParameter("sqlName",a);var d={};d.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/checkSqlNameVailability.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)}}}($.ude.rpc),function(a){a.param={initResources:function(a){var b={};b.url=appPath+"/utf/testcase/paramManage/initParamPage.action",b.sync=!1,b.load=a,$.maf.action.requestData(b)},getSysMenu:function(a,b){var c=new DataCenter;c.addParameter("appId",a);var d={};d.url=appPath+"/utf/demo/demoGrid/getSysMenu.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},addUser:function(a,b,c,d){a.addParameter("caseName",b),a.addParameter("sceneName",c);var e={};e.url=appPath+"/utf/testcase/paramManage/addParam.action",e.sync=!1,e.load=d,$.maf.action.requestData(e,a)},editUser:function(a,b,c,d){a.addParameter("caseName",b),a.addParameter("sceneName",c);var e={};e.url=appPath+"/utf/testcase/paramManage/editParam.action",e.sync=!1,e.load=d,$.maf.action.requestData(e,a)},deleteParam:function(a,b){for(var c=new DataCenter,d=0;d<a.length;d++)c.addParameter(a[d],a[d]);var e={};e.url=appPath+"/utf/testcase/paramManage/deleteParam.action",e.sync=!1,e.load=b,$.maf.action.requestData(e,c)},getAllCaseInfo:function(a,b){var c=new DataCenter;c.addParameter("caseName",b);var d={};d.url=appPath+"/utf/testcase/paramManage/getAllCaseInfo.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)},doSearchParamInfo:function(a,b,c,d,e,f,g,h){var i=new DataCenter;i.addParameter("varName",a),i.addParameter("varGroup",b),i.addParameter("varValue",c),i.addParameter("varType",d),i.addParameter("varLevel",e),i.addParameter("caseId",f),i.addParameter("sceneId",g);var j={};j.url=appPath+"/utf/testcase/paramManage/doSearchParamInfo.action",j.sync=!1,j.load=h,$.maf.action.requestData(j,i)},getSceneByProject:function(a){var b=new DataCenter,c={};c.url=appPath+"/utf/testcase/paramManage/getScene.action",c.sync=!1,c.load=a,$.maf.action.requestData(c,b)},queryIdMatchedUserView:function(a,b){var c=new DataCenter;c.addParameter("id",b);var d={};d.url=appPath+"/utf/system/user/queryIdMatchedUserView.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)},queryAccountMatchedUserViews:function(a,b){var c=new DataCenter;c.addParameter("account",b);var d={};d.url=appPath+"/utf/system/user/queryAccountMatchedUserViews.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)},getAllUserViews:function(a){var b={};b.url=appPath+"/utf/system/user/getAllUserViews.action",b.sync=!1,b.load=a,$.maf.action.requestData(b)},getAllAuthorizeInfo:function(a,b){var c={};c.url=appPath+"/utf/system/user/getAllAuthorizeInfo.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},saveResourceAuthorities:function(a,b){var c={};c.url=appPath+"/utf/system/user/saveResourceAuthorities.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},getParam:function(a,b,c,d){var e=new DataCenter;e.addParameter("sceneId",a),e.addParameter("caseId",b),e.addParameter("caseName",c);var f={};f.url=appPath+"/utf/testcase/paramManage/getParam.action",f.sync=!1,f.load=d,$.maf.action.requestData(f,e)},saveParam:function(a,b,c,d,e){var f=new DataCenter;f.addParameter("paramJson",a),f.addParameter("sceneId",b),f.addParameter("caseId",c),f.addParameter("varLevel",d);var g={};g.url=appPath+"/utf/testcase/paramManage/saveParam.action",g.sync=!1,g.load=e,$.maf.action.requestData(g,f)}}}($.ude.rpc);