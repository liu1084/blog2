/* All right reserved by Neusoft Co. Ltd. 2016-10-14 09:10:13 */
!function(a){function b(){a("#projectTypehead").data("searchKeyWord",null),a("#projectTypehead").data("searchKey",null),a("#projectUserTypehead").data("searchProjectUserKeyWord",null),a("#projectUserTypehead").data("searchProjectUserKey",null),a("#projectTable").data("projectStore",null),a("#projectUserTable").data("projectUserStore",null)}function c(){return a("#methodTable").data("methodStore")}function d(b){a("#methodTable").data("methodStore",b),b.addRowData=function(a){b.getRowSet().addRow(a)},b.deleteRowData=function(a,c){c=c?c:"id";for(var d=b.getRowSet().getRowCount(),e=null,f=-1,g=0;g<d;g++)if(e=b.getRowSet().getRow(g),e.getItemValue(c)==a[c]){f=g;break}f<0||b.getRowSet().deleteRow(f)},b.updateRowData=function(a,c){c=c?c:"id";for(var d=b.getRowSet().getRowCount(),e=null,f=0;f<d&&(e=b.getRowSet().getRow(f),e.getItemValue(c)!=a[c]);f++);if(e)for(var g in a)e.setItemValue(g,a[g])}}function e(){return a("#projectUserTable").data("projectUserStore")}function f(b){a("#eventTable").data("eventStore",b),b.addRowData=function(a){b.getRowSet().addRow(a)},b.deleteRowData=function(a,c){c=c?c:"id";for(var d=b.getRowSet().getRowCount(),e=null,f=-1,g=0;g<d;g++)if(e=b.getRowSet().getRow(g),e.getItemValue(c)==a[c]){f=g;break}f<0||b.getRowSet().deleteRow(f)},b.updateRowData=function(a,c){c=c?c:"id";for(var d=b.getRowSet().getRowCount(),e=null,f=0;f<d&&(e=b.getRowSet().getRow(f),e.getItemValue(c)!=a[c]);f++);if(e)for(var g in a)e.setItemValue(g,a[g])}}function g(b){a("#projectTypehead").data("searchKeyWord",b)}function h(){return a("#projectTypehead").data("searchKeyWord")}function i(b){a("#projectTypehead").data("searchKey",b)}function j(){return a("#projectTypehead").data("searchKey")}function k(b){a("#projectUserTypehead").data("projectUserSearchKeyWord",b)}function l(){return a("#projectUserTypehead").data("projectUserSearchKeyWord")}function m(b){a("#projectUserTypehead").data("projectUserSearchKey",b)}function n(){return a("#projectUserTypehead").data("projectUserSearchKey")}a.ude.page.testcase.caseDesign.editparameter={initParameters:b,getMethodStore:c,setMethodStore:d,getProjectUserStore:e,setEventStore:f,setSearchKeyWord:g,getSearchKeyWord:h,setSearchKey:i,getSearchKey:j,setProjectUserSearchKeyWord:k,getProjectUserSearchKeyWord:l,setProjectUserSearchKey:m,getProjectUserSearchKey:n}}(jQuery),function(a){function b(a){a!==!1&&c(),e(),f()}function c(b){a("#eventTable").udeTable({data:b,columns:[{sTitle:a.i18n.prop("testcase.caseeditevent.initEventGrid.controlType"),mData:"controlType",sWidth:"18%"},{sTitle:a.i18n.prop("testcase.caseeditevent.initEventGrid.name"),mData:"name",sWidth:"18%"},{sTitle:a.i18n.prop("testcase.caseeditevent.initEventGrid.operActionId"),mData:"operActionId",sWidth:"18%"},{sTitle:a.i18n.prop("testcase.caseeditevent.initEventGrid.varValue"),mData:Y,sWidth:"18%"},{sTitle:a.i18n.prop("testcase.caseeditevent.initEventGrid.eventDesc"),mData:"eventDesc",sWidth:"21%"},{sTitle:a.i18n.prop("testcase.caseeditevent.initEventGrid.wait"),mData:"wait",sWidth:"7%"}],dblClick:function(a){G()},onClick:function(b){if(a("#pageObjectDiv").length>0&&(ia=b.controlId,ia!=b.name)){a("#savedImage").click();var c=a.ude.page.config.projectStructure.main.treeAttribution();c.menuId!=b.objectMenuId?(a.ude.page.config.projectStructure.main.caseClickSelectNode(b.objectMenuId),setTimeout("$.ude.page.testcase.caseDesign.eventjs.selectRow()",2e3)):d()}}})}function d(){for(var b=a("#pageObjectTable").udeTable().fnGetData(),c=-1,d=0;d<b.length;d++){var e=b[d],f=e.id;if(ia==f){c=d;break}}if(c!=-1){a("#autoPageObject").click(),a("#pageObjectTable").udeTable().fnSelectRowByIndex(c),a("#pageObjectTable").udeTable().fnScrollToSelectedRow();var e=a("#pageObjectTable").udeTable().fnGetSelectedRowData(),g=a("#pageObjectTable").udeTable().data("onClick");g(e)}else{for(var b=a("#pageObjectTableM").udeTable().fnGetData(),d=0;d<b.length;d++){var e=b[d],f=e.id;if(ia==f){c=d;break}}if(c!=-1){a("#manualPageObject").click(),a("#pageObjectTableM").udeTable().fnSelectRowByIndex(c),a("#pageObjectTableM").udeTable().fnScrollToSelectedRow();var e=a("#pageObjectTableM").udeTable().fnGetSelectedRowData(),g=a("#pageObjectTableM").udeTable().data("onClick");g(e)}}}function e(){a("#addObjectBtn").bind("click",function(a){m()}),a("#addObjectBtnSub").bind("click",function(a){n()}),a("#addParameterBtn").bind("click",function(a){v()}),a("#addParameterBtnSub").bind("click",function(a){w()}),a("#addEventBtn").bind("click",function(a){D()}),a("#editEventBtn").bind("click",function(a){G()}),a("#upEventBtn").bind("click",function(a){M()}),a("#downEventBtn").bind("click",function(a){N()}),a("#deleteEventBtn").bind("click",function(a){J()}),a(".select2-result-label").live("mouseover",function(){var b=a(this).text(),c=a("#controlId").udeSelect().getData();if(c)for(var d=0;d<c.length;d++){var e=c[d];e.name==b&&e.title&&a(this).attr("title",e.title)}}),a("#interactiveObjectDiv").find("input:radio").bind("click",function(a){O()}),a("#interactiveTypeDiv").find("input:radio").bind("click",function(a){P()}),ca=a("#eventElementType").udeSelect({onChange:function(){var b=a("#eventElementType").udeSelect().getNameValue().toLowerCase();"gridcell"===b||"gridrow"===b||"treenode"===b?(a("#textTr").hide(),a("#gridTr").show(),"gridcell"===b?(a("#gridIdTitleId").show(),a("#rowIdTitleId").show(),a("#treeIdTitleId").hide(),a("#treeNodeIdTitleId").hide(),a("#columnIdTitleTd").show(),a("#columnIdTextTd").show()):"gridrow"===b?(a("#gridIdTitleId").show(),a("#rowIdTitleId").show(),a("#treeIdTitleId").hide(),a("#treeNodeIdTitleId").hide(),a("#columnIdTitleTd").hide(),a("#columnIdTextTd").hide()):(a("#gridIdTitleId").hide(),a("#rowIdTitleId").hide(),a("#treeIdTitleId").show(),a("#treeNodeIdTitleId").show(),a("#columnIdTitleTd").hide(),a("#columnIdTextTd").hide())):(a("#textTr").show(),a("#gridTr").hide())}}),a("#controlId").udeSelect({onChange:function(){var b=a("#controlId").udeSelect().getNameValue();if(b){var c=a("#operActionId").udeSelect().getNameValue(),d=new RegExp("(^set)|(^sendKey)");a("#eventOper").is(":checked")&&d.test(c)&&a("#varId").udeSelect().setValue(b)}}}),ea=a("#operActionId").udeSelect({}),da=a("#controlType").udeSelect({onChange:function(){var b=a("#controlType").udeSelect().getValue(),c=a("#controlType").udeSelect().getSelectData();c[b]&&(a("#eventOper").is(":checked")&&c[b][0]&&(a("#operActionId").udeSelect().setData(c[b]),a("#operActionId").udeSelect().setValue(c[b][0].id)),T(b))}}),a(".common-buttons-item").unbind("setDisableT"),a(".common-buttons-item").unbind("setDisableF"),a(".common-buttons-item").bind("setDisableT",function(b){var c=b.currentTarget.className;b.currentTarget.className=c.indexOf("-unavailable")<0?c+"-unavailable":c,a(b.currentTarget).attr("disabled","disabled")}),a(".common-buttons-item").bind("setDisableF",function(b){var c=b.currentTarget.className;b.currentTarget.className=c.replace("-unavailable",""),a(b.currentTarget).removeAttr("disabled")})}function f(){a("#eventWait").prop("maxlength",10),a("#eventSaveId").click(function(){var b=a.trim(a("#controlType").val());if(!b||""===b)return showMessage(a.i18n.prop("testcase.caseeditevent.initEventDialog.controlType"),a("#eventDialog"),"error"),void a("#controlType").udeSelect().focus();var c=a.trim(a("#operActionId").val());if(!c||""===c)return showMessage(a.i18n.prop("testcase.caseeditevent.initEventDialog.operActionId"),a("#eventDialog"),"error"),void a("#operActionId").udeSelect().focus();var d=a("#interactiveObjectDiv").find("input:radio:checked").val(),e=a.trim(a("#varId").val()),f=a.trim(a("#controlId").val());if(e&&""!==e||!f||""===f)F();else{var d=a("#controlId").udeSelect().getNameValue(),i=a("#operActionId").udeSelect().getNameValue(),j=new RegExp("(^set)|(^sendKey)"),k=!1;if(a("#eventOper").is(":checked")&&j.test(i)){for(var l=a("#varId").udeSelect().getData(),m=0;m<l.length;m++)if(d==l[m].id){k=!0;break}k?a.ude.util.confirm(a.i18n.prop("testcase.caseeditevent.initEventDialog.isUseParam")+'"'+d+'"?',g,F):a.ude.util.confirm(a.i18n.prop("testcase.caseeditevent.initEventDialog.isAddParam")+'"'+d+'"?',h,F)}else F()}}),a("#objectSaveId").click(function(){var b=a.trim(a("#eventElementType").val());if(!b||""===b)return showMessage(a.i18n.prop("testcase.caseeditevent.initEventDialog.objectElementType"),a("#objectDialog"),"error"),void a("#eventElementType").focus();var c="";if("gridcell"===b.toLowerCase()){var d=a("#rowId").val(),e=a("#columnId").val();if(!d||""===d||!e||""===e)return showMessage(a.i18n.prop("testcase.caseeditevent.initEventDialog.objectEventName"),a("#objectDialog"),"error"),void a("#girdId").focus();c=a.trim(a("#girdId").val())+",${"+a("#rowId").val()+"},"+a.trim(a("#columnId").val())}else if("gridrow"===b.toLowerCase()||"treenode"===b.toLowerCase()){var d=a("#rowId").val();if(!d||""===d)return showMessage(a.i18n.prop("testcase.caseeditevent.initEventDialog.objectEventName"),a("#objectDialog"),"error"),void a("#girdId").focus();c=a.trim(a("#girdId").val())+",${"+a("#rowId").val()+"}"}else if(c=a.trim(a("#name").val()),!c||""===c)return showMessage(a.i18n.prop("testcase.caseeditevent.initEventDialog.objectEventName"),a("#objectDialog"),"error"),void a("#name").focus();return c.indexOf('"')>0?void showMessage("\u63a7\u4ef6\u6807\u793a\u4e2d\u4e0d\u80fd\u5b58\u5728\u53cc\u5f15\u53f7",a("#objectDialog"),"error"):void p()}),a("#parameterSaveId").click(function(){var b=a.trim(a("#parameterName").val());return b&&""!==b?void x():(showMessage(a.i18n.prop("testcase.caseeditevent.initEventDialog.parameterName"),a("#parameterDialog"),"error"),void a("#parameterName").focus())})}function g(){var b=a("#controlId").udeSelect().getNameValue();a("#varId").udeSelect().setValue(b),F()}function h(){var b=a("#controlId").udeSelect().getNameValue(),c=a.ude.page.testcase.scenedesign.main.getCurrentNode(),d="";if(c)var d=c.paramGroup;var e={};e.varName=b,e.varType="2",e.varGroup=d,e.varValue="",e.varLevel="3",e.caseId=aa.caseId,e.sceneId="";var f="",g="",h=new DataCenter,j=new DataStore(_);j.setRowSetName(_),j.getRowSet().addRow(e),h.addDataStore(j),a.ude.rpc.param.addUser(h,f,g,i)}function i(){var b=ba;b.caseId=aa.caseId,b.methodId=a("#methodTable").udeTable().fnGetSelectedRowData().methodId,b.controlType=a("#controlType").val(),b.controlId=a.trim(a("#controlId").val()),b.operActionId=a.trim(a("#operActionId").val());var c=a("#controlId").udeSelect().getNameValue();b.varId=c,b.wait=a.trim(a("#eventWait").val()),b.eventDesc=a.trim(a("#eventDesc").val()),b.interactiveObject=a("#interactiveObjectDiv").find("input:radio:checked").val(),b.interactiveType=a("#interactiveTypeDiv").find("input:radio:checked").val();var d=new DataCenter,e=new DataStore($);e.setRowSetName($),e.getRowSet().addRow(b),d.addDataStore(e),a("#eventDialog").prop("add")?H(d):I(d)}function j(b,c){aa=b,na=c;var d=a("#methodTable").udeTable().fnGetSelectedRowData(),e=d.methodId,f=a.ude.page.testcase.scenedesign.main.getCurrentNode();if(f){var g=f.sceneId,h=f.paramGroup;a.ude.rpc.testcaseeditrpc.getEventByMethodId(k,e,g,h)}else a.ude.rpc.testcaseeditrpc.getEventByMethodId(k,e,"","")}function k(b){if(!b)return void showMessage(a.i18n.prop("testcase.caseeditevent.getEventByMethodIdSuccess.showMessage"),null,"error");if("1"===b.getCode())return void showMessage(b.getDetail(),null,"error");if(b){var c=b.getDataStore("eventStore");l(c.getRowSet().getData())}}function l(b){a("#eventTable").udeTable().dataTable().fnClearTable();for(var c=0;c<b.length;c++)a("#eventTable").udeTable().fnAddRow(b[c])}function m(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();return null==b?void showMessage(a.i18n.prop("testcase.caseeditevent.addObject.showMessage"),a("#methodTable"),"error"):(o(),V(),a("#objectDialog").prop("add",!0),void a.ude.dialog.open("objectDialog",{title:a.i18n.prop("testcase.caseeditevent.addObject.objectDialog"),width:"500px"}))}function n(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();if(null==b)return void showMessage(a.i18n.prop("testcase.caseeditevent.addObject.showMessage"),a("#methodTable"),"error");o();var c=a("#controlType").udeSelect().getValue();a("#eventElementType").udeSelect().setValue(c);var d=c.toLowerCase();"gridcell"===d||"gridrow"===d||"treenode"===d?(a("#textTr").hide(),a("#gridTr").show(),"gridcell"===d?(a("#gridIdTitleId").show(),a("#rowIdTitleId").show(),a("#treeIdTitleId").hide(),a("#treeNodeIdTitleId").hide(),a("#columnIdTitleTd").show(),a("#columnIdTextTd").show()):"gridrow"===d?(a("#gridIdTitleId").show(),a("#rowIdTitleId").show(),a("#treeIdTitleId").hide(),a("#treeNodeIdTitleId").hide(),a("#columnIdTitleTd").hide(),a("#columnIdTextTd").hide()):(a("#gridIdTitleId").hide(),a("#rowIdTitleId").hide(),a("#treeIdTitleId").show(),a("#treeNodeIdTitleId").show(),a("#columnIdTitleTd").hide(),a("#columnIdTextTd").hide())):(a("#textTr").show(),a("#gridTr").hide()),a("#objectDialog").prop("add",!0),a.ude.dialog.open("objectDialog",{title:a.i18n.prop("testcase.caseeditevent.addObject.objectDialog"),width:"500px"})}function o(){a("#eventElementType").val(""),a("#name").val(""),a("#girdId").val(""),a("#rowId").val(""),a("#columnId").val(""),a("#description").val(""),a("#belongFrame").val("")}function p(){var b={},c=a("#eventElementType").val();b.elementType=c;var d="";d="gridcell"===c.toLowerCase()?a.trim(a("#girdId").val())+",${"+a("#rowId").val()+"},"+a.trim(a("#columnId").val()):"gridrow"===c.toLowerCase()||"treenode"===c.toLowerCase()?a.trim(a("#girdId").val())+",${"+a("#rowId").val()+"}":a.trim(a("#name").val()),b.name=d,b.description=a.trim(a("#description").val()),b.belongFrame=a.trim(a("#belongFrame").val()),b.analyseKind="manual",b.isEnabled="T",b.menuId=aa.parentCaseId;var e=new DataCenter,f=new DataStore(Z);f.setRowSetName(Z),f.getRowSet().addRow(b),e.addDataStore(f),a.ude.rpc.testcaseeditrpc.addObject(e,q),a.ude.dialog.close(),showMessage(a.i18n.prop("testcase.caseeditevent.saveObject.showMessage"),a("#eventTable"),"")}function q(b){if(b&&"0"===b.getCode())V(),window.setTimeout(s(b),500);else{var c=b.getDetail();showMessage(c,a("#objectDialog"),"error")}}function r(b){var c=a("#interactiveObjectDiv").find("input:radio:checked").val();if("pageObj"===c){var d=b.getParameter("elementType"),e=b.getParameter("id");a("#controlType").udeSelect().setValue(d);var f=a("#controlType").udeSelect().getValue(),g=a("#controlType").udeSelect().getSelectData();g[f]&&(a("#eventOper").is(":checked")&&g[f][0]&&(a("#operActionId").udeSelect().setData(g[f]),a("#operActionId").udeSelect().setValue(g[f][0].id)),T(f)),window.setTimeout(u(e),500)}else"sqlObj"===c&&(a("#controlType").udeSelect().setData(ma),a("#controlType").udeSelect().setValue(ma.id))}function s(a){return function(){r(a)}}function t(b){a("#controlId").udeSelect().setValue(b)}function u(a){return function(){t(a)}}function v(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();return null==b?void showMessage(a.i18n.prop("testcase.caseeditevent.addObject.showMessage"),a("#methodTable"),"error"):(a("#parameterName").val(""),a("#parameterGroup").val(""),a("#parameterValue").val(""),a("#parameterTypeA").attr("checked",!0),a("#parameterLevelB").attr("checked",!0),a("#parameterGroup").attr("readonly",!1),a("#parameterValue").attr("readonly",!1),void a.ude.dialog.open("parameterDialog",{title:a.i18n.prop("testcase.caseeditevent.addParameter.parameterDialog"),width:"500px"}))}function w(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();if(null==b)return void showMessage(a.i18n.prop("testcase.caseeditevent.addObject.showMessage"),a("#methodTable"),"error");var c=a.trim(a("#controlType").val());"custom"!=c&&a("#parameterName").val(a("#controlId").udeSelect().getNameValue());var d=a.ude.page.testcase.scenedesign.main.getCurrentNode(),e="";if(d)var e=d.paramGroup;a("#parameterGroup").val(e),a("#parameterValue").val(""),a("#parameterTypeA").attr("checked",!0),a("#parameterLevelB").attr("checked",!0),a("#parameterGroup").attr("readonly",!1),a("#parameterValue").attr("readonly",!1),a.ude.dialog.open("parameterDialog",{title:a.i18n.prop("testcase.caseeditevent.addParameter.parameterDialog"),width:"500px"})}function x(){var b={};b.varName=a.trim(a("#parameterName").val()),b.varType=a('input:radio[name="parameterTypeG"]:checked').val(),b.varGroup=a.trim(a("#parameterGroup").val()),b.varValue=a.trim(a("#parameterValue").val()),b.varLevel=a('input:radio[name="parameterLevelG"]:checked').val(),b.caseId=aa.caseId,b.sceneId="";var c="",d="",e=new DataCenter,f=new DataStore(_);f.setRowSetName(_),f.getRowSet().addRow(b),e.addDataStore(f),a.ude.rpc.param.addUser(e,c,d,y)}function y(b){if(b&&"0"===b.getCode())a.ude.page.testcase.sqlConfig.main.initSql(),a.ude.page.testcase.caseDesign.main.initResizeHandler(),S(),window.setTimeout(A(b),500),a.ude.dialog.close(),showMessage(a.i18n.prop("testcase.caseeditevent.newParamComplete.showMessage"),a("#eventTable"),"");else{var c=b.getDetail();showMessage(c,a("#parameterDialog"),"error")}}function z(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,e=(a("#varId").udeSelect().getData(),a("#interactiveObjectDiv").find("input:radio:checked").val());a("#varId").udeSelect().setValue(d.varName),"sqlObj"===e&&(a("#controlType").udeSelect().setData(ma),a("#controlType").udeSelect().setValue(ma.id))}function A(a){return function(){z(a)}}function B(){var b=a('input:radio[name="parameterTypeG"]:checked').val();"2"===b?(a("#parameterValue").val(""),a("#parameterValue").attr("readonly",!0)):a("#parameterValue").attr("readonly",!1)}function C(b){var c=a('input:radio[name="parameterLevelG"]:checked').val();"3"===c?a("#parameterGroup").attr("readonly",!1):"1"===c&&(a("#parameterGroup").val(""),a("#parameterGroup").attr("readonly",!0))}function D(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();return null==b?void showMessage(a.i18n.prop("testcase.caseeditevent.addObject.showMessage"),a("#methodTable"),"error"):(a("#sqlTableDiv").hide(),E(),a("#eventDialog").prop("add",!0),a.ude.dialog.open("eventDialog",{title:a.i18n.prop("testcase.caseeditevent.addEvent.eventDialog"),width:"700px"}),a.ude.page.testcase.sqlConfig.main.initSql(),a.ude.page.testcase.caseDesign.main.initResizeHandler(),S(),V(),a("#interactiveObjectDiv").find("input:radio").removeAttr("disabled"),a("#pageControl").attr("checked",!0),a("#interactiveTypeDiv").find("input:radio").removeAttr("disabled"),a("#eventOper").attr("checked",!0),void a("#controlType").udeSelect().focus())}function E(){ba={},a("#controlType").udeSelect().setReadOnly(!1),a("#operActionId").udeSelect().setReadOnly(!1),a("#eventWait").val("1"),a("#eventDesc").val(""),a("#controlType").udeSelect().clear(),a("#controlId").udeSelect().clear(),a("#operActionId").udeSelect().clear(),a("#varId").udeSelect().clear(),fa=null,ga=null,ha=null,ia=null,ja=null}function F(){var b=ba;b.caseId=aa.caseId,b.methodId=a("#methodTable").udeTable().fnGetSelectedRowData().methodId,b.controlType=a("#controlType").val(),b.controlId=a.trim(a("#controlId").val()),b.operActionId=a.trim(a("#operActionId").val()),b.varId=a("#varId").val(),b.wait=a.trim(a("#eventWait").val()),b.eventDesc=a.trim(a("#eventDesc").val()),b.interactiveObject=a("#interactiveObjectDiv").find("input:radio:checked").val(),b.interactiveType=a("#interactiveTypeDiv").find("input:radio:checked").val();var c=new DataCenter,d=new DataStore($);d.setRowSetName($),d.getRowSet().addRow(b),c.addDataStore(d),a("#eventDialog").prop("add")?H(c):I(c)}function G(){var b=a("#eventTable").udeTable().fnGetSelectedRowData();return null==b?void showMessage(a.i18n.prop("testcase.caseeditevent.editEvent.showMessage"),a("#eventTable"),"error"):(ba=b,a("#eventWait").val(ba.wait),a("#eventDesc").val(ba.eventDesc),fa=b.controlType,ga=b.operActionId,ha=b.varId,ia=b.controlId,ja=b.name,a.ude.page.testcase.sqlConfig.main.initSql(),a.ude.page.testcase.caseDesign.main.initResizeHandler(),S(),V(),"pageObj"===b.interactiveObject?a("#pageControl").attr("checked",!0):a("#queryDB").attr("checked",!0),"operType"===b.interactiveType?a("#eventOper").attr("checked",!0):"assertType"===b.interactiveType?a("#eventAssert").attr("checked",!0):a("#eventTrendsDefine").attr("checked",!0),"pageObj"===b.interactiveObject?a("#sqlTableDiv").hide():(a("#sqlTableDiv").show(),a("#sqlTable").udeTable().fnResize()),a("#eventDialog").prop("add",!1),void a.ude.dialog.open("eventDialog",{title:a.i18n.prop("testcase.caseeditevent.editEvent.eventDialog"),width:"700px"}))}function H(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,e=function(b){if(b&&"0"===b.getCode()){var c=b.getSingleDataStore();d=c.getRowSet().getRow(0).data,a("#eventTable").udeTable().fnAddRow(d),j(aa,na),a.ude.dialog.close()}else{var e=b.getDetail();showMessage(e,a("#eventDialog"),"error")}};a.ude.rpc.testcaseeditrpc.addEvent(b,e)}function I(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,e=function(b){if(b&&"0"===b.getCode()){var c=b.getSingleDataStore();d=c.getRowSet().getRow(0).data,a("#eventTable").udeTable().fnUpdateRow(d),j(aa,na),a.ude.dialog.close()}else{var e=b.getDetail();showMessage(e,a("#eventDialog"),"error")}};a.ude.rpc.testcaseeditrpc.editEvent(b,e)}function J(){var b=a("#eventTable").udeTable().fnGetSelectedRowData();return deletedEvent=b,b?void a.ude.util.confirm(a.i18n.prop("testcase.caseedit.deleteMethod.showMessageQ"),K):void showMessage(a.i18n.prop("testcase.caseedit.deleteMethod.showMessage"),a("#eventTable"),"error")}function K(){var b=a("#eventTable").udeTable().fnGetSelectedRowData();a.ude.rpc.testcaseeditrpc.deleteEvent(b.eventId,L)}function L(b){if(b&&"0"===b.getCode())a("#eventTable").udeTable().fnDeleteRow();else{var c=b.getDetail();showMessage(c,null,"error")}}function M(){var b=a("#eventTable").udeTable().fnGetSelectedRowData();if(!b)return void showMessage(a.i18n.prop("testcase.caseedit.upMethod.moveup"),a("#eventTable"),"error");var c=a("#eventTable").udeTable().fnGetSelectedRowDataIndex();if(0!==c){a("#eventTable").udeTable().fnMoveRow(b,"up");var d=a("#eventTable").udeTable().fnGetSelectedRowDataIndex(),e=a("#eventTable").udeTable().fnGetRowData(d+1).eventOrder,f=a("#eventTable").udeTable().fnGetSelectedRowData().eventOrder,g=a("#eventTable").udeTable().fnGetSelectedRowData();g.eventOrder=e;var h=a("#eventTable").udeTable().fnGetRowData(d+1);h.eventOrder=f;var i=new DataCenter,j=new DataStore($);j.setRowSetName($),j.getRowSet().addRow(g),j.getRowSet().addRow(h),i.addDataStore(j),a.ude.rpc.testcaseeditrpc.upORdownEvent(i)}}function N(){var b=a("#eventTable").udeTable().fnGetSelectedRowData();if(!b)return void showMessage(a.i18n.prop("testcase.caseedit.upMethod.movedown"),a("#eventTable"),"error");var c=a("#eventTable").udeTable().fnGetSelectedRowDataIndex()+1,d=a("#eventTable").udeTable().fnGetData().length;if(c!==d){a("#eventTable").udeTable().fnMoveRow(b,"down");var e=a("#eventTable").udeTable().fnGetSelectedRowDataIndex(),f=a("#eventTable").udeTable().fnGetRowData(e-1).eventOrder,g=a("#eventTable").udeTable().fnGetSelectedRowData().eventOrder,h=a("#eventTable").udeTable().fnGetSelectedRowData();h.eventOrder=f;var i=a("#eventTable").udeTable().fnGetRowData(e-1);i.eventOrder=g;var j=new DataCenter,k=new DataStore($);k.setRowSetName($),k.getRowSet().addRow(h),k.getRowSet().addRow(i),j.addDataStore(k),a.ude.rpc.testcaseeditrpc.upORdownEvent(j)}}function O(){var b=a("#interactiveObjectDiv").find("input:radio:checked").val();if("pageObj"===b)a("#operActionId").udeSelect().setReadOnly(!1),a("#eventOper").removeAttr("disabled"),a("#eventOper").attr("checked",!0),a("#controlType").udeSelect().setReadOnly(!1),a("#controlType").udeSelect().clear(),a("#operActionId").udeSelect().clear(),a("#controlId").udeSelect().clear(),a("#sqlTableDiv").hide(),V(),S();else if("sqlObj"===b)return a("#operActionId").udeSelect().setReadOnly(!1),a("#eventAssert").attr("checked",!0),a("#eventOper").attr("disabled","disabled"),a("#controlType").udeSelect().setData(ma),a("#controlType").udeSelect().setValue(ma.id),a("#controlType").udeSelect().setReadOnly(!0),a("#controlId").udeSelect().clear(),a("#sqlTableDiv").show(),a("#sqlTable").udeTable().fnResize(),a.ude.rpc.testcaseeditrpc.queryAssertOper(R),void S()}function P(){var b=a("#interactiveTypeDiv").find("input:radio:checked").val();return"assertType"===b?(a("#operActionId").udeSelect().setReadOnly(!1),void a.ude.rpc.testcaseeditrpc.queryAssertOper(R)):"operType"===b?(a("#operActionId").udeSelect().setReadOnly(!1),a("#controlType").udeSelect().clear(),a("#operActionId").udeSelect().clear(),a("#controlId").udeSelect().clear(),V(),void S()):"defineType"===b?(a("#controlType").udeSelect().setReadOnly(!1),a("#operActionId").udeSelect().setData(la),a("#operActionId").udeSelect().setValue(la.id),a("#queryDB").is(":checked")&&a("#controlType").udeSelect().setReadOnly(!0),a("#operActionId").udeSelect().setReadOnly(!0),void S(b)):void 0}function Q(b,c){var d=a("#interactiveObjectDiv").find("input:radio:checked").val();if("sqlObj"===d){var e={id:c,name:c};a("#controlId").udeSelect().setData(e),a("#controlId").udeSelect().setValue(e.id)}}function R(b){var c=b.getDataStore("queryAssertOperStore");if(c.getRowSet().getRowCount()>0){queryAssertOper$=a("#operActionId").udeSelect({});for(var d=c.getRowSet().getData(),e=0;e<d.length;e++)d[e].name=d[e].codename,d[e].id=d[e].codevalue;queryAssertOper$.setData(d),queryAssertOper$.setValue(d[0].id),ga&&a("#eventAssert").is(":checked")===!0&&a("#operActionId").udeSelect().setValue(ga)}}function S(b){var c="",d="",e="",f=a.ude.page.testcase.scenedesign.main.getCurrentNode();if(f){var g=f.sceneId,h=f.paramGroup;d=h+";;"+g+";;"+aa.caseId,e="utf_testcase_arg_define_t1"}else d=aa.caseId,e="utf_testcase_arg_define_t2";"defineType"===b?(d=d+";;"+aa.projId,e+="1"):(d=d+";;"+aa.projId,e+="2"),c={widgetId:"varId",widgetType:"dropdownbox",tableName:e,objectName:"",objectValue:"",condition:d,expandStr:""};var i=new DataCenter,j=new DataStore("commonDs");j.setRowSetName("commonDs"),j.getRowSet().addRow(c),i.addDataStore(j),a.ude.rpc.testcaseeditrpc.getComboBoxDataCommon(i,U)}function T(b){var c="";c=aa.belongpage?"'"+aa.parentCaseId+"'":na;var d={widgetId:"controlId",widgetType:"dropdownbox",tableName:"utf_page_analyse_result_t",objectName:"",objectValue:"",condition:c+";;"+aa.projId+";;"+b,expandStr:""},e=new DataCenter,f=new DataStore("commonDs");f.setRowSetName("commonDs"),f.getRowSet().addRow(d),e.addDataStore(f),a.ude.rpc.testcaseeditrpc.getComboBoxDataCommon(e,U)}function U(b){for(var c in b.getDataStores()){var d=b.getDataStores()[c],e=d.getParameter("widgetId"),f=d.getParameter("widgetType"),g=a("#"+e),h=d.parameters.data;if("dropdownbox"===f){if(g.udeSelect({onChange:function(){var b=a("#interactiveObjectDiv").find("input:radio:checked").val();if("controlId"===e&&"pageObj"===b){var c=a("#controlId").udeSelect().getSelectData();c&&(ka=c.expand1)}}}),g.setData(h),"varId"===e){var i=a("#rowId");i.udeSelect({}),i.setData(h)}}else"pickListSingle"===f&&(g.pickListSingle({label:"CODENAME",width:g.width()+"px"}),g.pickListSingle("redraw",h));if(ha&&"varId"===e&&g.setValue(ha),ia&&"controlId"===e){if(a("#pageObjectDiv").length>0){var j=g.udeSelect().getData(),k=!1;if(j)for(var l=0;l<j.length;l++)if(j.id==ia){k=!0;break}if(!k){var m=new Object;ia!=ja&&(m.id=ia,m.name=ja,m.expand1="",j.push(m),g.setData(j))}g.setValue(ia)}else g.setValue(ia);var n=a("#controlId").udeSelect().getSelectData();n&&(ka=n.expand1)}"varId"===e&&a("#s2id_"+e).find(".select2-search-choice-close").show(),"controlId"===e&&a("#s2id_"+e).find(".select2-search-choice-close").show()}}function V(){var b=new DataCenter,c=new DataStore("commonDs");c.setRowSetName("commonDs"),b.addDataStore(c),a.ude.rpc.testcaseeditrpc.getAllElementType(b,W)}function W(b){var c=[],d=[];b.getDataStore("utf_dic_control_type_t")&&(c=b.getDataStore("utf_dic_control_type_t").parameters.data),b.getDataStore("utf_oper_conf_info_t")&&(d=b.getDataStore("utf_oper_conf_info_t").parameters.data);var e=b.getParameter("elementTypeList"),f=new Array,g=0;for(var h in e){f[g]={id:c[h]?c[h]:X(h),name:c[h]?c[h]:X(h)};var i=e[h],j=new Array,k=0;for(var l in i)j[k++]={id:i[l],name:d[i[l]]?d[i[l]]:i[l]};f[g++][c[h]?c[h]:X(h)]=j}if(da.setData(f),fa){da.setValue(fa);var m=da.getSelectData();if(m[fa]){a("#eventAssert").is(":checked")&&a.ude.rpc.testcaseeditrpc.queryAssertOper(R),a("#eventTrendsDefine").is(":checked")&&(a("#operActionId").udeSelect().setReadOnly(!1),a("#operActionId").udeSelect().setData(la),a("#operActionId").udeSelect().setValue(la.id),a("#operActionId").udeSelect().setReadOnly(!0)),a("#eventOper").is(":checked")&&(ea.setData(m[fa]),ea.setValue(ga));var n=a("#interactiveObjectDiv").find("input:radio:checked").val();if("pageObj"===n)T(fa);else if("sqlObj"===n){var o={id:ia,name:ia};a("#controlId").udeSelect().setData(o),a("#controlId").udeSelect().setValue(o.id)}}}ca.setData(f)}function X(a){return a.indexOf("[")>-1&&a.length>2?a.substring(1,a.length-1):a}function Y(b){var c=a("<div></div>");if("value"===b.varType){c.append("<div class='cellIconDiv label_25x17' />");var d=.18*a("#caseEditEventDown").width()-50+"px";c.append("<span class='cellSpan' style='width:"+d+";' title='"+b.varValue+"'>"+b.varValue+"</span>")}else c.append("<span title='"+b.varValue+"'>"+b.varValue+"</span>");return c.html()}a.ude.page.testcase.caseDesign.eventjs={initEvent:b,getEventByMethodId:j,setOperActionIdForSql:Q,clickParameterLevel:C,clickParamType:B,initEventGrid:c,doAddEvent:H,selectRow:d};var Z="com.neusoft.utf.portal.config.pageobject.entity.UtfPageAnalyseResult",$="com.neusoft.utf.portal.common.entity.TestcaseEvent",_="com.neusoft.utf.portal.common.entity.TestcaseArgDefine",aa="",ba={},ca="",da="",ea="",fa=null,ga=null,ha=null,ia=null,ja=null,ka="",la={id:"setParam",name:"setParam"},ma={id:"sql",name:"sql"},na=""}(jQuery),function(a){a.testcaseeditrpc={getMethod:function(a,b){var c=new DataCenter;c.addParameter("caseId",b);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseEdit/getMethod.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)},getEventByMethodId:function(a,b,c,d){var e=new DataCenter;e.addParameter("methodId",b),e.addParameter("paramSceneId",c),e.addParameter("paramParamGroup",d);var f={};f.url=appPath+"/utf/testcase/caseDesign/caseEdit/getEventByMethodId.action",f.sync=!1,f.load=a,$.maf.action.requestData(f,e)},addMethod:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseEdit/addMethod.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},addMethodInitMenu:function(a,b,c,d){var e=new DataCenter;e.addParameter("caseId",a),e.addParameter("parentCaseId",b),e.addParameter("QJinitMenu",c);var f={};f.url=appPath+"/utf/testcase/caseDesign/caseEdit/addMethodInitMenu.action",f.sync=!1,f.load=d,$.maf.action.requestData(f,e)},editMethod:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseEdit/editMethod.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},deleteMethod:function(a,b){var c=new DataCenter;c.addParameter("methodId",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseEdit/deleteMethod.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},addObject:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseEdit/addObject.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},addEvent:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseEdit/addEvent.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},editEvent:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseEdit/editEvent.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},deleteEvent:function(a,b){var c=new DataCenter;c.addParameter("eventId",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseEdit/deleteEvent.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},queryDicControlType:function(a){var b={};b.url=appPath+"/utf/testcase/caseDesign/caseEdit/queryDicControlType.action",b.sync=!1,b.load=a,$.maf.action.requestData(b)},queryAssertOper:function(a){var b={};b.url=appPath+"/utf/testcase/caseDesign/caseEdit/queryAssertOper.action",b.sync=!1,b.load=a,$.maf.action.requestData(b)},getComboBoxDataCommon:function(a,b){
var c={};c.url=appPath+"/utf/testcase/scenedesign/getComboBoxDataCommon.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},getAllElementType:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseEdit/getAllElementType.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},upORdownMethod:function(a){var b={};b.url=appPath+"/utf/testcase/caseDesign/caseEdit/upORdownMethod.action",b.sync=!1,$.maf.action.requestData(b,a)},upORdownEvent:function(a){var b={};b.url=appPath+"/utf/testcase/caseDesign/caseEdit/upORdownEvent.action",b.sync=!1,$.maf.action.requestData(b,a)}}}($.ude.rpc),function(a){function b(){d(),a("#caseEditMethodDown").css("height",a("#caseEditMethod").height()-a(".common-content-top").outerHeight()-4),a("#caseEditEventDown").css("height",a("#caseEditEvent").height()-a(".common-content-top").outerHeight()-1),e()}function c(b,c,d){E=b,F=c,G=d,a("#caseEditMethodDown").css("height",a("#caseEditMethod").height()-a(".common-content-top").outerHeight()-4),a("#caseEditEventDown").css("height",a("#caseEditEvent").height()-a(".common-content-top").outerHeight()-1),a.ude.rpc.testcaseeditrpc.getMethod(g,E.caseId),a("#eventTable").udeTable().dataTable().fnClearTable()}function d(){a("#methodRefresh").hide(),a("#methodRefreshDIV").hide(),a("#methodName").prop("maxlength",40),a("#wait").prop("maxlength",10),a("#frame").prop("maxlength",100),a("#elementFinder").prop("maxlength",10),a("#methodSaveId").click(function(){f()&&m()})}function e(){a("#addMethodBtn").bind("click",function(a){k()}),a("#editMethodBtn").bind("click",function(a){o()}),a("#upMethodBtn").bind("click",function(a){t()}),a("#downMethodBtn").bind("click",function(a){u()}),a("#deleteMethodBtn").bind("click",function(a){q()}),a("#returnEventBtn").bind("click",function(b){a.ude.page.testcase.caseDesign.main.treeClick(),a.ude.page.testcase.scenedesign.main.clearnCurrentNode()}),a("#initMenuCheck").find("input:radio").bind("click",function(a){v()}),a("#methodMoreConfigBtn").bind("click",function(){"none"===a("#methodMoreConfig")[0].style.display?(a("#methodMoreConfigBtn")[0].className="testcase-buttons-item opt-closeup",a("#methodMoreConfig").css("display","block")):(a("#methodMoreConfig").css("display","none"),a("#methodMoreConfigBtn")[0].className="testcase-buttons-item opt-openall")})}function f(){var b=a.trim(a("#methodName").val());return!(!b||""===b)||(showMessage(a.i18n.prop("testcase.caseedit.checkAvailability.methodName"),a("#methodDialog"),"error"),a("#methodName").focus(),!1)}function g(b){if(!b)return void showMessage(a.i18n.prop("testcase.caseedit.getMethodInfoSuccess.dc"),null,"error");if("1"===b.getCode())return void showMessage(b.getDetail(),null,"error");if(b){var c=b.getDataStore("methodStore");B.setMethodStore(c),h(c.getRowSet().getData())}}function h(b){a("#methodTable").udeTable().dataTable().fnClearTable();for(var c=0;c<b.length;c++)a("#methodTable").udeTable().fnAddRow(b[c]);C.getEventByMethodId(E,G)}function i(a){H=a,j()}function j(b){a("#methodTable").udeTable({data:b,columns:[{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.methodName"),mData:"methodName",sWidth:"24%"},{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.wait"),mData:"wait",sWidth:"8%"},{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.enabled"),mData:"enabled",sWidth:"8%",mRender:x},{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.frame"),mData:"frame",sWidth:"16%",bVisible:H},{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.refresh"),mData:"refresh",sWidth:"0%",mRender:x,bVisible:!1},{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.uICompare"),mData:"uICompare",sWidth:"8%",mRender:x},{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.defaultframe"),mData:"defaultframe",sWidth:"8%",mRender:x,bVisible:H},{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.window"),mData:"window",sWidth:"12%"},{sTitle:a.i18n.prop("testcase.caseedit.initMethodTable.elementFinder"),mData:"elementFinder",sWidth:"16%"}],onClick:function(a){C.getEventByMethodId(E,G)}})}function k(){l(),a("#methodDialog").prop("add",!0),a.ude.dialog.open("methodDialog",{title:a.i18n.prop("testcase.caseedit.newMethod.methodDialog"),width:"500px"});var b=a("#initMenuCheck").find("input:radio");b.removeAttr("disabled"),a("#initMenuStatusB").attr("checked",!0),w("enabled"),a("#methodName").focus()}function l(){z={},a("#methodName").val(""),a("#wait").val("2"),a("#methodEnabled").attr("checked",!0),a("#frame").val(""),a("#methodUICompare").attr("checked",!0),a("#methodRefresh").attr("checked",!1),a("#elementFinder").val(""),a("#methodDefaultframe").attr("checked",!1),a("#window").val("")}function m(){var b=z;b.caseId=E.caseId,b.methodName=a.trim(a("#methodName").val()),b.wait=a.trim(a("#wait").val()),b.enabled=a("#methodEnabled").is(":checked")===!0?"1":"0",b.frame=a.trim(a("#frame").val()),b.uICompare=a("#methodUICompare").is(":checked")===!0?"1":"0",b.refresh=a("#methodRefresh").is(":checked")===!0?"1":"0",b.elementFinder=a.trim(a("#elementFinder").val()),b.defaultframe=a("#methodDefaultframe").is(":checked")===!0?"1":"0",b.initmenu=a("#initMenuCheck").find("input:radio:checked").val(),b.window=a.trim(a("#window").val());var c=new DataCenter,d=new DataStore(A);d.setRowSetName(A),d.getRowSet().addRow(b),c.addDataStore(d),a("#methodDialog").prop("add")?n(c):(b.id=y,p(c))}function n(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,e=function(b){if(b&&"0"===b.getCode()){var c=b.getSingleDataStore();d=c.getRowSet().getRow(0).data,a("#methodTable").udeTable().fnAddRow(d);var e=B.getMethodStore();e.addRowData(d),a.ude.dialog.close(),C.getEventByMethodId(E,G)}else{var f=b.getDetail();showMessage(f,a("#methodDialog"),"error")}},f=function(b){if(b&&"0"===b.getCode()){var c=b.getSingleDataStore();d=c.getRowSet().getRow(0).data,a("#methodTable").udeTable().fnAddRow(d),a("#methodTable").udeTable().fnMoveRow(d,"top"),a.ude.dialog.close()}else{var e=b.getDetail();showMessage(e,a("#methodDialog"),"error")}};"1"===a("#initMenuCheck").find("input:radio:checked").val()?a.ude.rpc.testcaseeditrpc.addMethodInitMenu(E.caseId,E.parentCaseId,F,f):a.ude.rpc.testcaseeditrpc.addMethod(b,e)}function o(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();if(null==b)return void showMessage(a.i18n.prop("testcase.casejs.initUser.operPrompt"),a("#methodTable"),"error");y=b.id,z=b,a("#methodName").val(b.methodName),a("#wait").val(b.wait),"1"===b.enabled?a("#methodEnabled").attr("checked",!0):a("#methodEnabled").attr("checked",!1),a("#frame").val(b.frame),"1"===b.uICompare?a("#methodUICompare").attr("checked",!0):a("#methodUICompare").attr("checked",!1),"1"===b.refresh?a("#methodRefresh").attr("checked",!0):a("#methodRefresh").attr("checked",!1),a("#elementFinder").val(b.elementFinder),"1"===b.defaultframe?a("#methodDefaultframe").attr("checked",!0):a("#methodDefaultframe").attr("checked",!1),a("#window").val(b.window),a("#methodDialog").prop("add",!1),a.ude.dialog.open("methodDialog",{title:a.i18n.prop("testcase.casejs.initUser.operPromptX"),width:"500px"});var c=a("#initMenuCheck").find("input:radio");c.attr("disabled","disabled"),a("#initMenuStatusB").attr("checked",!0),w("enabled")}function p(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,e=function(b){if(b&&"0"===b.getCode()){a("#methodTable").udeTable().fnUpdateRow(d);var c=B.getMethodStore();c.updateRowData(d),a.ude.dialog.close()}else{var e=b.getDetail();showMessage(e,a("#methodDialog"),"error")}};a.ude.rpc.testcaseeditrpc.editMethod(b,e)}function q(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();return D=b,b?void a.ude.util.confirm(a.i18n.prop("testcase.caseedit.deleteMethod.showMessageQ"),r):void showMessage(a.i18n.prop("testcase.caseedit.deleteMethod.showMessage"),a("#methodTable"),"error")}function r(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();a.ude.rpc.testcaseeditrpc.deleteMethod(b.methodId,s)}function s(b){if(b&&"0"===b.getCode()){a("#methodTable").udeTable().fnDeleteRow();var c=B.getMethodStore();c.deleteRowData(D),a("#eventTable").udeTable().dataTable().fnClearTable()}else{var d=b.getDetail();showMessage(d,null,"error")}}function t(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();if(!b)return void showMessage(a.i18n.prop("testcase.caseedit.upMethod.moveup"),a("#methodTable"),"error");var c=a("#methodTable").udeTable().fnGetSelectedRowDataIndex();if(0!==c){a("#methodTable").udeTable().fnMoveRow(b,"up");var d=a("#methodTable").udeTable().fnGetSelectedRowDataIndex(),e=a("#methodTable").udeTable().fnGetRowData(d+1).orderId,f=a("#methodTable").udeTable().fnGetSelectedRowData().orderId,g=a("#methodTable").udeTable().fnGetSelectedRowData();g.orderId=e;var h=a("#methodTable").udeTable().fnGetRowData(d+1);h.orderId=f;var i=new DataCenter,j=new DataStore(A);j.setRowSetName(A),j.getRowSet().addRow(g),j.getRowSet().addRow(h),i.addDataStore(j),a.ude.rpc.testcaseeditrpc.upORdownMethod(i)}}function u(){var b=a("#methodTable").udeTable().fnGetSelectedRowData();if(!b)return void showMessage(a.i18n.prop("testcase.caseedit.upMethod.movedown"),a("#methodTable"),"error");var c=a("#methodTable").udeTable().fnGetSelectedRowDataIndex()+1,d=a("#methodTable").udeTable().fnGetData().length;if(c!==d){a("#methodTable").udeTable().fnMoveRow(b,"down");var e=a("#methodTable").udeTable().fnGetSelectedRowDataIndex(),f=a("#methodTable").udeTable().fnGetRowData(e-1).orderId,g=a("#methodTable").udeTable().fnGetSelectedRowData().orderId,h=a("#methodTable").udeTable().fnGetSelectedRowData();h.orderId=f;var i=a("#methodTable").udeTable().fnGetRowData(e-1);i.orderId=g;var j=new DataCenter,k=new DataStore(A);k.setRowSetName(A),k.getRowSet().addRow(h),k.getRowSet().addRow(i),j.addDataStore(k),a.ude.rpc.testcaseeditrpc.upORdownMethod(j)}}function v(){var b=a("#initMenuCheck").find("input:radio:checked").val();return"1"===b?(w("disabled"),void a("#methodName").val(a.i18n.prop("testcase.caseedit.initMenuCheck.methodName"))):(w("enabled"),void a("#methodName").val(""))}function w(b){return"disabled"===b?(a("#methodName").attr("disabled","disabled"),a("#wait").attr("disabled","disabled"),a("#methodEnabled").attr("disabled","disabled"),a("#frame").attr("disabled","disabled"),a("#methodUICompare").attr("disabled","disabled"),a("#methodDefaultframe").attr("disabled","disabled"),a("#methodRefresh").attr("disabled","disabled"),a("#elementFinder").attr("disabled","disabled"),void a("#window").attr("disabled","disabled")):(a("#methodName").removeAttr("disabled"),a("#wait").removeAttr("disabled"),a("#methodEnabled").removeAttr("disabled"),a("#frame").removeAttr("disabled"),a("#methodUICompare").removeAttr("disabled"),a("#methodDefaultframe").removeAttr("disabled"),a("#methodRefresh").removeAttr("disabled"),a("#elementFinder").removeAttr("disabled"),void a("#window").removeAttr("disabled"))}function x(b,c){return b="1"===b?a.i18n.prop("testcase.casejs.renderYorN.yes"):a.i18n.prop("testcase.casejs.renderYorN.no")}a.ude.page.testcase.caseDesign.methodjs={init:b,initMethod:c,doEditMethod:p,initMethodTableForgetIncludeFrame:i};var y=null,z={},A="com.neusoft.utf.portal.common.entity.TestcaseMethod",B=a.ude.page.testcase.caseDesign.editparameter,C=a.ude.page.testcase.caseDesign.eventjs,D=null,E="",F=null,G="",H=null}(jQuery),function(a){function b(){la(),a(".common-content-down").css("height",.5*a(".common-content").height()-a(".common-content-top").outerHeight()),a.ude.rpc.testcase.initDBResources(d),k()}function c(){la(),i([]),a.ude.rpc.testcase.initSqlResources(e),m()}function d(b){if(!b)return void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.initMessage")+"\uff01",null,"error");if(1==b.getCode())return void showMessage(b.getDetail(),null,"error");var c=b.getDataStore("dbStore");f(c)}function e(b){if(!b)return void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.initMessage")+"\uff01",null,"error");if(1==b.getCode())return void showMessage(b.getDetail(),null,"error");var c=b.getDataStore("sqlStore");g(c)}function f(b){a("#testConnectBtn").bind("click",function(){A()}),a("#addDBBtn").bind("click",function(){B()}),a("#editDBBtn").bind("click",function(a){D()}),a("#deleteDBBtn").bind("click",function(){L()}),h(b.getRowSet().getData())}function g(b){a("#sqlTable").udeTable().fnRedraw(b.getRowSet().getData())}function h(b){a("#dbTable").udeTable({data:b,columns:[{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.Name"),mData:"dbConnectName",sWidth:"13%"},{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.Type"),mData:"dbConnectType",sWidth:"13%"},{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.Driver"),mData:"dbDriver",sWidth:"22%"},{sTitle:"URL",mData:"dbUrl",sWidth:"13%"},{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.dbUsername"),mData:"dbUsername",sWidth:"13%"},{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.dbPwd"),mData:"dbPwd",sWidth:"13%",mRender:ha}],dblClick:function(a){D()}})}function i(b){a("#sqlTable").udeTable({data:b,columns:[{sTitle:"SQL"+a.i18n.prop("ude.page.testcase.sqlConfig.varName"),mData:"varName",sWidth:"20%"},{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.dbConnectId"),mData:"dbConnectId",sWidth:"30%"},{sTitle:"SQL"+a.i18n.prop("ude.page.testcase.sqlConfig.varValue"),mData:"varValue",sWidth:"30%"},{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.dbValue"),mData:"dbValue",sWidth:"20%"}],dblClick:function(a){E()},onClick:function(a){j()}})}function j(){var b=a("#sqlTable").udeTable().fnGetSelectedRowData().varName,c=a("#sqlTable").udeTable().fnGetSelectedRowData().varId;a.ude.page.testcase.caseDesign.eventjs.setOperActionIdForSql(c,b)}function k(){a("#dbConnectName").prop("maxlength",40),a("#dbIp").prop("maxlength",40),a("#dbPort").prop("maxlength",20),a("#dbInstanceName").prop("maxlength",20),a("#dbUsername").prop("maxlength",20),a("#dbPwd").prop("maxlength",40),a("#dbConnectType").change(ia),a("#dbSaveId").click(l)}function l(){a.ude.rpc.testcase.checkDbNameVailability(a.trim(a("#dbConnectName").val()),U)}function m(){n(),p(),t(),w()}function n(){a.ude.rpc.testcase.initDBResources(q)}function o(){a.ude.rpc.testcase.initDBResources(r)}function p(){a.ude.rpc.testcase.initCaseIdList(s)}function q(b){ua=a("#sqlConfigDataSourceSelect").udeSelect({});var c=b.getDataStore("dbStore");if(c.getRowSet().getRowCount()>0){for(var d=c.getRowSet().getData(),e=0;e<d.length;e++)d[e].name=d[e].dbConnectName,d[e].id=d[e].dbConnectId;ua.setData(d)}else ua.setData()}function r(b){ua=a("#sqlConfigDataSourceSelect").udeSelect({});var c=b.getDataStore("dbStore");if(c.getRowSet().getRowCount()>0){for(var d=c.getRowSet().getData(),e=0;e<d.length;e++)d[e].name=d[e].dbConnectName,d[e].id=d[e].dbConnectId;ua.setData(d)}else ua.setData();a.ude.rpc.testcase.getSqlParameterInfoByVarId(oa,F)}function s(b){var c=b.getDataStore("caseInfoStore");if(va=a("#caseIdSelect").udeSelect({}),c.getRowSet().getRowCount()>0){for(var d=c.getRowSet().getData(),e=0;e<d.length;e++)d[e].name=d[e].caseName,d[e].id=d[e].caseId;va.setData(d)}}function t(){u(),v()}function u(){a("#leftParaTable").udeTable({data:null,columns:[{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.paraName"),mData:"varName",sWidth:"33%"},{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.paraValue"),mData:"varValue",sWidth:"33%"},{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.caseId"),mData:"caseId",sWidth:"33%"}],selectable:"ctrl",dblClick:function(){Z()}})}function v(){a("#rightParaTable").udeTable({data:null,columns:[{sTitle:a.i18n.prop("ude.page.testcase.sqlConfig.paraName"),mData:"varName",sWidth:"100%",mRender:ga}],selectable:"ctrl",dblClick:function(){$()}})}function w(){a("#updateSqlConfig").bind("click",E),a("#deleteSqlConfig").bind("click",N),a("#addSqlConfig").bind("click",C),a("#sqlConfigSaveBtn").bind("click",x),a("#searchParameter").bind("click",Y),a("#sqlMoveRight").bind("click",Z),a("#sqlMoveLeft").bind("click",$),a("#sqlMoveUp").bind("click",ba),a("#sqlMoveDown").bind("click",ca)}function x(){a.ude.rpc.testcase.checkSqlNameVailability(a.trim(a("#sqlConfigNameInput").val()),W)}function y(){var b=pa;b.dbConnectName=a.trim(a("#dbConnectName").val()),b.dbConnectType=a.trim(a("#dbConnectType").val()),b.dbDriver=a.trim(a("#dbDriver").val()),b.dbUrl=a.trim(a("#dbUrl").val()),b.dbUsername=a.trim(a("#dbUsername").val()),b.dbPwd=a.trim(a("#dbPwd").val());var c=new DataCenter,d=new DataStore(ma);d.setRowSetName(ma),d.getRowSet().addRow(b),c.addDataStore(d),a("#dbDialog").prop("add")?H(c):(b.dbConnectId=oa,J(c))}function z(){qa.dbValue="",qa.varName="",qa.dbConnectId="",qa.varValue="";var b=a("#rightParaTable").udeTable().fnGetData(),c=qa;c.varName=a.trim(a("#sqlConfigNameInput").val()),c.dbConnectId=a.trim(a("#sqlConfigDataSourceSelect").val()),c.varValue=a.trim(a("#varValue").val());for(var d=null,e=0;e<b.length;e++)d=d?d+","+b[e].varName:b[e].varName;c.dbValue=d;var f=new DataCenter,g=new DataStore(na);g.setRowSetName(na),g.getRowSet().addRow(c),f.addDataStore(g),a("#sqlDialog").prop("add")?I(f):(c.varId=oa,K(f))}function A(){var b=a("#dbTable").udeTable().fnGetSelectedRowData(),c=new DataCenter,d=new DataStore(ma);d.setRowSetName(ma),d.getRowSet().addRow(b),c.addDataStore(d),b?a.ude.rpc.testcase.testConnectDB(c,Q):showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.connectMessage")+"\uff01",null,"error")}function B(){X(),a("#dbDriver").val("oracle.jdbc.driver.OracleDriver"),a("#dbUrl").val("jdbc:oracle:thin:@127.0.0.1:1521:SID"),a("#dbDialog").prop("add",!0),a.ude.dialog.open("dbDialog",{title:a.i18n.prop("ude.page.testcase.sqlConfig.dbBuild"),width:"500px"})}function C(){va.setValue(""),fa(),n(),a("#sqlDialog").prop("add",!0),a.ude.dialog.open("sqlDialog",{title:ta,width:"850px"}),a("#sqlConfigNameInput").attr("readonly",!1),a("#sqlConfigIdInput").val(a.ude.util.generateUUID()),a("#sqlConfigNameInput").val(""),a("#sqlConfigDataSourceSelect").val(""),a("#sqlConfigDescInput").val(""),ta="SQL"+a.i18n.prop("ude.page.testcase.sqlConfig.build")}function D(){var b=a("#dbTable").udeTable().fnGetSelectedRowData();return null==b?void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.chooseMessage")+"\u3002",null,"error"):(pa=b,oa=b.dbConnectId,editDbName=b.dbConnectName,a("#dbConnectName").val(b.dbConnectName),a("#dbConnectType").val(b.dbConnectType),a("#dbDriver").val(b.dbDriver),a("#dbUrl").val(b.dbUrl),a("#dbUsername").val(b.dbUsername),a("#dbPwd").val(b.dbPwd),a("#dbDialog").prop("add",!1),void a.ude.dialog.open("dbDialog",{title:a.i18n.prop("ude.page.testcase.sqlConfig.dbModify"),width:"500px"}))}function E(){var b=a("#sqlTable").udeTable().fnGetSelectedRowData();null==b?showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.chooseMessage")+"\uff01",null,"error"):(va.setValue(""),fa(),o(),a("#sqlDialog").prop("add",!1),a.ude.dialog.open("sqlDialog",{title:"SQL"+a.i18n.prop("ude.page.testcase.sqlConfig.modify"),width:"850px"}),qa=b,oa=b.varId,Aa=b.varName,a("#sqlConfigNameInput").val(b.varName),a("#varValue").val(b.varValue),a("#sqlConfigNameInput").attr("readonly",!0))}function F(b){if(!b)return void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.initMessage")+"\uff01",null,"error");if(1==b.getCode())return void showMessage(b.getDetail(),null,"error");var c=b.getDataStore("sqlParStore"),d=c.getRowSet().getData();wa=d[0].dbConnectId,ua.setValue(wa);var e=d[0].dbValue;e&&a.ude.rpc.testcase.getSqlParameterInfoByVarIdStr(e,G)}function G(b){if(a.ude.dialog.open("sqlDialog",{title:"SQL"+a.i18n.prop("ude.page.testcase.sqlConfig.modify"),width:"850px"}),!b)return void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.initMessage")+"\uff01",null,"error");if(1==b.getCode())return void showMessage(b.getDetail(),null,"error");var c=b.getDataStore("sqlStrParStore"),d=c.getRowSet().getData();a("#rightParaTable").udeTable().dataTable().fnClearTable();for(var e=0;e<d.length;e++)a("#rightParaTable").udeTable().fnAddRow(d[e])}function H(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,e=function(b){if(b&&"0"==b.getCode()){var c=b.getSingleDataStore();d=c.getRowSet().getRow(0).data,a("#dbTable").udeTable().fnAddRow(d),editDbName="",a.ude.dialog.close()}else{var e=b.getDetail();showMessage(e,a("#dbDialog"),"error")}};a.ude.rpc.testcase.addDB(b,e)}function I(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,f=function(b){if(b&&"0"==b.getCode()){var c=b.getSingleDataStore();d=c.getRowSet().getRow(0).data,a("#sqlTable").udeTable().fnAddRow(d),a("#sqlTable").udeTable().dataTable().fnClearTable(),a.ude.rpc.testcase.initSqlResources(e),Aa="",a.ude.dialog.close()}else{var f=b.getDetail();showMessage(f,a("#sqlDialog"),"error")}};a.ude.rpc.testcase.addSql(b,f)}function J(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,e=function(b){if(b&&"0"==b.getCode())a("#dbTable").udeTable().fnUpdateRow(d),editDbName="",a.ude.dialog.close();else{var c=b.getDetail();showMessage(c,a("#dbDialog"),"error")}};d.dbPwd==sa&&(d.dbPwd=""),a.ude.rpc.testcase.editDB(b,e)}function K(b){var c=b.getSingleDataStore(),d=c.getRowSet().getRow(0).data,f=function(b){if(b&&"0"==b.getCode())a("#sqlTable").udeTable().fnUpdateRow(d),a("#sqlTable").udeTable().dataTable().fnClearTable(),a.ude.rpc.testcase.initSqlResources(e),Aa="",a.ude.dialog.close();else{var c=b.getDetail();showMessage(c,a("#sqlDialog"),"error")}};a.ude.rpc.testcase.editSql(b,f)}function L(){var b=a("#dbTable").udeTable().fnGetSelectedRowData();return b?void a.ude.rpc.testcase.getDbConfigSql(b.dbConnectId,M):void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.deleteDb")+"\uff01",null,"error")}function M(b){return b.getDataStore("sqlStore").getRowSet().getData().length>0?void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.deleteMessage")+"\uff01",null,"error"):void a.ude.util.confirm(a.i18n.prop("ude.page.testcase.sqlConfig.deleteDBConfirm"),O)}function N(){var b=a("#sqlTable").udeTable().fnGetSelectedRowData();return b?void a.ude.util.confirm(a.i18n.prop("ude.page.testcase.sqlConfig.deleteDBConfirm"),P):void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.deleteSql")+"SQL"+a.i18n.prop("ude.page.testcase.sqlConfig.config"),null,"error")}function O(){var b=a("#dbTable").udeTable().fnGetSelectedRowData();a.ude.rpc.testcase.deleteDB(b.dbConnectId,R)}function P(){var b=a("#sqlTable").udeTable().fnGetSelectedRowData();a.ude.rpc.testcase.deleteSql(b.varId,S)}function Q(b){var c=b.getParameter("testResult");"true"===c?showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.connSuccess")+"!",null,""):showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.connFail")+"!",null,"error")}function R(b){if(b&&"0"==b.getCode()){a("#dbTable").udeTable().fnDeleteRow();var c=a("#dbTable").udeTable().fnGetSelectedRowData(),d=ra.getDBStore();d.deleteRowData(c)}else{var e=b.getDetail();showMessage(e,null,"error")}}function S(b){if(b&&"0"==b.getCode()){a("#sqlTable").udeTable().fnDeleteRow();var c=a("#sqlTable").udeTable().fnGetSelectedRowData(),d=ra.getSqlStore();d.deleteRowData(c)}else{var e=b.getDetail();showMessage(e,null,"error")}}function T(){var b=a.trim(a("#dbConnectName").val()),c=a.trim(a("#dbConnectType").val()),d=a.trim(a("#dbDriver").val()),e=a.trim(a("#dbUrl").val()),f=a.trim(a("#dbUsername").val());return b&&""!=b?c&&""!=c?d&&""!=d?e&&""!=e?!(!f||""==f)||(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.dbUsernameWarn")+"\u3002",a("#dbDialog"),"error"),a("#dbUsername").focus(),!1):(showMessage("URL"+a.i18n.prop("ude.page.testcase.sqlConfig.dbUrl")+"!",a("#dbDialog"),"error"),a("#dbUrl").focus(),!1):(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.dbDriver")+"!",a("#dbDialog"),"error"),a("#dbDriver").focus(),!1):(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.dbConnectType")+"!",a("#dbDialog"),"error"),a("#dbConnectType").focus(),!1):(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.dbConnectName")+"!",a("#dbDialog"),"error"),a("#dbConnectName").focus(),!1)}function U(b){return xa=b.getParameter("dbCheckResult"),"0"!=xa&&editDbName!=a("#dbConnectName").val()?(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.dbNameCheckResult")+"\u3002",a("#dbDialog"),"error"),void a("#dbConnectName").focus()):void(T()&&y())}function V(){var b=a.trim(a("#sqlConfigNameInput").val()),c=a.trim(a("#varValue").val()),d=a.trim(a("#sqlConfigDataSourceSelect").val());ka(c);var e=a("#rightParaTable").udeTable().fnGetData().length;return b&&""!=b?d?c&&""!=c?za==e||(showMessage("Sql"+a.i18n.prop("ude.page.testcase.sqlConfig.markCount"),a("#sqlDialog"),"error"),a("#varValue").focus(),!1):(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.dbInput")+"SQL"+a.i18n.prop("ude.page.testcase.sqlConfig.varValue")+"\u3002",a("#sqlDialog"),"error"),a("#varValue").focus(),!1):(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.DataSourceSelect"),a("#sqlDialog"),"error"),"#sqlConfigDataSourceSelect".focus(),!1):(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.dbInput")+"SQL"+a.i18n.prop("ude.page.testcase.sqlConfig.dbConnectName")+"\u3002",a("#sqlDialog"),"error"),a("#varName").focus(),!1)}function W(b){return ya=b.getParameter("sqlCheckResult"),"0"!=ya&&a("#sqlConfigNameInput").val()!=Aa?(showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.sqlName")+"Sql"+a.i18n.prop("ude.page.testcase.sqlConfig.sqlNameCheckResult"),a("#sqlDialog"),"error"),void a("#sqlConfigNameInput").focus()):void(V()&&z())}function X(){pa={},a("#dbConnectName").val(""),a("#dbConnectType").val(""),a("#dbDriver").val(""),a("#dbUrl").val(""),a("#dbUsername").val(""),a("#dbPwd").val("")}function Y(){var b=a.trim(a("#caseIdSelect").val()),c=a.trim(a("#parName").val());a.ude.rpc.testcase.getParameterByCaseId(b,c,da)}function Z(){var b=a("#leftParaTable").udeTable().fnGetSelectedRowDatas();a("#leftParaTable").udeTable().fnDeleteRow(),_(b)}function $(){var b=a("#rightParaTable").udeTable().fnGetSelectedRowDatas();a("#rightParaTable").udeTable().fnDeleteRow(),aa(b)}function _(b){if(!(b.length>0))return void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.rightPara"),null,"error");for(var c=0;c<b.length;c++)a("#rightParaTable").udeTable().fnAddRow(b[c])}function aa(b){if(!(b.length>0))return void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.rightPara"),null,"error");for(var c=0;c<b.length;c++)a("#leftParaTable").udeTable().fnAddRow(b[c])}function ba(){var b=a("#rightParaTable").udeTable().fnGetSelectedRowData();return b?void a("#rightParaTable").udeTable().fnMoveRow(b,"up"):void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.upContent"),null,"error")}function ca(){var b=a("#rightParaTable").udeTable().fnGetSelectedRowData();return b?void a("#rightParaTable").udeTable().fnMoveRow(b,"down"):void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.downContent"),null,"error")}function da(b){if(!b)return void showMessage(a.i18n.prop("ude.page.testcase.sqlConfig.initMessage")+"\uff01",null,"error");if(1==b.getCode())return void showMessage(b.getDetail(),null,"error");var c=b.getDataStore("parStore");ea(c.getRowSet().getData())}function ea(b){a("#leftParaTable").udeTable().dataTable().fnClearTable();for(var c=0;c<b.length;c++)a("#leftParaTable").udeTable().fnAddRow(b[c])}function fa(){qa={},ua.setValue(""),a("#sqlConfigNameInput").val(""),a("#varValue").val(""),a("#rightParaTable").udeTable().dataTable().fnClearTable(),a("#leftParaTable").udeTable().dataTable().fnClearTable(),a("#s2id_caseIdSelect").find(".select2-search-choice-close").show()}function ga(a){return"<div class='cell' style='text-align:center'>"+a+"</div>"}function ha(a){return"<div class='cell' >********</div>"}function ia(){ja(),"Oracle"===a("#dbConnectType").val()&&(a("#dbDriver").val("oracle.jdbc.driver.OracleDriver"),a("#dbUrl").val("jdbc:oracle:thin:@127.0.0.1:1521:SID")),"MySQL"===a("#dbConnectType").val()&&(a("#dbDriver").val("com.mysql.jdbc.Driver"),a("#dbUrl").val("jdbc:mysql://127.0.0.1:3306/SID")),"MSSQLServer"===a("#dbConnectType").val()&&(a("#dbDriver").val("net.sourceforge.jtds.jdbc.Driver"),a("#dbUrl").val("jdbc:jtds:sqlserver://127.0.0.1:1433/SID")),"IBMDB2"===a("#dbConnectType").val()&&(a("#dbDriver").val("com.ibm.db2.jcc.DB2Driver"),a("#dbUrl").val("jdbc:db2://127.0.0.1:50000/SID")),"Sybase"===a("#dbConnectType").val()&&(a("#dbDriver").val("com.sybase.jdbc3.jdbc.SybDriver"),a("#dbUrl").val("jdbc:sybase:Tds:127.0.0.1:5000/SID")),a("#dbConnectType").val()===a.i18n.prop("ude.page.testcase.sqlConfig.oscar")&&(a("#dbDriver").val("com.oscar.Driver"),a("#dbUrl").val("jdbc:oscar://127.0.0.1:2003/SID")),a("#dbConnectType").val()===a.i18n.prop("ude.page.testcase.sqlConfig.DmDriver")&&(a("#dbDriver").val("dm.jdbc.driver.DmDriver"),a("#dbUrl").val("jdbc:dm://127.0.0.1:5236/DMSERVER")),a("#dbConnectType").val()===a.i18n.prop("ude.page.testcase.sqlConfig.kingbase")&&(a("#dbDriver").val("com.kingbase.Driver"),a("#dbUrl").val("jdbc:kingbase://127.0.0.1:54321/SID")),"jdbc"===a("#dbConnectType").val()&&(a("#dbDriver").val("jdbc driver"),a("#dbUrl").val("jdbc url"))}function ja(){a("#dbDriver").val(""),a("#dbUrl").val("")}function ka(a){var b=a.match(/\?/g);za=b?b.length:0}function la(){a.ude.pageResizeHandler=function(){a(".common-content-down").css("height",.5*a(".common-content").height()-a(".common-content-top").outerHeight())}}a.ude.page.testcase.sqlConfig.main={initDB:b,initSql:c};var ma="com.neusoft.utf.portal.common.entity.DataDbConfig",na="com.neusoft.utf.portal.common.entity.TestcaseArgDefine",oa=null,pa={},qa={},ra=a.ude.page.testcase.sqlConfig.parameter,sa="******",ta=null,ua=null,va=null,wa="",xa="0",ya="0",za=0,Aa=null}(jQuery),function(a){a.testcase={initDBResources:function(a){var b={};b.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/initDBInfo.action",b.sync=!1,b.load=a,$.maf.action.requestData(b)},initSqlResources:function(a){var b={};b.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/initSqlInfo.action",b.sync=!1,b.load=a,$.maf.action.requestData(b)},getDbConfigSql:function(a,b){var c=new DataCenter;c.addParameter("dbConnectId",a);var d={};d.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/getSqlInfo.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},testConnectDB:function(a,b){var c={};c.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/testConnectDB.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},addDB:function(a,b){var c={};c.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/addDB.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},editDB:function(a,b){var c={};c.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/editDB.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},deleteDB:function(a,b){var c=new DataCenter;c.addParameter("dbConnectId",a);var d={};d.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/deleteDB.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},addSql:function(a,b){var c={};c.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/addSql.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},editSql:function(a,b){var c={};c.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/editSql.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},deleteSql:function(a,b){var c=new DataCenter;c.addParameter("varId",a);var d={};d.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/deleteSql.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},saveResourceAuthorities:function(a,b){var c={};c.url=appPath+"/utf/system/user/saveResourceAuthorities.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},initCaseIdList:function(a){var b={};b.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/getCaseInfoList.action",b.sync=!1,b.load=a,$.maf.action.requestData(b)},getParameterByCaseId:function(a,b,c){var d=new DataCenter;d.addParameter("caseId",a),d.addParameter("varName",b);var e={};e.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/getParemeterInfoList.action",e.sync=!1,e.load=c,$.maf.action.requestData(e,d)},getSqlParameterInfoByVarId:function(a,b){var c=new DataCenter;c.addParameter("varId",a);var d={};d.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/getSqlParameterInfoByVarId.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},getSqlParameterInfoByVarIdStr:function(a,b){var c=new DataCenter;c.addParameter("dbValue",a);var d={};d.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/getSqlParameterInfoByVarIdStr.action",
d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},checkDbNameVailability:function(a,b){var c=new DataCenter;c.addParameter("dbName",a);var d={};d.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/checkDbNameVailability.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},checkSqlNameVailability:function(a,b){var c=new DataCenter;c.addParameter("sqlName",a);var d={};d.url=appPath+"/utf/testcase/sqlConfig/sqlConfigGrid/checkSqlNameVailability.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)}}}($.ude.rpc),function(a){a.param={initResources:function(a){var b={};b.url=appPath+"/utf/testcase/paramManage/initParamPage.action",b.sync=!1,b.load=a,$.maf.action.requestData(b)},getSysMenu:function(a,b){var c=new DataCenter;c.addParameter("appId",a);var d={};d.url=appPath+"/utf/demo/demoGrid/getSysMenu.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},addUser:function(a,b,c,d){a.addParameter("caseName",b),a.addParameter("sceneName",c);var e={};e.url=appPath+"/utf/testcase/paramManage/addParam.action",e.sync=!1,e.load=d,$.maf.action.requestData(e,a)},editUser:function(a,b,c,d){a.addParameter("caseName",b),a.addParameter("sceneName",c);var e={};e.url=appPath+"/utf/testcase/paramManage/editParam.action",e.sync=!1,e.load=d,$.maf.action.requestData(e,a)},deleteParam:function(a,b){for(var c=new DataCenter,d=0;d<a.length;d++)c.addParameter(a[d],a[d]);var e={};e.url=appPath+"/utf/testcase/paramManage/deleteParam.action",e.sync=!1,e.load=b,$.maf.action.requestData(e,c)},getAllCaseInfo:function(a,b){var c=new DataCenter;c.addParameter("caseName",b);var d={};d.url=appPath+"/utf/testcase/paramManage/getAllCaseInfo.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)},doSearchParamInfo:function(a,b,c,d,e,f,g,h){var i=new DataCenter;i.addParameter("varName",a),i.addParameter("varGroup",b),i.addParameter("varValue",c),i.addParameter("varType",d),i.addParameter("varLevel",e),i.addParameter("caseId",f),i.addParameter("sceneId",g);var j={};j.url=appPath+"/utf/testcase/paramManage/doSearchParamInfo.action",j.sync=!1,j.load=h,$.maf.action.requestData(j,i)},getSceneByProject:function(a){var b=new DataCenter,c={};c.url=appPath+"/utf/testcase/paramManage/getScene.action",c.sync=!1,c.load=a,$.maf.action.requestData(c,b)},queryIdMatchedUserView:function(a,b){var c=new DataCenter;c.addParameter("id",b);var d={};d.url=appPath+"/utf/system/user/queryIdMatchedUserView.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)},queryAccountMatchedUserViews:function(a,b){var c=new DataCenter;c.addParameter("account",b);var d={};d.url=appPath+"/utf/system/user/queryAccountMatchedUserViews.action",d.sync=!1,d.load=a,$.maf.action.requestData(d,c)},getAllUserViews:function(a){var b={};b.url=appPath+"/utf/system/user/getAllUserViews.action",b.sync=!1,b.load=a,$.maf.action.requestData(b)},getAllAuthorizeInfo:function(a,b){var c={};c.url=appPath+"/utf/system/user/getAllAuthorizeInfo.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},saveResourceAuthorities:function(a,b){var c={};c.url=appPath+"/utf/system/user/saveResourceAuthorities.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},getParam:function(a,b,c,d){var e=new DataCenter;e.addParameter("sceneId",a),e.addParameter("caseId",b),e.addParameter("caseName",c);var f={};f.url=appPath+"/utf/testcase/paramManage/getParam.action",f.sync=!1,f.load=d,$.maf.action.requestData(f,e)},saveParam:function(a,b,c,d,e){var f=new DataCenter;f.addParameter("paramJson",a),f.addParameter("sceneId",b),f.addParameter("caseId",c),f.addParameter("varLevel",d);var g={};g.url=appPath+"/utf/testcase/paramManage/saveParam.action",g.sync=!1,g.load=e,$.maf.action.requestData(g,f)}}}($.ude.rpc);