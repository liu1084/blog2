/* All right reserved by Neusoft Co. Ltd. 2016-10-14 10:10:36 */
!function(a){function b(){a.ude.page.config.projectStructure.main.getIfCheckFlag(!1),a.ude.page.config.projectStructure.main.init(),f(),a.ude.page.config.projectStructure.main.udeTreeClick(function(){var b=new DataCenter,c=new DataStore(B);c.setRowSetName(B);var d=a.ude.page.config.projectStructure.main.treeAttribution(),e=d.menuId,f=d.ismenu;b.addParameter("caseId",e),b.addParameter("pageType",f),c.getRowSet().addRow(d),b.addDataStore(c),C=b,a.ude.rpc.pageObject.getPageElement(b,r)}),d(),a.ude.rpc.testcaseRpc.getIncludeFrame(c)}function c(b){if(b){var c=b.getDataStore("utfProjectInfoTResult"),d=c.getRowSet().getRow(0).data;"1"===d.perserve01?(a("#belongFrameTr").hide(),I=!1):(a("#belongFrameTr").show(),I=!0),p(null)}}function d(){a.ude.rpc.pageObject.getInitData(null,e)}function e(b){if(b&&"0"===b.getCode()){var c=b.getDataStore("elementTypeList").getRowSet().getData();G=a("#elementType").udeSelect({onChange:function(){var b=a("#elementType").udeSelect().getNameValue().toLowerCase();"gridcell"===b||"gridrow"===b||"treenode"===b?(a("#textTr").hide(),a("#gridTr").show(),"gridcell"===b?(a("#gridIdTitleId").show(),a("#rowIdTitleId").show(),a("#treeIdTitleId").hide(),a("#treeNodeIdTitleId").hide(),a("#columnIdTitleTd").show(),a("#columnIdTextTd").show()):"gridrow"===b?(a("#gridIdTitleId").show(),a("#rowIdTitleId").show(),a("#treeIdTitleId").hide(),a("#treeNodeIdTitleId").hide(),a("#columnIdTitleTd").hide(),a("#columnIdTextTd").hide()):(a("#gridIdTitleId").hide(),a("#rowIdTitleId").hide(),a("#treeIdTitleId").show(),a("#treeNodeIdTitleId").show(),a("#columnIdTitleTd").hide(),a("#columnIdTextTd").hide())):(a("#textTr").show(),a("#gridTr").hide())}}),G.setData(c)}}function f(){a("#deletePageObject").bind("click",function(){m()}),a("#addPageObject").bind("click",function(){h()}),a("#savePageObject").bind("click",function(){j()}),a("#downloadMetaXML").bind("click",function(){v()}),a("#objectTabs a[href='#singleObjDiv']").click(function(b){b.preventDefault(),a(this).tab("show"),a("#addPageObject").show(),a("#deletePageObject").show(),a("#saveMultiObject").hide(),a("#pageObjectTable").udeTable().fnResize()}),a("#objectTabs a[href='#multiObjDiv']").click(function(b){b.preventDefault(),a(this).tab("show"),a("#addPageObject").hide(),a("#deletePageObject").hide(),a("#saveMultiObject").show()}),a("#saveMultiObject").bind("click",function(){y()})}function g(){a("#elementName").attr("value",""),a("#belongFrame").attr("value",""),a("#analyseKind").attr("value",""),a("#description").attr("value",""),a("#girdId").attr("value",""),a("#rowId").attr("value",""),a("#columnId").attr("value","")}function h(){var b=a.ude.page.config.projectStructure.main.treeAttribution(),c=b.pageType,d=b.menuId;"-1"===d||"listMenu"===c?showMessage(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.addPageObject_showMessage")+"\uff01",null,"error"):(a("#pageObjectDialog").prop("add",!0),g(),a.ude.dialog.open("pageObjectDialog",{title:a.i18n.prop("ude.page.config.pageObject.pageObjectJs.addPageObject_title"),width:"500px"}))}function i(){var b=a("#elementType").val();if(!b||""===b)return showMessage(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.checkAvailability_elementType")+"\uff01",a("#pageObjectDialog"),"error"),a("#elementType").focus(),!1;var c="";if("gridcell"===b.toLowerCase()){var d=a("#rowId").val(),e=a("#columnId").val();if(!d||""===d||!e||""===e)return showMessage(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.checkAvailability_elementName"),a("#pageObjectDialog"),"error"),void a("#girdId").focus();c=a.trim(a("#girdId").val())+","+a.trim(a("#rowId").val())+","+a.trim(a("#columnId").val())}else if("gridrow"===b.toLowerCase()||"treenode"===b.toLowerCase()){var d=a("#rowId").val();if(!d||""===d)return showMessage(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.checkAvailability_elementName"),a("#pageObjectDialog"),"error"),void a("#girdId").focus();c=a.trim(a("#girdId").val())+","+a.trim(a("#rowId").val())}else if(c=a.trim(a("#elementName").val()),!c||""===c)return showMessage(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.checkAvailability_elementName"),a("#pageObjectDialog"),"error"),void a("#elementName").focus();return!(c.indexOf('"')>0)||void showMessage("\u63a7\u4ef6\u6807\u793a\u4e2d\u4e0d\u80fd\u5b58\u5728\u53cc\u5f15\u53f7",a("#pageObjectDialog"),"error")}function j(){var b=i();if(b){var c=(new DataCenter,a("#elementType").val()),d=a.trim(a("#belongFrame").val()),e=a.trim(a("#analyseKind").val()),f=a.trim(a("#description").val()),g="";if(g="gridcell"===c.toLowerCase()?a.trim(a("#girdId").val())+","+a.trim(a("#rowId").val())+","+a.trim(a("#columnId").val()):"gridrow"===c.toLowerCase()||"treenode"===c.toLowerCase()?a.trim(a("#girdId").val())+","+a.trim(a("#rowId").val()):a.trim(a("#elementName").val()),a("#pageObjectDialog").prop("add")){var h={};h.elementType=c,h.name=g,h.belongFrame=d,h.analyseKind=e,h.description=f,h.analyseKind="manual",ds=new DataStore(D),ds.setRowSetName(D),ds.getRowSet().addRow(h)}else H.elementType=c,H.name=g,H.belongFrame=d,H.description=f,H.analyseKind="manual",ds=new DataStore(D),ds.setRowSetName(D),ds.getRowSet().addRow(H);var j=new DataStore(B);j.setRowSetName(B);var l=a.ude.page.config.projectStructure.main.treeAttribution();j.getRowSet().addRow(l),a.ude.rpc.pageObject.savePageObject(ds,j,function(b){"0"==b.header.code?k(b):showMessage(a.i18n.prop(b.header.message.detail),null,"error")})}}function k(b){a.ude.dialog.close(),showMessage("\u64cd\u4f5c\u6210\u529f\u3002",null,"info");var c=b.getDataStore(D).getRowSet().getData();a("#pageObjectTable").udeTable().fnRedraw(c)}function l(){if(H=a("#pageObjectTable").udeTable().fnGetSelectedRowData(),null==H)return void showMessage(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.editPageObject_showMessage"),null,"error");g();var b=H.elementType,c=H.name;G.udeSelect().setValue(b);var d=b.toLowerCase();if("gridcell"===d||"gridrow"===d||"treenode"===d?(a("#textTr").hide(),a("#gridTr").show(),"gridcell"===d?(a("#gridIdTitleId").show(),a("#rowIdTitleId").show(),a("#treeIdTitleId").hide(),a("#treeNodeIdTitleId").hide(),a("#columnIdTitleTd").show(),a("#columnIdTextTd").show()):"gridrow"===d?(a("#gridIdTitleId").show(),a("#rowIdTitleId").show(),a("#treeIdTitleId").hide(),a("#treeNodeIdTitleId").hide(),a("#columnIdTitleTd").hide(),a("#columnIdTextTd").hide()):(a("#gridIdTitleId").hide(),a("#rowIdTitleId").hide(),a("#treeIdTitleId").show(),a("#treeNodeIdTitleId").show(),a("#columnIdTitleTd").hide(),a("#columnIdTextTd").hide())):(a("#textTr").show(),a("#gridTr").hide()),"gridcell"===d){var e=c.split(",");3==e.length?(a("#girdId").val(e[0]),a("#rowId").val(e[1]),a("#columnId").val(e[2])):(a("#girdId").val(""),a("#rowId").val(""),a("#columnId").val(""))}else if("gridrow"===d||"treenode"===d){var e=c.split(",");2==e.length?(a("#girdId").val(e[0]),a("#rowId").val(e[1])):(a("#girdId").val(""),a("#rowId").val(""))}else a("#elementName").val(c);a("#belongFrame").val(H.belongFrame),a("#description").val(H.description),a("#pageObjectDialog").prop("add",!1),a.ude.dialog.open("pageObjectDialog",{title:a.i18n.prop("ude.page.config.pageObject.pageObjectJs.editPageObject_title"),width:"500px"})}function m(){var b=a("input[name='check']:checked");if(!(b.length>0))return void showMessage(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.deletePageObject_showMessage"),null,"error");a(b).each(function(){F.push(this.value)});for(var c=0;c<F.length;c++)C.addParameter(F[c],F[c]);a.ude.util.confirm(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.deletePageObject_confirm")+"\uff1f",n)}function n(){a.ude.rpc.pageObject.deletePageObject(C,o)}function o(b){if(b&&"0"===b.getCode()){var c=b.getDataStore(D).getRowSet().getData();a("#pageObjectTable").udeTable().fnRedraw(c),showMessage(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.deletePageObjectComplete"),null,"info")}else{var d=b.getDetail();showMessage(d,null,"error")}}function p(b){a("#pageObjectTable").udeTable({data:b,columns:[{sTitle:"",mData:"id",sWidth:"5%",bSort:!1,mRender:u},{sTitle:a.i18n.prop("ude.page.config.pageObject.pageObjectJs.setData_elementType"),mData:"elementType",sWidth:"15%"},{sTitle:a.i18n.prop("ude.page.config.pageObject.pageObjectJs.setData_name"),mData:"name",sWidth:"20%"},{sTitle:a.i18n.prop("ude.page.config.pageObject.pageObjectJs.setData_belongFrame"),mData:"belongFrame",sWidth:"20%",bVisible:!1},{sTitle:a.i18n.prop("ude.page.config.pageObject.pageObjectJs.setData_analyseKind"),mData:"analyseKind",sWidth:"15%",mRender:q},{sTitle:a.i18n.prop("ude.page.config.pageObject.pageObjectJs.setData_description"),mData:"description",sWidth:"45%"}],dblClick:function(a){l()}}),a("#pageObjectTable").udeTable().fnSetCheckbox("pageObjectTable")}function q(b,c){var d=a("<div style='text-align: left;'></div>");return"auto"===b?d.text(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.renderAnalyseKind_auto")):d.text(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.renderAnalyseKind_manual")),a("<div>").append(d).html()}function r(b){var c=b.getDataStore(D).getRowSet().getData();a("#pageObjectTable").udeTable().fnRedraw(c),a("#pageObjectTable").udeTable().fnResize();var d=new Array;s(d),a("input[name='pageObjectTable_chk_all']").attr("checked",!1),a("input[name='check']").attr("checked",!1),E=!1,a("input[name='pageObjectTable_chk_all']").unbind("click"),a("input[name='pageObjectTable_chk_all']").bind("click",function(){t()})}function s(b){for(var c=0;c<b.length;c++)b[c].editedName="["+b[c].elementType+"]"+b[c].name,null==b[c].description&&(b[c].description="");var d=a("#multiObjDiv");d.handsontable("destroy"),w(d,b)}function t(){E?(a("input[name='check']").attr("checked",!1),E=!1):(a("input[name='check']").attr("checked",!0),E=!0)}function u(b,c){var d=a("<div class='cell-widget' align='center'/>"),e=a("<input type='checkbox' name='check' value='"+b+"'/> ");return d.append(e),a("<div/>").append(d).html()}function v(){var b=new DataCenter,c=function(){a.ude.rpc.pageObject.downLoadMetaXML(b,d)},d=function(a){var b=a.getParameter("downLoadPath");window.location.href="/utf"+b};a.ude.rpc.pageObject.createMetaXML(b,c)}function w(b,c){var d=new Array;d.push(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.setData_name")),d.push(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.setData_description"));var e=new Array;e.push(450),e.push(450);var f=new Array;f.push({data:"editedName"}),f.push({data:"description"}),b.handsontable({data:c,minSpareRows:1,colHeaders:d,colWidths:e,manualColumnResize:!0,manualRowResize:!0,columnSorting:!0,rowHeaders:!0,contextMenu:{items:{row_above:{name:a.i18n.prop("testcase.paramjs.init.row_above")},row_below:{name:a.i18n.prop("testcase.paramjs.init.row_below")},remove_row:{name:a.i18n.prop("testcase.paramjs.init.remove_row")}}},columns:f,afterChange:function(a,b){"loadData"!==b&&x()},afterRemoveRow:function(a,b){"loadData"!==b&&x()},afterCreateRow:function(a,b){"loadData"!==b&&x()}})}function x(){}function y(){var b=a.ude.page.config.projectStructure.main.treeAttribution(),c=b.pageType,d=b.menuId;"-1"===d||"listMenu"===c?showMessage(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.addPageObject_showMessage")+"\uff01",null,"error"):a.ude.util.confirm(a.i18n.prop("ude.page.config.pageObject.pageObjectJs.isSaveMultiObject"),z)}function z(){var b=a.ude.page.config.projectStructure.main.treeAttribution(),c=b.menuId,d=JSON.stringify(a("#multiObjDiv").handsontable("getData"));a.ude.rpc.pageObject.saveMultiObject(d,c,A)}function A(b){if(b&&"0"==b.getCode()){showMessage("\u64cd\u4f5c\u6210\u529f\u3002",null,"info");var c=b.getDataStore(D).getRowSet().getData();a("#pageObjectTable").udeTable().fnRedraw(c),a("#pageObjectTable").udeTable().fnResize();var d=new Array;s(d),a("#objectTabs a[href='#singleObjDiv']").click()}else{var e=b.getDetail();showMessage(e,null,"error")}}var B="com.neusoft.utf.portal.config.projectstructure.entity.UtfProjectAnalyseResult",C=(new DataStore(B),new DataCenter),D="com.neusoft.utf.portal.config.pageobject.entity.UtfPageAnalyseResult",E=(new DataStore(D),new DataCenter,!1),F=new Array,G=null,H=null,I=!0;a.ude.page.config.pageObject.main={init:b}}(jQuery),function(a){a.pageObject={getInitData:function(a,b){var c={};c.url=appPath+"/utf/config/pageobject/getInitData.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},getPageElement:function(a,b){var c={};c.url=appPath+"/utf/config/pageobject/getPageElement.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},savePageObject:function(a,b,c){var d=new DataCenter;d.addDataStore(a),d.addDataStore(b);var e={};e.url=appPath+"/utf/config/pageobject/savePageObject.action",e.sync=!1,e.load=c,$.maf.action.requestData(e,d)},deletePageObject:function(a,b){var c={};c.url=appPath+"/utf/config/pageobject/deletePageObject.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},createMetaXML:function(a,b){var c={};c.url=appPath+"/utf/config/pageobject/createMetaXML.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},downLoadMetaXML:function(a,b){var c={};c.url=appPath+"/utf/config/pageobject/downLoadMetaXML.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},saveMultiObject:function(a,b,c){var d=new DataCenter;d.addParameter("multiObjectJson",a),d.addParameter("menuId",b);var e={};e.url=appPath+"/utf/config/pageobject/saveMultiObject.action",e.sync=!1,e.load=c,$.maf.action.requestData(e,d)}}}($.ude.rpc),function(a){a.testcaseRpc={initResources:function(a,b,c){var d=new DataCenter;d.addParameter("parentCaseId",b),d.addParameter("pageType",c);var e={};e.url=appPath+"/utf/testcase/caseDesign/caseGrid/initUserPage.action",e.sync=!1,e.load=a,$.maf.action.requestData(e,d)},addUser:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseGrid/addUser.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},editUser:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseGrid/editUser.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},deleteUser:function(a,b){var c=new DataCenter;c.addParameter("id",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseGrid/deleteUser.action",d.load=b,$.maf.action.requestData(d,c)},testCaseRepeat:function(a,b){var c=new DataCenter;c.addParameter("id",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseGrid/testCaseRepeat.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},getIncludeFrame:function(a){var b=new DataCenter,c={};c.url=appPath+"/utf/testcase/caseDesign/caseGrid/getIncludeFrame.action",c.sync=!1,c.load=a,$.maf.action.requestData(c,b)},getAppiumSession:function(a){var b=new DataCenter,c={};c.url=appPath+"/utf/testcase/caseDesign/caseGrid/getAppiumSession.action",c.sync=!1,c.load=a,$.maf.action.requestData(c,b)},refreshImage:function(a,b){var c=new DataCenter;c.addParameter("appiumSessionId",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseGrid/refreshImage.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},installApp:function(a,b){var c=new DataCenter;c.addParameter("host",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseGrid/installApp.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},saveObject:function(a,b){var c={};c.url=appPath+"/utf/testcase/caseDesign/caseGrid/saveObject.action",c.sync=!1,c.load=b,$.maf.action.requestData(c,a)},saveImage:function(a,b,c,d){var e=new DataCenter;e.addParameter("menuId",a),e.addParameter("appImageHidden",b),e.addParameter("appDomXmlHidden",c);var f={};f.url=appPath+"/utf/testcase/caseDesign/caseGrid/saveImage.action",f.sync=!1,f.load=d,$.maf.action.requestData(f,e)},getSavedImage:function(a,b){var c=new DataCenter;c.addParameter("menuId",a);var d={};d.url=appPath+"/utf/testcase/caseDesign/caseGrid/getSavedImage.action",d.sync=!1,d.load=b,$.maf.action.requestData(d,c)},execScript:function(a,b,c,d,e,f){var g=new DataCenter;g.addParameter("appiumSessionId",a),g.addParameter("selector",b),g.addParameter("action",c),g.addParameter("waitTime",e),g.addParameter("scriptValue",d);var h={};h.url=appPath+"/utf/testcase/caseDesign/caseGrid/execScript.action",h.sync=!1,h.load=f,$.maf.action.requestData(h,g)}}}($.ude.rpc);